<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Harper</title>
  
  <subtitle>Harper</subtitle>
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2024-12-04T02:29:21.147Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>harper</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>For you, jzy</title>
    <link href="http://example.com/2024/12/03/For-you-jzy/"/>
    <id>http://example.com/2024/12/03/For-you-jzy/</id>
    <published>2024-12-03T15:45:33.000Z</published>
    <updated>2024-12-04T02:29:21.147Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="4a1bc5a33ffe5001bb3a05cca80634ef2f8eba44d69a957ed89899397222af85">25b0586e88080c215ada8d44e5d043f6d39deea8ccaee3be90d9686930fcfdecb7c19bd27028c1a1f881e855dc072a981f0dd0d71402a2f74ddf40f569788ce43b49b3eb07455ed802aaf34c0f7ae8f5f9c521a96d58a8168545f13f0c6db0d80a2724e80154228a72d0898d3ab262d7330a507642ed4e654672fecb827954b13b9b5991543e47d54dc05be2b26ed72906af0da2680e24a5d85d58e7652aaae33291a9df83228f46700bc5f946101cbfe5815eceb2b852902d451fc367a85fd1d875507da6184fc83d1ed4d5c6d6144264ba05a7c179de572eacf4550ff566ab8904842042a3a6da1a7f5eb763e92b55a2ce15e1199b780f05b8c902b00cd22cf859c93345509bee4a4bf0d4277acf07ee9252b8a0bcd8959c941ec41b4ddbd9b704b663d7507a992275a4601979e1e4fc26a7877959c3e518c5b803000cccf347b4a15e82533b1763b0cbac6ac631763518b5d48fd17525a2845bd0a0deb8114326422d64ed483db96b7ff0131ae9e1915cc4ed50e9b45b7a92ade8d2483386f706cd75d95cc380518403f605e46e7343fd40437091e64a32237b6048c38c6cbebd94eb2cdb8b22a3458d841cd47b5304746089d8a3ef9046e3bbeaaea808460d60a6b67ccfc657f45bad54d1b2b6a9393ff022dbf9ed345fdbab1a0d4f0af4353b68d41a7a0f43ac4cb569cddc1acf5b5eb0fc9f3b4e06addf543d566b39daec10cd3acbb67375b825c6f58316418d15b996924f9c836677c65e044674be4ba584049f854067ab928466e23828237dcedade246ce6b4cddf17f7a6a7497e4f7b853eacd313afda1eff841ebfa49fef7d71888e9e1292a7eed898cab47067fb97bc27a29c740b32142a1acd2c418bd2ac7f58cebc8b81a6a42aaa039ba09716e5160454557089fe5612eec2c452f9b3a6a08587293abc4f959b76835b52106d14a39162e24bbc72a7fc7f1b3fbf20724259c25052b5b9e520f233df7a8570a3aa1f39b0e8cb55dda97bb16ffd765af88aad0488cda5906ba94d546e51e10036b23b371b6f21de0bd28254a1b6dabfc27d4f79849ed7f81e8f75282c4139f1787fd9a8642f4fce774a438eda748c3e78a5e74b208360cd6da66a5f9a1e3ac2ccde7160ac8d09dbb6b77fab0c4e9cdb18e9fb28bc5b1a13cc6c507b64aa95d71d572b377039f9bcb917fb9d9bb4d3ad882e9438ea500d159550f04e093e6c2f666db3fe4287b4b0a35ce7a355666341499acf6f6d1957a3d7e8259b3cc03b480ca45792a8fa8329b78f78dcf234784d12ec0ce846e910a225bcedcd995216785b38dd92bef76d30438432885cbb030a4a02d904411413d80cce3474ab0a70be7f395d939590639f3f98303772a4c87282450d798ebfb3f172f0c349df04b3f478d98ba99e6ae000339a29edb02d465b234eacd65e0677331ce8c5e9d06ca27f0e3a364a26bdc6f0f779ae81640e503818d727820b42b71e35d8b54e012945bcbe643d7f25823cf0816e0f0cf22bbae80b11e87ae6a1e2cde3c66db326d4d5c083f039bdc2e17bad77caafc2a45e5f32ab90c95b33692a5ccbdd2120049245cdac8d8b274d2988ec7e5da49c96048869536951ccb4a4834555302edbaa29a3be1df527c6834c8eba7a861627da5464212730099dde8b3dc6843b4d9cd1d3c5fa8f864146bcfd006eaaec2be0ea2c06eade106bbfb058aa7f81f8415512824e967d45674b9bc4c65b382cd3447d26ce09fb53615222f09894e3b485b2287e2252bd6d4e6215edec33ab43269a9b424b1a9952fae433795e8bca720e8e1199b9c7f0f0cd80e94d5c7f5a55320998095f77421d6e6bdfa506116e23643a8e3ecb6f911fd9f4a098e392407d66bdfb297537669814693c28575d84e38a4deace0c200c8b7890af8d43dea351b87cfdfee3d1fc76f6cf6c44e8c5f578221fbdeccec007b08278b7115290ad99c670a2f16e35de80de83443a9a07e0e9ed98a9f311f9934798508ca2ca063ba0a0cb2a958b5089f0d3673440e52d94d4c0ccefc7dc15a83647ebddf6afde62ce7a25ba5c527a6978504c257987b3a9dfa2f81a2517637e437e9f999be630d750e068933f12ebc721dc172bb9bd70067fdf97206407e89506295f7d8217b8f3ecddbbba90acb9d5a2050ebee74ed5f5a2c6a66f5120aa86edc8337afba6f7649bdcaaaa57e683b9cc095fcfbb26efa51680dc9d7a75ba450067872f14c3a17317e0549dbbb0e963d2187e6addef78d0c77cbdabd0854f30857da1d1d9be4ba86eff703e5fe3ae166a710976a53e83922f3525e5412d49d394f56cef83114467e68ba8c5f7b7e5fb989349592f60ef8b2fa49c1b5fa8cde62ed38142ab1399df35ecda89362eb7488c5a8174c955605435652180ec988aa9c91fe80cd9c052fa722201f0e12d37da262cc1f845c8200dee4b88c5bf77d8a9bc6d46302be922435fc5fdc4adc2cc5287f27bff431b7ac39ea12a454dd3d51b1df6a76b9d94ce5754323e22e1702799f1a49f4fe836a914a0d931ac5109859b1a0e70a5029110ce1840570fc3212b324856e7c6d311bceadba5c092b0bf246e533f367802c36ba02d33dee4256aa11c24ac740cb60684981537a14fa3525338c5cc9338c5408929dea5acc0438805671fdc2b78294027a0003aabd038141a2eb21d163552f117f1e43de86d1d19ef1becb54682676b9f933594d63b1a66a5886983908ff96ed2d1be1e3d490a96cb428a502162394198fe3f6c02305cb904cdae77a6207fc37ddc9495f9f1a9d06bf6a775189f51c929e66f95e6b4b71acf8a73bbc531102c693b83f28fe6581fc89566eeff29f41be1a6203853e73ea2ae16af9dceadb3c56849fae35bd28b667c0fdd3ef77d2f6d4912da72be60029c03ed89258b77961d701a5e04e515e48dd974079d37df3f8a61be80beb0cb70b837c97d51960ac092c73f026a35f1feb347b9761a287806f646ee1ec287c76df764f25a2f0510c9105e1f576fdc30ade0bafe93defd55abb6d3d054328e8953937a150209743973bf315bf8933d2d8905c82a5b15fad77a40401e04341588e80f1d204d3faee41779d4a18732dfb6ef3b38dc9fbfe89a84788f5aefe38841af379175d7c80b2d5080fda3a4f17ec351d6731755c51a30e3323141531630c2ed3685da3bcd10568736c3ab3ba25576e2af4d11f58864936fd80f8414b63960ae04347398f07ba626a0d4db9d20757fa40652f0cd91daad204b294c5e760c67115f74e44523248b2039ab0b59daed82a2979f81a92902e42376d5b7d643b2a5faec8cce935f8947ed52e1ea561dc77580662328087143ffa713f98467b80e7efbfc8d110aec5d523122048e043063c2d5a715b6faacd1777460cd3f7e004f71a6d607ea96acb52c836fa9883582b19861b3967b12cdb97e689534b68d633c9c62267c55fde143052f3b5038e60ef5111416a6eed89af959f674bcfada4e48003137ddc5a2538cb6564aa216be3a97948ab131e57fe65070268f007cd556f9be709a9fc5881d36aaa347a96e319f779922c24fe9bdcb46d3e73bbd396ff352d122eaa603c004e75f8d5fb538a8a311a3429a5ce49b7f8e6c49909b8f3e9663499815df16bb5efbb9bce0389cab410642d7e348804e3ee36889a86d5557ec4bc84039b456dd0069464df37b54d5defee2a1e1b8fab8add402e83c5a7e0c3523a011c0622a87a92d9420d3262c37c6b71d409cd2202ad986ddcfdafcaf45ac571759ffcd4264278d8440179b37c31057828a3398010c50ffe666f19a04cb88153f92140b9c910307e2e2c8f0fd03768ee82e7abed3a3e72013685e01f6f8bcb56958eaf18abbb03a556f75f33612c339feff1540e8363bdac9ca778214d153aee9ec2c006082e600ee128e57b346036aa38bf9ef81abc9310faaa49f7692bf00bc683f516a208228af2809111eaa49b6c7ab4d18f6535acbf15b06c337cc9cea2be49b2ada1c7d33119bbf8c816a31269bfdb148da4f70fb87582982f197a09aec1a38ec448d2e234092a0d9f6b7778a135a082dfc4c8bc95f55b59dcffc05fe9e99c242c259b9d2067b925f9ad1c93f35fb485e933f6c8242bbf5cf7a0ff3c8f8d4cf494d6f8d1011e3ae0a8e6bb7cc3f0b5ccb0a1395ebb5a326a26b290fd7e22fa65adc85f31b3ca4c02bd93b43a3652e652fe5d4b032734ea29af0c468e21cfac05289cc03d622c13e426673d254d92d75a7c929e2cf7cff1dcf7a9c89249695d28ec52d1807d631c4f0ea3a6b18444e908a2542b104d0c113a609ead8b3a2cc719ce2c79211282e322a84e18925b1e9111995c529a4227f1f1cc9f4df97601cfcd561010f5284986f19b924f911875d095c61ff79b59c8ea74febfc6035b03a4e6c09dfdf6f30e44fd67641ebf27e5fbbd66dfd878ca34513a9bc55f6e053b46dc4bc0421ba524e943bb850f9cf040ef11551fd45905e23f040afc738fd02292386d209566aa10bcb984c024fa17302d867f3c8363c3608694d6986596bf4ecc51a4ae0c492770e706cf4ce4cbfe336074d9d51e42bb3f6d3f06f42fd74dec5accf1d24af86150d4a4f94f5aac0f44b05953ee5fc00f44bef9c0731a59b3c25a9d6a4da978bb07603e50fbd72ed7125ff61f576d5bda12f6d869fc145e66d279db13094736ef33c9ce703990aecb00a94e5718980f9088d805dea45e60e742c34b42f3f0d9608f8072b53ced552a6c6c17225152d8b1ebc55b382cfd4f87f4c4c9088004d639a22a67f0bd8384c9ea8ac74dd957502a0716e3dfdfa260083706c18840faf95853fd435b73491f0312aee22862c4b879c0180b41a3a2cefbfd715873f28d07573f785cf7b23c7dd50225339df1d4b6623409caf4db75a701675da7ffc85c2ad334809d9453a402596008812d13d7c54209c20db9d267f616f805de3394ea54c24f603efe282fd4a6c02f4bc6e5e14d4e966ad929626732addcbbb79e011e7991e427fec6082202a612973fc2bfdda6e81a148e1be07c760406d5a243d9af61ca9b0a3106ce7720345dbd8be13b12d4d61e46500c60765467dd87f8f0593b6f6547efdfde1a07123d1d92647f3acad936052ecfb324cf241b8f62097f2b6c3fd8b2a0f93c8d4ab4d4e4e8f09fe4bd6476bc58ff06f8823ce0f0ee565a8872b419a92197f7e0b344ce0c7799e32c0bae01bec33240da5011581490d87f9dcdc15dcaf02e13ee3957844c2438ce1b3f2b69a3eb7b0f1c47255c8ae7346f7275bc54441b72c229d9da3c9a240aefb7e28c8b30a1d496dfb8fc5fab469b3e8ba064d537a9feb5b273bf0a93373c27624db0b8ce49661a7c10303f5cbab4b9abc1aa1b057d4e0e2ae02c959f765a19a25d808fe1444f9cf95f00a7489339c37ba8c1a9089aead12c547bf4ed328e8db955e59bbf89ce608e2c8cd3efa544e7a7a0528be74eb1fb38ecd08d7610ef026513b89e259f41345384ac8e11836f96f27f2e70775ad60d9c4f1e34b527f59245b867f59df1e1de33a878f0ea4fea13caeae20057120744f6873c714d8f146e933dd9cfe17c4966a9a19221b5c1bf91b1dca1eee9cd4d6f4cae433dc95372f54d774c58922c8cebd2cb379b0ab91782cdaeea103e0b31a5a1369cbb84334c8ed70c25f74d2a03c65f56b7668fcaa4638442ffe9afe354f375b078908abd69b7f1bc05b7e58502e98dbf3326153fff467e75912b5a81c39a423459a77e920412a48cdd76ccc1d82fc6ed1a526cf6be25a18c5f6223aec3f3393223c4ff481f5dca3ee94500c1ecd07d538017ac6a6459d4acfc93b5d3990a1138a9b11ecf5662c98edbf01e8dc95cdf786c6ebeecf736d7fcc02ad3e91a6076a34dcd137770908e364ce38b0ad939cd5e9b4d5a9027467397a8cf38d32fadb0337b1f2e686906489b20e212fec85429e81ec538cb449f28f30e45b879cb22dca39731f33de3d3e5f18eeb1323b9a305dff7f424bb4ada751dde2517ddd347da53d73aec3b1d51ed6e773e9354f6e1cdd9104feac9999d9b68eed5ff1b77486540f60d42108baacf7c2a46d67363e2f2a15881d15a014e2b891d44c9e047a9c7a152b979addd1edeead08eeea2b8baffff54901a55126077a616842ae725852e088a8d85240f719da0f366854b73f5f0207661fff5e07957882f9d9adad4d1ba14818ca96f04bc4c7c8198206411c09cab76f7e90192a6cf5bedb5ac5d0c70710ee2d8913f9a2addad7f4e2d147d5727af4dc5de3213d51dddf61e86a6b1ab6a5dd6a657d5515c434aafb1268b90934a7a27ca27c2f160328e3a4ec9916f0aea761628cc108802c4558060cce8c1ddbd74a7e5b3da393bc918bdafe4c76b5fb6f71aa051e128e88af18c4909bb39227e809b0419d47b9ea00410836b185d53e330be13ec5cbe4753ec97fcda946222ce2bb64fb69c09c208a4cac83e1e20bef3b368c483722f930181f532bbb720290effe90f05875e5821147147049eef12f84b4494fb2741b9dd565cfb7feea55f2aafa09294ad083bc171939afdd1794fe8b3b17c6e99b4da3e6aea87a058f578623d9b491ec93f3abcc481db5e39de924a0f7893355296711cdc317b9af08b1a1b2a39c050dee5208e2cc1f3ad57ddefdd5dbd120b0069da1e3e68b71ae9d8d4d9f0bba5889fd1531e6874293007bd8e0b62707ae2f49b3d1a4075afb47d96c333bf80e077d6ca307f903e5e04693125c74c0dd99a58ca4839d6d62cd3ea1e3f994fc3f0b74cdfd25664539ddb3d1bac90f23432b70bf41f90be3a40d1fc8d006c6b6a60bbe9c832a7e01c676cedad5c55b1b9b5eb40245e25fe1103336f2d1ef11fc648e490137d56c64cf3b6bf69a97c30cbbf04add97ea975910e0953114260effb3a56726e42599d8cf7c681a8f5000f58bcc6aa956f3bfd41fc70f9c8e8ee17efc96cc667b8adc78388a13bb2548b79368ef9e48d7adbfe1b3012aa44936f4fbec7c94f50b245ec4ae3c7c08ecc2c6ed34544c06e98076002ccc44f789e72683b226f0be195a8fedc6e2f6ab2387fd418a437ac7d395d6cf9b67562d521793d5b3fa2d19155906fe084cfdf4bbc786c004242965ff5a72e447591910e9a308a26f503fa85698490a8df4107903bc0d0684306d0a5712ec34ea75fb9a6ad5917d0017db3c56d8b6cd9cb5b359bba1db8418e689aa19acf90ec5595134de6e3479cb6d89ab5ea26c8ea1357fc1a9f69d4765fb653b9f5a7ce0bbbb6ae90ac476c016dcf9c5d15aa054d381e3c601d73d3faed132a593a1087a3b64cafe575a8f294ed0b9af24c3a2c4bac581903a3ccf9fa84195671950a810c04d3c9e70877cead0a22ec2b5fa3e81fd984872d3f4adda02e55a823d8251244f1ed9cd1df37843215f879d481047c95bbb60472cde9c84ad5c51b5d574b9563917959ec534324acb55b68e9853ea2e08ecd27398e7a95e03bec2956d06a194bbe7e20e08dc83f41ede05c8a4d23af8d3c270b21dcbec1e614f42487feaf9336b0e54ba32a864c914486fff20823f8ee6f8c14752e8ac34b7c59ee80c9150e35a5057c5a87bbf1263033590dfacbb59cc258c4df5ffa21f0e972ad799aabd49d16f2dfaa92253fa9486476f00239ebe9f0f62ecc15049f6fb761d7f09562448da274e47f19fc1c2868e4735e43f0e188db0a868cd1eda130110de5f912c09986676049c19a34217006dee290073053fb0c7e2e38956b41ebe69c68822c5133d14ad79e35396c712de2a15c32fb3fdc39c591f710246b51cb108c34e83b03f08f75ff85f6b873f6de1558689acece301a4b6bc3795ac37782856cff515f960fe6365914c8e6417ae3ffcdcb2b147e04d2e153285a7fd775a4956603f3fbd8659ad593eb1425d29bcbe0df136e0157c3ac4228da2c26f5fb135dde2f1ccca7564812b6d5cd8b04b1b6573df92b995c2e03cad01f0f3c5434be843e0c58d26a83a7feec4b8100f8c28fc7e57e44b8e257031f3ace9bfd8700b491faa51c7cc9e3d33b2fc4c6d2d852fc6031534047458b6b9e95dde9d411b37f2e96a3d88a548e33383e5e26eb30784e96284d8daf61a36ed6ba82e117492fffafaa0034fb3a7cf552e96e7084d630af0cd39098219a1721effac24beebf4d89a4f86a9254fd0c80a36ccf8954562007eb74ac738ab407df921e02dc7a53373c21d7320ee912baccdd2f96931ec222d59f089bab0eed069d104a7035f6b33f1f6cbdf9a6cb5f4ed50813e434df2571b59894f4bbb5f83d2d7e162769d18a7285417ec3cc6ccd11c043f216441651a973446bb31c3cc64313431135ea4ddd741c3bf6548932f6ae58ea43bb5c46a0bd27872cff27d585610874c0d601b8dab26385049bf9b16bc7bd2f411bc1205a7fa0b226b57799cdddadb194269421cf6972d530b27e92db9b4cfdba718d0191f0b6daaf25723078a2f98cbe6a486efafb90b89d1a308ebdb1a0314388fdaede98d7335e79998108367835e2686feaa19e7be3c46abe581df46b6aa3d6eccc13805ebbc15deec5a80fadac69472a71cf3cf277528ef47e3528a2420c0357f802e2f37bbda5d85f6fa4d75d7dc6d0e15ab7a949d62c20f510c91e80256a1280d5ff4831c6aca789e8793e10b0de307e9bf40a12c18e030c8f9527c17454569bfaf5b988aba02b444f4781f57a954b1541910477dc64c7c3caa4f3abf03f3664170fe0c82d631f34d5869c827cd515f507727514f8626d4be0193110673f4e7db4216aef788050be249450ccbc4ccf3d33485eed9373731605c2c8ac0685527548a0307443a7e81e91029ec8a4e8bdc6aec7aaa367ada6193bf52940aca34105b967cadf924303674f3442bce561bc82bc9cbc9d590af2f781556fc71932fded99ebf7c131898dd9237dce7ef6921cee09e48bdb55592bd2111e4ef89323ed46d363eb896bdaab43835c94629d9daa83831bc0ff29936d0f0f79ad5da9dd9b84d4d156f0a57dce2968a94951974596bfe56821554fb88e970a7c5f49aa5958429922cadde1f3a204e4d726eda3309ce28207aa023f5e24c4150c224a58fb346d7bbe415ff3525d8f2865f104cac581ed9ab19a71a53db4d63534d9837dc01a56d952611fdbe29c6ad507d7823579d298c09661a6daa983e64b9d774c976bf39122237c877fa0f05ff6e683c346c1d15515e88cc7e0f5084b0a3fecee7054ec09920e39c82a0cd83934124528d65d686cf59e2dcc9fbb82d8d7befe06b4d85d855142abbd5aa95c2d8edb00d1fc37c1692226ba35588d1670d86633016e07c51014cae72f535c033790ae0c7a133098f6a02c759fdf70bfb1981a4d0e5f1f9c3727dc0687867ec75768bf879ef6b5dffec04309586a9bfef28e30ebfb1a665bf8edd67a9305ac55f732508d0036d5c8936e7161bbe79975df39c04456bba1e778c531f7ee6c1383fd95514f9638d8c887fdbb92021e0a3d9881cb16b693ed296b1576a1fd6487c955bf234dfcb3075793fc0f53701a60905f25b7fcf9192240cffbb85b12a99cc336c6414034bfd26f2c6358d1d60852961541f1fb5a915991c41c362ff3eb5ba07f51ca36c9f5580ce3dc68e900602ec2e8ef0a567a032b77cd1d64d0f1908467111633496e79b22089b1c1615d3ff8785b0f9c64ecea75e99b94fbb60912b13c612e41577fdbbeaa77f75a8454d9285d44d789911b8f607b96b77ff0000c8e3783f7d6e204b2a75561864272d803b7146b34b70ff7a981565c0362abb43947ef7e8d8d8410d71929389dbc55f6c9b614ad8cf0cd3889fbae7cfc8062137ed0ce69dff6c391f45978c116648cfc9be31a767caa2638ad8cd07b7ee02f0050c80545e3193de23207d42b9cc7cd01111ce9ed901b855296e3185a9aae8bdf44cb6a8f099d60f069f5cf46183d2b64a57e367a74a46fcaa875a1b2046286f1306d6ed07ec8a0cd871019bd31afddcfda3a12840749963e86ca1dd8f59e2ea757c77428629b29ed24f11dc73a6052612d152a554d6caba60be6316fafa261af1a6d08eec1a21a999c4835bf81baf06732e22ab348c0b322069bb0df91cef19a22f39083b55550bd80296ff608287d8874e7a4498a315dbcb0d0aebeeda3c87da68fc7f1ffe9760a5870776300aa6ab23d44cba2a634b6a2beb66390aab9c21c052b7d6eb9ac3ad05a63e91186747d9493c8c3197cb2b787c1175d5c50d30ab243717c01cad539ccd3daa35ab4f94f8e6b39f5736a52a165a28488c9656f6955c477e0024fba5173f3bb211499666831831fa83b6e5ec55621e51d75e20816ffea6361ceba765f1c708cdd9c86ab6baaad2f907f1f728a554542b3d07b892f1363385a7d79ac524608fc178d86bf71a9675fed3fa850cf2bd0b4abda845004ab4db57f02ba92c6a7159aacb39fd80e9040d7b17c37bee3e56e54645584dc5f1bc90781a8580f1124878de5b6415e175b0d47b795395fa41efb0dce2b52552f8c02be88d662d403f859819409af53b2fe5ce86c4fefedb359b4579ffdccd5620b7132564787f61b042da741de15765d5e25511fc90ddee7c21c3795b3c41fe33ff0beb9df404059c41f4a4c60e7008ac56e5330c40143bdc1cf7b8310fdbafe7905017e58d7c1d36077f961da147b900aaf798085357d9d8dece4e7dd1ed737dc3be5d8a46d4e798b5670fc1f2e6b25ec7f0e5d6ce500a631afe1e338b4a59e04b3b4d9c38bb4508997f68911ae459af1c8893ff2fe52dd858d83a3e61f1df0e2d6fd31d86fd15cdf6da75960f406efc0bb81228268d4c4b6b9cb4a945c6bb9e87df1e96b792ca855c9a5a297e6e2bd9a27ae0e4a188f4606c1ab46e6385198eb8905ff1962fb77c80dfa96cf7419c822100deccd3b4c69124ae91c7861efe87db7e254cf47ad1e39520c87fd6767fc8693ee9019a7ea7587089407b5eeca5eb06662637865b4cb7778830a390d28d6b5e0e5cb12cd8788e17f25db87a4cded78ae7fd434a1c2129199d703b31d19b53254157a2586b9c061eb9ccd25690a3ffcbef7fbdac1ba1c52c044f00675c373ffffd27d52e8eda21fe8f33d82e0b905dad45482c1d1c4b505c1c249457bac5fed822756dcc4b7d829d9abb288a2e6f8bbe380157b94cfc32d9797d72b2abe724055f2d0577a64a948efad7c4a09a6e5f649abec32663c1b2e6318518a01696684b659c977fb1fdde32b6afa2de7542d60625e8d42cc8b433bafddbcab081cae7a3ab32feeb7155c87415366735baae4634de10946ff7c38191494a81cf9f5990d591f3546ba3666bc2d129143ac404c8a07679f1a0cca90215246451d6cd4f996d60bc271caa99f1c0d113fc1b3809f5b60dc53363f05326ecb4f8f17d67982d5f54a84e8ac8fda331ee069d0f18af2406bb72dfd34b75b299524db221e215525372fb6b5755d2915e51e58a5cee1a76cf1e43136431845e9be86f57b7fbdf04b8aa83cd2994706b69519293e6f0df73bead9aa53d160fe51f04c43f356f996142eff46387c6d00f1cae10b48c2db8bc3de7f68db1e2f38baae3354d63b10a2cabe01b300cd4b79e78e1297f63708f55429aeea4fa59266221adb7b4504fd2ed6e396c2ef91dd91fe04e2fa3b057bcd78673da295db3dfa4a8ef8133a650280dbf2d3cddc11cd536f805817ca9b0d1cdf749c84b7182ec3c99730447f6993ce92f4f5cb2178b941700efab2c4e74abc5310b080dfd12aa7bc0bffcf635be11fcdbf4434a8be7da53abd83ac1456d9917e37dfd4ebaf9261116423f3400c541504eaad55edd6e8279d2a63a2266a034586c41f825fe8908bca74db893dc62f022fd176dca211d74fc3c3169f8380313762f5b0ff703bd4681fa183ad29d19fb8d3756c8dd0e309ccf4b3c9eacb4966adc5fca73e771f6e24bdd5a1fe7f4d8758785cf58d0f0d0340f19be2c3d430c4d5e307e855b07</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">您好, 这里需要密码, 你的生日哦.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">有东西被加密了, 请输入密码查看.</summary>
    
    
    
    <category term="作业" scheme="http://example.com/categories/%E4%BD%9C%E4%B8%9A/"/>
    
    
  </entry>
  
  <entry>
    <title>BGV全同态加密</title>
    <link href="http://example.com/2024/05/11/BGV%E5%85%A8%E5%90%8C%E6%80%81%E5%8A%A0%E5%AF%86/"/>
    <id>http://example.com/2024/05/11/BGV%E5%85%A8%E5%90%8C%E6%80%81%E5%8A%A0%E5%AF%86/</id>
    <published>2024-05-11T11:02:40.000Z</published>
    <updated>2024-05-11T11:54:20.649Z</updated>
    
    <content type="html"><![CDATA[<h1 id="BGV全同态加密"><a href="#BGV全同态加密" class="headerlink" title="BGV全同态加密"></a>BGV<strong>全同态加密</strong></h1><h2 id="方案描述"><a href="#方案描述" class="headerlink" title="方案描述"></a>方案描述</h2><ul><li><p><strong>KeyGen</strong>($\lambda$)：根据预设的加密方案的安全性，选择一个安全参数$\lambda$，安全参数的选择将影响密文模数$q$和密文多项式的最高次数$N$。在本文中，选择的参数满足128比特安全性。随机采样$s \leftarrow \mathcal{R}<em>2$，$a \leftarrow \mathcal{U}</em>{q_L}$和$e \leftarrow \mathcal{X}$。之后，计算私钥$sk &#x3D; s$和公钥$pk &#x3D; (pk_1,pk_2) &#x3D; ([-a \cdot s+te]_{q_L} , a)$。</p></li><li><p><strong>KeySwitchGen</strong>($sk$)：模交换能够让同态乘法的次数增加，而模交换需要依赖模交换密钥，首先随机采样多项式$a \leftarrow \mathcal{U}<em>{q_L}$和$e \leftarrow \mathcal{X}$。然后输出$ks &#x3D; (ks_1, ks_2) \equiv ([-a \cdot s + te + sk \cdot sk]</em>{q_L} , a)$作为模交换密钥。</p></li><li><p><strong>Enc</strong>($m,pk$)：给定输入消息$m \in \mathcal{P}$，首先选择三个随机多项式：$u \leftarrow \mathcal{R}<em>2$，$e_1 \leftarrow \mathcal{X}$和$e_2 \leftarrow \mathcal{X}$。然后加密器通过计算生成密文$c$：$c&#x3D;(c_1,c_2)\equiv([pk_1 \cdot u+te_1+m]</em>{q_L},[pk_2 \cdot u+te_2]_{q_L}) \in \mathcal{C}$。</p></li><li><p><strong>Dec</strong>($c,sk$)：解密一个密文$c$，需要在对应的模数链层次$l$执行以下步骤：$\mathrm{i)}$ 计算$m’ &#x3D; [c_1 + c_2 \cdot sk]_{q_l}$，以及$\mathrm{ii)}$ 输出解密后的明文$m &#x3D; m’ \pmod{t}$。</p></li></ul><h2 id="计算模拟"><a href="#计算模拟" class="headerlink" title="计算模拟"></a>计算模拟</h2><p>给出模拟代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">poly_mod_add</span>(<span class="hljs-params">poly1, poly2, mod</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;多项式模环加法&quot;&quot;&quot;</span><br>    <span class="hljs-comment"># 确保 poly1 是较长的那个多项式</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(poly2) &gt; <span class="hljs-built_in">len</span>(poly1):<br>        poly1, poly2 = poly2, poly1<br>    <span class="hljs-comment"># 将较短的多项式补零</span><br>    poly2 += [<span class="hljs-number">0</span>] * (<span class="hljs-built_in">len</span>(poly1) - <span class="hljs-built_in">len</span>(poly2))<br>    <span class="hljs-comment"># 对应系数相加并取模</span><br>    result = [(a + b) % mod <span class="hljs-keyword">for</span> a, b <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(poly1, poly2)]<br>    <span class="hljs-keyword">return</span> result<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">poly_mod_mult</span>(<span class="hljs-params">poly1, poly2, mod, N</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;多项式模环乘法&quot;&quot;&quot;</span><br>    <span class="hljs-comment"># 初始化结果多项式</span><br>    result = [<span class="hljs-number">0</span>] * (<span class="hljs-built_in">len</span>(poly1) + <span class="hljs-built_in">len</span>(poly2) - <span class="hljs-number">1</span>)<br>    <span class="hljs-comment"># 对每个系数进行乘法和加法</span><br>    <span class="hljs-keyword">for</span> i, a <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(poly1):<br>        <span class="hljs-keyword">for</span> j, b <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(poly2):<br>            result[i + j] += a * b<br>            result[i + j] %= mod<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):<br>        <span class="hljs-keyword">try</span>:<br>            result[i] = (result[i] - result[i+N]) % mod<br>        <span class="hljs-keyword">except</span>:<br>            <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">return</span> result[<span class="hljs-number">0</span>:N]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">poly_mult_number</span>(<span class="hljs-params">poly, num,mod</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(poly)):<br>        poly[i] = (poly[i] * num) %mod<br>    <span class="hljs-keyword">return</span> poly<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Gen_pk</span>(<span class="hljs-params">a,s,t,e,mod,N</span>):<br>    pk1 = poly_mod_mult(a,s,mod,N)<br>    pk1 = poly_mult_number(pk1,-<span class="hljs-number">1</span>,mod)<br>    pk1 = poly_mod_add(pk1,poly_mult_number(e,t,mod),mod)<br>    pk2 = a<br>    <span class="hljs-keyword">return</span> [pk1,pk2]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Enc</span>(<span class="hljs-params">pk,m,u,mod,N</span>):<br>    pk1 = pk[<span class="hljs-number">0</span>]<br>    pk2 = pk[<span class="hljs-number">1</span>]<br>    c1 = poly_mod_mult(pk1,u,mod,N)<br>    c1 = poly_mod_add(c1,m,mod)<br>    c1 = poly_mod_add(c1,poly_mult_number(e1,t,mod),mod)<br><br>    c2 = poly_mod_mult(pk2,u,mod,N)<br>    c2 = poly_mod_add(c2,poly_mult_number(e2,t,mod),mod)<br>    <span class="hljs-keyword">return</span> [c1,c2]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dec</span>(<span class="hljs-params">c,sk,mod,N,t</span>):<br>    temp = poly_mod_mult(c[<span class="hljs-number">1</span>],sk,mod,N)<br>    temp = poly_mod_add(c[<span class="hljs-number">0</span>],temp,mod)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(temp)):<br>        temp[i] = temp[i] % t<br>    <span class="hljs-keyword">return</span> temp<br><span class="hljs-comment"># 示例使用</span><br>m = [-<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]  <span class="hljs-comment"># 表示 2+x</span><br>a = [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>]     <span class="hljs-comment"># 表示 1+x</span><br>s = [<span class="hljs-number">1</span>]<br>e = [<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]<br>t = <span class="hljs-number">5</span><br>u = [<span class="hljs-number">0</span>,<span class="hljs-number">1</span>]<br>e1 = [<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]<br>e2 = [<span class="hljs-number">5</span>,<span class="hljs-number">6</span>]<br>mod = <span class="hljs-number">133</span>            <span class="hljs-comment"># 模数</span><br>N = <span class="hljs-number">2</span><br><br><span class="hljs-comment"># # 计算多项式模环加法</span><br><span class="hljs-comment"># add_result = poly_mod_add(poly1, poly2, mod)</span><br><span class="hljs-comment"># print(&quot;多项式加法结果:&quot;, add_result)</span><br><span class="hljs-comment"># 计算多项式模环乘法</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;原始明文:&quot;</span>,m)<br>pk = Gen_pk(a,s,t,e,mod,N)<br>sk = s<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;公钥pk1:&quot;</span>, pk[<span class="hljs-number">0</span>])<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;公钥pk2:&quot;</span>, pk[<span class="hljs-number">1</span>])<br>c = Enc(pk,m,u,mod,N)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;密文c1:&quot;</span>, c[<span class="hljs-number">0</span>])<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;密文c2:&quot;</span>, c[<span class="hljs-number">1</span>])<br>result = dec(c,sk,mod,N,t)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;解密后的多项式&quot;</span>,result)<br></code></pre></td></tr></table></figure><h3 id="加密模拟"><a href="#加密模拟" class="headerlink" title="加密模拟"></a>加密模拟</h3>]]></content>
    
    
    <summary type="html">最先进的全同态加密算法之一</summary>
    
    
    
    <category term="密码学" scheme="http://example.com/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/"/>
    
    
    <category term="BGV" scheme="http://example.com/tags/BGV/"/>
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://example.com/2023/05/17/%E5%B8%B8%E7%94%A8python%E5%87%BD%E6%95%B0/"/>
    <id>http://example.com/2023/05/17/%E5%B8%B8%E7%94%A8python%E5%87%BD%E6%95%B0/</id>
    <published>2023-05-17T08:32:23.949Z</published>
    <updated>2023-05-17T12:10:49.484Z</updated>
    
    <content type="html"><![CDATA[<h1 id="常用python函数"><a href="#常用python函数" class="headerlink" title="常用python函数"></a>常用python函数</h1><h2 id="sympy"><a href="#sympy" class="headerlink" title="sympy"></a>sympy</h2><ul><li>sympy.mod_inverse(a,p)：模p下的逆元</li><li>sympy.totient(37)：输出某个数的Euler函数</li><li>sympy.gcd_list([4,6])：求最大公因数</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;常用python函数&quot;&gt;&lt;a href=&quot;#常用python函数&quot; class=&quot;headerlink&quot; title=&quot;常用python函数&quot;&gt;&lt;/a&gt;常用python函数&lt;/h1&gt;&lt;h2 id=&quot;sympy&quot;&gt;&lt;a href=&quot;#sympy&quot; class=&quot;he</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://example.com/2023/03/28/%E8%8D%89%E7%A8%BF/"/>
    <id>http://example.com/2023/03/28/%E8%8D%89%E7%A8%BF/</id>
    <published>2023-03-28T01:59:40.542Z</published>
    <updated>2023-06-15T13:02:11.893Z</updated>
    
    <content type="html"><![CDATA[<h1 id="同态加密算法BGV的优化"><a href="#同态加密算法BGV的优化" class="headerlink" title="同态加密算法BGV的优化"></a>同态加密算法BGV的优化</h1><h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><h3 id="单位根与分圆多项式"><a href="#单位根与分圆多项式" class="headerlink" title="单位根与分圆多项式"></a>单位根与分圆多项式</h3><ul><li><p>有一个域$F$,元素$\omega \in F$如果满足$\omega^m \equiv 1$,那么w是m次单位根，如果找不到一个比$m$更小的数$m’$，使得$\omega^{m’} \equiv 1$是F中最小次数的根，那么$\omega$称为m次单位原根。</p></li><li><p>如果$\omega$是m次原单位根，那么有如下两条性质</p><ul><li>性质1：对于唯一的一个$j \in \mathbb{Z}_m$每一个m次单位根都能被写为$\omega^j$，这是因为$\omega^{jm} \equiv 1$，所以也是m次单位根。</li><li>性质2：对于唯一的一个$j \in \mathbb{Z}^*_m$，每一个m次单位原根都能被写为$\omega^j$。这是因为$\omega^j$是m次单位根，其次找不到比m还小的值使得$\omega^{jm} \equiv 1$成立（假设d|m，那么$\omega^{d} \neq 1$从而$\omega^{jd} \neq 1$，因为j和d互素，jd必不可能是m的倍数）。</li></ul></li><li><p>假设$\omega &#x3D; e^{2\pi i&#x2F;m}$是复数域的m次根，定义分圆多项式：<br>$$<br>\Phi_m(X):&#x3D;\prod\limits_{j\in\mathbb{Z}_m^*}(X-\omega^j)\in\mathbb{C}[X].<br>$$<br>有如下性质:</p><ul><li>分圆多项式有多项式次数$\phi(m)$，j的个数是与m互素的个数</li><li>$\Phi_m(X)\in\mathbb{Z}[X]$</li><li>分圆多项式在有理数域上不可约</li><li>$X^m-1&#x3D;\prod\limits_{d|m}\Phi_d(X)$以及他的变式$\Phi_m(X)&#x3D;\dfrac{X^m-1}{\prod\limits_{d\mid m}\Phi_d(X)}$。显然，如果m是个素数p，那么$\Phi_{p}(x)&#x3D;\frac{x^{p}-1}{x-1}&#x3D;\sum^{p-1}_{i&#x3D;0}{x^i}$</li></ul></li></ul><h3 id="规范嵌入和无穷范数"><a href="#规范嵌入和无穷范数" class="headerlink" title="规范嵌入和无穷范数"></a>规范嵌入和无穷范数</h3><p><strong>基本思想</strong>：定义$\mathcal{A}:&#x3D;\mathbb{Z}[X]&#x2F;(\Phi_m(X))$，$\omega$是一个m次单位原根，有一个多项式$a&#x3D;[f(X)\text{mod}\Phi_m(X)]\in\mathcal{A}$，我们可以清晰的定义$\boldsymbol{a}(\omega^j):&#x3D;f(\omega^j)$，而不用在乎$f(X)$的具体取值(因为模了一个分圆多项式)。</p><ul><li>规范嵌入：多项式$a\in\mathcal{A}$的规范嵌入是一个向量</li></ul><p>$$<br>\operatorname{cannon}(\boldsymbol a):&#x3D;\Big(\boldsymbol a(\omega^j)\Big)_{j\in\mathbb Z_m^*}.<br>$$</p><ul><li>无穷范数：使用常见的无穷范数作为多项式$a \in \mathcal{A}$的大小（size），取规范嵌入后向量元素的最大值即可</li></ul><p>$$<br>\quad|\boldsymbol a|:&#x3D;|\mathrm{cannon}(\boldsymbol a)|_\infty &#x3D; \max{|\boldsymbol a(\omega^j)|:j\in\mathbb Z^*_m},<br>$$</p><h3 id="编码——拉格朗日插值"><a href="#编码——拉格朗日插值" class="headerlink" title="编码——拉格朗日插值"></a>编码——拉格朗日插值</h3><blockquote><p><strong>目前的困境：</strong>BGV的明文为一个$N-1$次多项式m(x)，我们如何把$N$个数值$(a_0,a_1,\dots,a_{N-1})$编码进一个明文多项式$m_1(x)$，另外N个数值$(b_0,b_1,\dots,b_{N-1})$编码进多项式$m_2(x)$。使得当明文多项式做多项式乘法后$m(x) &#x3D; m_1(x)<em>m_2(x)$，解码$m(x)$得到的是对应数值的点乘形式$(a_0</em>b_0,a_1*b_1,\dots,a_{N-1}*b_{N-1})$</p></blockquote><p><strong>先介绍一下拉格朗日插值：</strong></p><p>假设我们有一些已知点 $(x_i, y_i)$，我们想要找到一个函数 $f(x)$，它在这些点上与 $y_i$ 相等，同时在这些点之间光滑连续。拉格朗日插值的想法是使用一个多项式来近似这个函数，多项式的系数可以通过在这些点上求解一系列的线性方程来获得。</p><p>下面是一个使用拉格朗日插值计算多项式的示例。假设我们有三个点 $(0, 1)$，$(1, 2)$ 和 $(2, 3)$。我们可以使用一个二次多项式来近似这些点，形式为 $f(x) &#x3D; a + bx + cx^2$。我们可以通过求解以下三个方程来确定多项式的系数：<br>$$<br>\begin{matrix}f(0)&#x3D;a+0b+0c&#x3D;1\ f(1)&#x3D;a+1b+1c&#x3D;2\ f(2)&#x3D;a+2b+4c&#x3D;3\end{matrix}<br>$$</p><p>通过求解这些方程，我们可以得到多项式的系数 $a &#x3D; 1$，$b &#x3D; 1$ 和 $c &#x3D; -\frac{1}{2}$。因此，我们的多项式为 $f(x) &#x3D; 1 + x - \frac{1}{2}x^2$。</p><p>现在，我们可以将上述思想扩展到任意数量的点。具体来说，我们要使用一个 $n-1$ 次多项式来拟合 $n$ 个已知点。设 $(x_i, y_i)$ 是这些已知点中的第 $i$ 个点，我们的多项式可以写成以下形式：<br>$$<br>f(x)&#x3D;\sum_{i&#x3D;1}^ny_iL_i(x)\quad\text{}<br>$$</p><p>其中 $L_i(x)$ 是拉格朗日基函数，定义为：<br>$$<br>L_i(x)&#x3D;\prod_{j&#x3D;1,j\neq i}^n\frac{x-x_j}{x_i-x_j}<br>$$</p><p>这个基函数的作用是将多项式 $f(x)$ 在 $x_i$ 处变为 $y_i$，同时在其他点处为零。因此，我们可以将多项式表示为所有基函数的线性组合。</p><p><strong>解决方案：</strong></p><p>假设多项式是在模$q$意义下进行的，我们预计算出一个$N$次原根$\omega$满足$\omega^N \equiv 1 \mod{q}$，我们选取N个点<br>$$<br>(\omega^0,a_0),(\omega^1,a_1),\dots,(\omega^{N-1},a_{N-1})<br>$$<br>使用拉格朗日插值确定一个多项式$m_1(x)$，同理对另外N个点<br>$$<br>(\omega^0,b_0),(\omega^1,b_1),\dots,(\omega^{N-1},b_{N-1})<br>$$<br>确定另一个多项式$m_2(x)$，这样多项式乘法$m(x) &#x3D; m_1(x)<em>m_2(x)$后，代入N个横坐标值$(\omega^0,\dots,\omega^{N-1})$之后得到的纵坐标即为对应位数的点乘$(a_0</em>b_0,a_1*b_1,\dots,a_{N-1}*b_{N-1})$</p><p><strong>注意：</strong></p><ul><li>为什么要选取$N$次原根$\omega$ ?因为有良好的性质，即$(\omega^0,\dots,\omega^{N-1})$在模q意义下每个数都各不相同（如果相同那么$\omega$不是$N$次原根）</li><li>如何找$N$次原根$\omega$ ?首先找到一个模q的原根g，然后使用快速幂运算去计算$g^{(q-1)&#x2F;N}$即可得到$\omega$</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;同态加密算法BGV的优化&quot;&gt;&lt;a href=&quot;#同态加密算法BGV的优化&quot; class=&quot;headerlink&quot; title=&quot;同态加密算法BGV的优化&quot;&gt;&lt;/a&gt;同态加密算法BGV的优化&lt;/h1&gt;&lt;h2 id=&quot;基础知识&quot;&gt;&lt;a href=&quot;#基础知识&quot; cla</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://example.com/2023/03/09/seal%E5%BA%93%E4%BD%BF%E7%94%A8/"/>
    <id>http://example.com/2023/03/09/seal%E5%BA%93%E4%BD%BF%E7%94%A8/</id>
    <published>2023-03-09T07:08:17.128Z</published>
    <updated>2023-03-09T07:54:21.174Z</updated>
    
    <content type="html"><![CDATA[<h1 id="seal库BGV同态加密解析"><a href="#seal库BGV同态加密解析" class="headerlink" title="seal库BGV同态加密解析"></a>seal库BGV同态加密解析</h1><h2 id="seal库参数设置"><a href="#seal库参数设置" class="headerlink" title="seal库参数设置"></a>seal库参数设置</h2><p>先看seal库源码</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">const</span> map&lt;<span class="hljs-type">size_t</span>, vector&lt;Modulus&gt;&gt; &amp;<span class="hljs-built_in">GetDefaultCoeffModulus128</span>()<br>            &#123;<br>                <span class="hljs-type">static</span> <span class="hljs-type">const</span> map&lt;<span class="hljs-type">size_t</span>, vector&lt;Modulus&gt;&gt; default_coeff_modulus_128&#123;<br>                    <span class="hljs-comment">/*</span><br><span class="hljs-comment">                    Polynomial modulus: 1x^1024 + 1</span><br><span class="hljs-comment">                    Modulus count: 1</span><br><span class="hljs-comment">                    Total bit count: 27</span><br><span class="hljs-comment">                    */</span><br>                    &#123; <span class="hljs-number">1024</span>, &#123; <span class="hljs-number">0x7e00001</span> &#125; &#125;,<br><br>                    <span class="hljs-comment">/*</span><br><span class="hljs-comment">                    Polynomial modulus: 1x^2048 + 1</span><br><span class="hljs-comment">                    Modulus count: 1</span><br><span class="hljs-comment">                    Total bit count: 54</span><br><span class="hljs-comment">                    */</span><br>                    &#123; <span class="hljs-number">2048</span>, &#123; <span class="hljs-number">0x3fffffff000001</span> &#125; &#125;,<br><br>                    <span class="hljs-comment">/*</span><br><span class="hljs-comment">                    Polynomial modulus: 1x^4096 + 1</span><br><span class="hljs-comment">                    Modulus count: 3</span><br><span class="hljs-comment">                    Total bit count: 109 = 2 * 36 + 37</span><br><span class="hljs-comment">                    */</span><br>                    &#123; <span class="hljs-number">4096</span>, &#123; <span class="hljs-number">0xffffee001</span>, <span class="hljs-number">0xffffc4001</span>, <span class="hljs-number">0x1ffffe0001</span> &#125; &#125;,<br><br>                    <span class="hljs-comment">/*</span><br><span class="hljs-comment">                    Polynomial modulus: 1x^8192 + 1</span><br><span class="hljs-comment">                    Modulus count: 5</span><br><span class="hljs-comment">                    Total bit count: 218 = 2 * 43 + 3 * 44</span><br><span class="hljs-comment">                    */</span><br>                    &#123; <span class="hljs-number">8192</span>, &#123; <span class="hljs-number">0x7fffffd8001</span>, <span class="hljs-number">0x7fffffc8001</span>, <span class="hljs-number">0xfffffffc001</span>,                               <span class="hljs-number">0xffffff6c001</span>, <span class="hljs-number">0xfffffebc001</span> &#125; &#125;,<br><br>                    <span class="hljs-comment">/*</span><br><span class="hljs-comment">                    Polynomial modulus: 1x^16384 + 1</span><br><span class="hljs-comment">                    Modulus count: 9</span><br><span class="hljs-comment">                    Total bit count: 438 = 3 * 48 + 6 * 49</span><br><span class="hljs-comment">                    */</span><br>                    &#123; <span class="hljs-number">16384</span>,<br>                      &#123; <span class="hljs-number">0xfffffffd8001</span>, <span class="hljs-number">0xfffffffa0001</span>, <span class="hljs-number">0xfffffff00001</span>, <span class="hljs-number">0x1fffffff68001</span>, <span class="hljs-number">0x1fffffff50001</span>,<br>                        <span class="hljs-number">0x1ffffffee8001</span>, <span class="hljs-number">0x1ffffffea0001</span>, <span class="hljs-number">0x1ffffffe88001</span>, <span class="hljs-number">0x1ffffffe48001</span> &#125; &#125;,<br><br>                    <span class="hljs-comment">/*</span><br><span class="hljs-comment">                    Polynomial modulus: 1x^32768 + 1</span><br><span class="hljs-comment">                    Modulus count: 16</span><br><span class="hljs-comment">                    Total bit count: 881 = 15 * 55 + 56</span><br><span class="hljs-comment">                    */</span><br>                    &#123; <span class="hljs-number">32768</span>,<br>                      &#123; <span class="hljs-number">0x7fffffffe90001</span>, <span class="hljs-number">0x7fffffffbf0001</span>, <span class="hljs-number">0x7fffffffbd0001</span>, <span class="hljs-number">0x7fffffffba0001</span>, <span class="hljs-number">0x7fffffffaa0001</span>,<br>                        <span class="hljs-number">0x7fffffffa50001</span>, <span class="hljs-number">0x7fffffff9f0001</span>, <span class="hljs-number">0x7fffffff7e0001</span>, <span class="hljs-number">0x7fffffff770001</span>, <span class="hljs-number">0x7fffffff380001</span>,<br>                        <span class="hljs-number">0x7fffffff330001</span>, <span class="hljs-number">0x7fffffff2d0001</span>, <span class="hljs-number">0x7fffffff170001</span>, <span class="hljs-number">0x7fffffff150001</span>, <span class="hljs-number">0x7ffffffef00001</span>,<br>                        <span class="hljs-number">0xfffffffff70001</span> &#125; &#125;<br>                &#125;;<br><br>                <span class="hljs-keyword">return</span> default_coeff_modulus_128;<br>            &#125;<br><br></code></pre></td></tr></table></figure><p>这是BGV的128bit安全性参数设置，随着模多项式的次数$n$不同，对应的密文模数的大小$log(q)$也有调整，具体的公式可以按照下面的方法计算：<br>$$<br>\lambda \approx -log(\cfrac{A*log(q)}{n})\cfrac{Bn}{logq} + C\sqrt{\cfrac{logq}{n}}log(\cfrac{n}{log(q)})<br>$$<br><img src="C:\Users\24546\AppData\Roaming\Typora\typora-user-images\image-20230309155417529.png" alt="image-20230309155417529"></p><h2 id="BGV噪声变化"><a href="#BGV噪声变化" class="headerlink" title="BGV噪声变化"></a>BGV噪声变化</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;seal库BGV同态加密解析&quot;&gt;&lt;a href=&quot;#seal库BGV同态加密解析&quot; class=&quot;headerlink&quot; title=&quot;seal库BGV同态加密解析&quot;&gt;&lt;/a&gt;seal库BGV同态加密解析&lt;/h1&gt;&lt;h2 id=&quot;seal库参数设置&quot;&gt;&lt;a hre</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>NTT的实现及其加速</title>
    <link href="http://example.com/2022/12/14/NTT%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8F%8A%E5%85%B6%E5%8A%A0%E9%80%9F/"/>
    <id>http://example.com/2022/12/14/NTT%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8F%8A%E5%85%B6%E5%8A%A0%E9%80%9F/</id>
    <published>2022-12-14T03:31:21.000Z</published>
    <updated>2023-04-20T08:08:33.106Z</updated>
    
    <content type="html"><![CDATA[<h1 id="NTT的实现及其加速"><a href="#NTT的实现及其加速" class="headerlink" title="NTT的实现及其加速"></a>NTT的实现及其加速</h1><h2 id="NTT快速数论变换原理"><a href="#NTT快速数论变换原理" class="headerlink" title="NTT快速数论变换原理"></a>NTT快速数论变换原理</h2><h3 id="多项式相乘的困难"><a href="#多项式相乘的困难" class="headerlink" title="多项式相乘的困难"></a>多项式相乘的困难</h3><p>假设有多项式A(x)，一共有n项,最高次项为$x^{n-1}$,设其系数为$a &#x3D; (a[0],a[1],\cdots,a[n-1])$，类似的假设另一个多项式B(x),设其系数为$b &#x3D; (b[0],b[1],\cdots,b[n-1])$，如果想要将两个多项式相乘，很明显一共要乘$n^2$次，能不能减少乘法的次数，使其复杂度比$O(n^2)$更少呢？</p><h3 id="基于FFT-快速傅里叶变换-的多项式相乘"><a href="#基于FFT-快速傅里叶变换-的多项式相乘" class="headerlink" title="基于FFT(快速傅里叶变换)的多项式相乘"></a>基于FFT(快速傅里叶变换)的多项式相乘</h3><p>把$x&#x3D;x_0$代入A(x)可以得到多项式在点x0处的值，类似的，我们代入n个这样的点$ (x_0,x_1,\cdots,x_{n-1})$,可以得到n个多项式取值$ (A(x_0),A(x_1),\cdots,A(x_{n-1}))$，可以证明，仅通过这n个多项式取值，我们可以还原出原本的多项式。</p><blockquote><p>证明：</p><p>假设还原出的多项式不唯一，分别设为f(x)和g(x)，这个两个多项式的最高次为n-1,否则还原失败</p><p>令h(x) &#x3D; f(x)-g(x) ，这个多项式的最高次至少为n-1</p><p>那么代入$ (x_0,x_1,\cdots,x_{n-1})$个点，h(x)均等于0，即这个多项式有n个解</p><p>而即使在复数域上n-1次方程也至多有n-1个解，矛盾</p><p>故只能还原出唯一的一个多项式</p></blockquote><p>类似的，代入多项式B(x)得到$ (B(x_0),B(x_1),\cdots,B(x_{n-1}))$，我们在进行下面的点乘操作得到<br>$$<br>(A(x_0)*B(x_0),A(x_1)*B(x_1),\cdots,A(x_{n-1})*B(x_{n-1}))<br>$$<br>这是一个n维向量，按照这个向量还原多项式，我们就可以得到两个多项式的乘积<br>$$<br>C(x) &#x3D; A(x)*B(X)<br>$$<br>注意这里的乘法为多项式乘法，这样多项式相乘就巧妙的转化为点乘，复杂度只有O(n)</p><p>但有个疑问，把点代入多项式计算不是也有计算量吗？这个算法快就是因为，我们可以设置点$ (x_0,x_1,\cdots,x_{n-1})$，这些点经过精心设置，可以在计算例如A(x0)的时候很快。</p><h3 id="基于CT蝴蝶变换的NTT算法"><a href="#基于CT蝴蝶变换的NTT算法" class="headerlink" title="基于CT蝴蝶变换的NTT算法"></a>基于CT蝴蝶变换的NTT算法</h3><p>注意这里的参数需要满足一些条件</p><ul><li><p>$q \equiv 1 \mod{2n}$</p></li><li><p>$n &#x3D; 2^k,k\in Z_+$</p></li><li><p>$\psi$为模数q的2N次单位根，即满足$\psi^{2n} \equiv 1 \mod{q}$</p></li><li><p>数组$\phi &#x3D; (1,\psi^1,\psi^2,\cdots,\psi^{n-1}) $</p></li><li><p>数组$\psi_{rev}$是把数组$\phi$按照bit-reversed顺序重新排列出来的，见下面的例子(多项式次数n &#x3D; 8)</p><blockquote><p>X(0) &#x3D; X(0,0,0) –&gt; X(0,0,0) &#x3D; X(0)</p><p>X(1) &#x3D; X(0,0,1) –&gt; X(1,0,0) &#x3D; X(4)</p><p>X(2) &#x3D; X(0,1,0) –&gt; X(0,1,0) &#x3D; X(2)</p><p>X(3) &#x3D; X(0,1,1) –&gt; X(1,1,0) &#x3D; X(6)</p><p>以此类推</p></blockquote></li></ul><p>下面是蝴蝶变换算法</p><p><img src="C:\Users\24546\AppData\Roaming\Typora\typora-user-images\image-20221215122722792.png" alt="image-20221215122722792"></p><h3 id="基于GS蝴蝶变换的NTT逆变换"><a href="#基于GS蝴蝶变换的NTT逆变换" class="headerlink" title="基于GS蝴蝶变换的NTT逆变换"></a>基于GS蝴蝶变换的NTT逆变换</h3><p><img src="C:\Users\24546\AppData\Roaming\Typora\typora-user-images\image-20221215122822035.png" alt="image-20221215122822035"></p><h3 id="NTT的一些性质"><a href="#NTT的一些性质" class="headerlink" title="NTT的一些性质"></a>NTT的一些性质</h3><p>假设”$\cdot $”代表多项式乘法，”$\circ $”代表分量乘法</p><ul><li>NTT(a) + NTT(b) &#x3D; NTT(a+b)</li><li>NTT(INTT(a)$\cdot$ INTT(b)) &#x3D; a $\circ $b</li><li></li></ul><h2 id="Barrett-Reduction-乘法取模加速"><a href="#Barrett-Reduction-乘法取模加速" class="headerlink" title="Barrett Reduction 乘法取模加速"></a>Barrett Reduction 乘法取模加速</h2><h3 id="参考博客"><a href="#参考博客" class="headerlink" title="参考博客"></a>参考博客</h3><ul><li><a href="https://blog.csdn.net/YKRY35/article/details/79179285">(37条消息) 大数取模运算Barrett reduction_YKRY35的博客-CSDN博客_大数取模</a></li><li><a href="https://www.luogu.com.cn/blog/Sweetlemon/barrett-reduction">Barrett Reduction 乘法取模加速 - Sweetlemon 的博客 - 洛谷博客 (luogu.com.cn)</a></li></ul><p>Barrett reduction是一种求模运算的优化方法，它可以将求模运算的时间复杂度从O(n)降低到O(log n)。</p><h3 id="原理简述"><a href="#原理简述" class="headerlink" title="原理简述"></a>原理简述</h3><p>一般来说，32位整数加法操作比乘法操作快得多，大概快3到8倍。而移位操作又比加法操作快10倍以上，核心思想就是把除法尽可能迁移到移位操作上。</p><p>我们（人工）计算取模，用的是<br>$$<br>r&#x3D; a\bmod p&#x3D;a-\left\lfloor \dfrac{a}{p} \right\rfloor *p<br>$$</p><p>这个计算中有除法，在计算机组成原理中，两个32bit的数相除需要32次移位和32次加减法操作，开销比较大。</p><p>而两个32bit的数相乘只需要32次移位操作。我们希望能用乘法替换除法，计算出<br>$$<br>q&#x3D;\left\lfloor \dfrac{a}{p} \right\rfloor<br>$$<br>我们可以钦定一个整数 k，再弄出一个整数 m，使得<br>$$<br>\dfrac{m}{2^k}\approx\dfrac{1}{p}<br>$$<br>那么 q不就约等于$ \dfrac{a\cdot m}{2^k}$了吗？这样除法运算就被拆成了一次乘法和k次位移，速度大大加快。</p><p>为了防止算出的商超过实际的商，我们一般取<br>$$<br>m&#x3D;\left\lfloor \dfrac{2^k}{p} \right\rfloor<br>$$<br>这里，我们取<br>$$<br>k\ge \lceil 2\log_2 p \rceil<br>$$<br>也就是使得$ 2^k\approx p^2$。下面我们证明，这样取 k时，$0\le a-pq&lt;p$，也就是我们稍后在计算余数$a-pq$ 时，得到的答案<del>至多需要再做一次减法</del> 不需要再调整。</p><blockquote><p>下面是这样设置参数的合理性证明，证明$0\le a-pq&lt;p$：</p><p>由于 $q&#x3D;\dfrac{am}{2^k}$</p><p>因此 $pq&#x3D;\dfrac{apm}{2^k}，a-pq&#x3D;\dfrac{a}{2^k}\cdot (2^k-pm)$</p><p>第一点，由于$2^k\approx p^2$，而a是模p意义下两个数的乘积，所以$a&lt;p^2$</p><p>于是有$0&lt;\dfrac{a}{2^k}&lt;1$</p><p>第二点，由于$m&#x3D;\left\lfloor \dfrac{2^k}{p} \right\rfloor$</p><p>所以有$\dfrac{2^k}{p}  -1 &lt; m\leq \dfrac{2^k}{p} $，进一步推出$0\leq(2^k-pm)&lt;p$</p><p>综上可以证明$0\le a-pq&lt;p$</p></blockquote><p>总结这个算法的流程如下：</p><ul><li>根据 p<em>p</em> 的规模选取合适的 k，一般要求 $k\ge \lceil 2\log_2 p \rceil$。</li><li>根据 k,p 预处理出 $m&#x3D;\left\lfloor \dfrac{2^k}{p} \right\rfloor$。</li><li>实际计算时，用 $q&#x3D;\dfrac{a\cdot m}{2^k}$计算出商，再用$ r&#x3D;a-pq$ 得出余数</li></ul><h3 id="c-例子"><a href="#c-例子" class="headerlink" title="c++例子"></a>c++例子</h3><p>下面是一个例子：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">RingMultiplier::mulModBarrett</span><span class="hljs-params">(<span class="hljs-type">uint64_t</span>&amp; r, <span class="hljs-type">uint64_t</span> a, <span class="hljs-type">uint64_t</span> b, <span class="hljs-type">uint64_t</span> p, <span class="hljs-type">uint64_t</span> pr)</span> </span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">unsigned</span> __int128 mul = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">unsigned</span> __int128&gt;(a) * b;<br><span class="hljs-type">uint64_t</span> abot = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">uint64_t</span>&gt;(mul);<span class="hljs-comment">//只会返回a*b的低64位</span><br><span class="hljs-type">uint64_t</span> atop = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">uint64_t</span>&gt;(mul &gt;&gt; <span class="hljs-number">64</span>);<span class="hljs-comment">//得到a*b的高64位</span><br><span class="hljs-type">unsigned</span> __int128 tmp = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">unsigned</span> __int128&gt;(abot) * pr;<br>tmp &gt;&gt;= <span class="hljs-number">64</span>;<br>tmp += <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">unsigned</span> __int128&gt;(atop) * pr;<br>tmp &gt;&gt;= kbar2 - <span class="hljs-number">64</span>;<br>tmp *= p;<br>tmp = mul - tmp;<br>r = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">uint64_t</span>&gt;(tmp);<br><span class="hljs-keyword">if</span>(r &gt;= p) r -= p;<br>&#125;<br></code></pre></td></tr></table></figure><p>这个函数主要用来计算r&#x3D;(a*b) mod p的结果，采用Barrett乘法算法，其中$pr&#x3D;2^{kbar2} &#x2F; p$，kbar2是一个预设的常量，模数p的大约满足$log_2p &#x3D; 60$，所以这里的kbar2 &#x3D; 120,于是有$pr \approx p$。</p><p>算法原理：<br>$$<br>r &#x3D; mul - \left\lfloor \dfrac{mul}{p}\right\rfloor<em>p \<br>&#x3D;mul - mul</em>\dfrac{pr}{2^k}<em>p \quad where \quad r&#x3D;2^k \quad and \quad pr &#x3D; \dfrac{2^k}{p}\<br>这里把mul</em>pr&#x2F;2^k变成如下操作,其中abot存放mul的低64位，atop存放高64位\<br>[(abot<em>pr)&gt;&gt;64+atop</em>pr]&gt;&gt;(kbar2-64) \<br>&#x3D;[(abot<em>pr)+atop</em>pr*2^{64}]&#x2F;(2^{kbar2})\<br>这样可以完成barrett的快速求余操作<br>$$<br>算法步骤：</p><ul><li>1）先把a*b的结果存到mul变量中，abot存放mul的低64位，atop存放高64位； </li><li>2）然后把abot乘以预设的pr，得到tmp，并右移64位；</li><li>3）再把atop乘以pr，再加到tmp上；</li><li>4）把tmp右移kbar2-64位，再乘以p；</li><li>5）最后求出mul-tmp，得到r； </li><li>6）最后判断r是否大于p，如果大于，则减去p，得到最终结果。</li></ul>]]></content>
    
    
    <summary type="html">难道需要我等你一辈子嘛？</summary>
    
    
    
    <category term="密码学" scheme="http://example.com/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/"/>
    
    
    <category term="NTT" scheme="http://example.com/tags/NTT/"/>
    
  </entry>
  
  <entry>
    <title>sm2椭圆曲线公钥密码算法</title>
    <link href="http://example.com/2022/12/05/sm2%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF%E5%85%AC%E9%92%A5%E5%AF%86%E7%A0%81%E7%AE%97%E6%B3%95/"/>
    <id>http://example.com/2022/12/05/sm2%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF%E5%85%AC%E9%92%A5%E5%AF%86%E7%A0%81%E7%AE%97%E6%B3%95/</id>
    <published>2022-12-05T04:39:52.000Z</published>
    <updated>2023-05-17T15:31:52.010Z</updated>
    
    <content type="html"><![CDATA[<h1 id="sm2椭圆曲线公钥密码算法"><a href="#sm2椭圆曲线公钥密码算法" class="headerlink" title="sm2椭圆曲线公钥密码算法"></a>sm2椭圆曲线公钥密码算法</h1><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><h3 id="国密算法介绍"><a href="#国密算法介绍" class="headerlink" title="国密算法介绍"></a>国密算法介绍</h3><p>国密即国家密码局认定的国产密码算法。主要有SM1，SM2，SM3，SM4。<a href="https://so.csdn.net/so/search?q=%E5%AF%86%E9%92%A5&spm=1001.2101.3001.7020">密钥</a>长度和分组长度均为128位。</p><ul><li><p>SM1 为对称加密。其加密强度与AES相当。该算法不公开，调用该算法时，需要通过加密芯片的接口进行调用。</p></li><li><p>SM2为非对称加密，基于ECC。该算法已公开。由于该算法基于ECC，故其签名速度与秘钥生成速度都快于RSA。ECC 256位（SM2采用的就是ECC 256位的一种）安全强度比RSA 2048位高，但运算速度快于RSA。</p></li><li><p>SM3 消息摘要。可以用MD5作为对比理解。该算法已公开。校验结果为256位。</p></li><li><p>SM4 无线局域网标准的分组数据算法。对称加密，密钥长度和分组长度均为128位。</p></li></ul><p>由于SM1、SM4加解密的分组大小为128bit，故对消息进行加解密时，若消息长度过长，需要进行分组，要消息长度不足，则要进行填充。</p><h3 id="SM2算法简介"><a href="#SM2算法简介" class="headerlink" title="SM2算法简介"></a>SM2算法简介</h3><p>SM2椭圆曲线公钥密码算法是我国自主设计的公钥密码算法，包括SM2-1椭圆曲线数字签名算法，SM2-2椭圆曲线密钥交换协议，SM2-3椭圆曲线公钥加密算法，分别用于实现数字签名密钥协商和数据加密等功能。SM2算法与RSA算法不同的是，SM2算法是基于椭圆曲线上点群离散对数难题，相对于RSA算法，256位的SM2密码强度已经比2048位的RSA密码强度要高。</p><p>sm2主要满足电子认证服务系统等应用需求。</p><h2 id="椭圆曲线介绍"><a href="#椭圆曲线介绍" class="headerlink" title="椭圆曲线介绍"></a>椭圆曲线介绍</h2><ul><li><a href="https://link.springer.com/content/pdf/10.1007/978-1-4939-1711-2.pdf">参考书籍</a></li></ul><h3 id="基本数学形式"><a href="#基本数学形式" class="headerlink" title="基本数学形式"></a>基本数学形式</h3><p>椭圆曲线是下面方程的一组解：<br>$$<br>Y^2 &#x3D; X^3 + AX + B<br>$$<br>这种类型的方程也被称为魏尔斯特拉斯方程，得名于19世纪对其进行广泛研究的数学家。下面给两个曲线的实例并画给出图片：<br>$$<br>E1 : Y^2 &#x3D; X^3 − 3X + 3 ;and; E2 : Y ^2 &#x3D; X^3 − 6X + 5<br>$$</p><img src="/2022/12/05/sm2%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF%E5%85%AC%E9%92%A5%E5%AF%86%E7%A0%81%E7%AE%97%E6%B3%95/%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF%E6%A0%B7%E4%BE%8B.png" class="椭圆曲线图"><p><img src="C:\Users\24546\AppData\Roaming\Typora\typora-user-images\image-20221205130657777.png" alt="1"></p><h3 id="实数域上椭圆曲线"><a href="#实数域上椭圆曲线" class="headerlink" title="实数域上椭圆曲线"></a>实数域上椭圆曲线</h3><h4 id="加法运算"><a href="#加法运算" class="headerlink" title="加法运算"></a>加法运算</h4><p>令E为如下椭圆曲线：<br>$$<br>Y ^2 &#x3D; X^3 − 15X + 18.<br>$$<br>点P &#x3D; (7, 16) 和 Q &#x3D; (1, 2)为椭圆曲线上的两点，并构成直线L:<br>$$<br>L : Y &#x3D; \frac{7}{3}X − 1&#x2F;3.<br>$$<br>如下图所示，直线L和椭圆曲线E交于三个点P,Q,R</p><img src="/2022/12/05/sm2%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF%E5%85%AC%E9%92%A5%E5%AF%86%E7%A0%81%E7%AE%97%E6%B3%95/%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF%E4%BA%A4%E7%82%B9%E5%9B%BE.png" class="椭圆曲线交点图"><p><img src="C:\Users\24546\AppData\Roaming\Typora\typora-user-images\image-20221205131119418.png" alt="image-20221205131119418"></p><p>点R关于x轴对称得到R’,我们定义椭圆曲线d上的加法运算,<br>$$<br>P \oplus Q &#x3D; R’,<br>$$<br>和我们通常理解的加法不同，这里的加法是在曲线上进行的，也就是说给出两个点，相加一定可以得到椭圆曲线上的第三个点R’，这个点就是加法的结果。</p><h4 id="加法运算瓶颈——无穷远点O"><a href="#加法运算瓶颈——无穷远点O" class="headerlink" title="加法运算瓶颈——无穷远点O"></a>加法运算瓶颈——无穷远点O</h4><p>还是按照上面的图片，我们尝试做这样的加法<br>$$<br>R \oplus R’&#x3D;?<br>$$<br>按照上一节的加法运算，直线RR‘应该和椭圆曲线交于三个点，但是这里没有第三个点，这时候该怎么办？数学家定义了一个无穷远点$O$,并假设点$O$也在椭圆曲线上，这样RR’就能交于椭圆曲线的点$O$了,于是有<br>$$<br>R \oplus R’&#x3D;O.<br>$$<br>基于无穷远点有这样的性质</p><ul><li>无穷远点$O$和椭圆曲线上任意点P的连线一定是垂直于x轴的</li></ul><p>结合之前的加法运算，于是有公式：<br>$$<br>P \oplus O &#x3D; P<br>$$<br><font color='red'>这是不是很类似于一个零点，任何点加这个点都是其本身</font></p><p>除此之外，基于无穷远点还有如下性质<br>$$<br>P + O &#x3D; O + P &#x3D; P ; for ;all; P ∈ E\<br>P + (−P) &#x3D; O ; for ;all; P ∈ E\<br>(P + Q) + R &#x3D; P + (Q + R) ; for ;all;P, Q, R ∈ E\<br>P + Q &#x3D; Q + P  ; for ;all; P, Q ∈ E<br>$$<br>四条公式分别代表Albel群(交换群)的4条性质：存在零元，存在逆元，结合律，交换律</p><h4 id="加法运算公式"><a href="#加法运算公式" class="headerlink" title="加法运算公式"></a>加法运算公式</h4><p>这里给一张图片，很好的讲述了加法的运算公式</p><p><img src="C:\Users\24546\AppData\Roaming\Typora\typora-user-images\image-20221205132805302.png" alt="1"></p><img src="/2022/12/05/sm2%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF%E5%85%AC%E9%92%A5%E5%AF%86%E7%A0%81%E7%AE%97%E6%B3%95/%E5%8A%A0%E6%B3%95%E8%BF%90%E7%AE%97%E6%B3%95%E5%88%99.png" class="加法运算法则"><h4 id="减法运算公式"><a href="#减法运算公式" class="headerlink" title="减法运算公式"></a>减法运算公式</h4><p>定义负数元的概念：如果椭圆曲线上的一个点P&#x3D;(a,b)，那么点P的负数元为$\ominus P &#x3D; (a,-b)$</p><p>这样定义有很好的性质：</p><blockquote><ul><li>$P\ominus P &#x3D; O$</li></ul></blockquote><p>相当于实数域加减法的相反数的概念。</p><h3 id="有限域上椭圆曲线"><a href="#有限域上椭圆曲线" class="headerlink" title="有限域上椭圆曲线"></a>有限域上椭圆曲线</h3><h4 id="有限域上椭圆曲线定义"><a href="#有限域上椭圆曲线定义" class="headerlink" title="有限域上椭圆曲线定义"></a>有限域上椭圆曲线定义</h4><p>从上一节的介绍上可以看到，椭圆曲线上的加法运算构成一个群，所有的点可以是小数，也可以整数。那我们能不能加以限制，令椭圆曲线上的点全部都集中在某个域中呢？</p><p>**定义1.**令$p$是一个奇素数，在有限域$\mathbb{F}_p$上的椭圆曲线有如下形式,<br>$$<br>E : Y ^2 &#x3D; X^3 + AX + B ;with; A, B \in \mathbb{F}_p ;satisfying; 4A^3 + 27B^2 \neq 0<br>$$<br>这里$4A^3 + 27B^2 \neq 0$是保证椭圆曲线上没有奇异点。</p><p>则定义在有限域上的椭圆曲线坐标是集合.<br>$$<br>E(\mathbb{F}_p) &#x3D; {(x, y) | x, y \in \mathbb{F}_p ; satisfying ; y^2 &#x3D; x^3 + Ax + B}∪ {O}<br>$$</p><blockquote><p>一个例子,考虑下面的椭圆曲线：<br>$$<br>E(\mathbb{F}<em>{13}) : Y ^2 &#x3D; X^3 + 3X + 8 ;over ;the ;field ;\mathbb{F}</em>{13}<br>$$<br>我们取X&#x3D;0,得到$Y^2&#x3D;8\pmod{13}$，但我们解不出这个Y，因为方程无解</p><p>我们再取X &#x3D; 1,得到$Y^2&#x3D;12\pmod{13}$，解出两个解Y&#x3D;5或者Y&#x3D;8，那么得到在$E(\mathbb{F}_{13})$有两个点(1,5)和(1,8)</p><p>X遍历有限域$\mathbb{F}<em>{13}$,我们可以用类似的方法得到下面所有点<br>$$<br>E(\mathbb{F}</em>{13}) &#x3D; {O,(1, 5),(1, 8),(2, 3),(2, 10),(9, 6),(9, 7),(12, 2),(12, 11)}<br>$$</p></blockquote><h4 id="有限域上椭圆曲线运算"><a href="#有限域上椭圆曲线运算" class="headerlink" title="有限域上椭圆曲线运算"></a>有限域上椭圆曲线运算</h4><p>类似与实数域上的加法运算，有限域上椭圆曲线的运算，除法用模逆运算代替，所有运算均在有限域上进行（算完之后要模一个p）。这里还是举个例子</p><blockquote><p>椭圆曲线：<br>$$<br>E(\mathbb{F}_p) &#x3D; {(x, y) | x, y \in \mathbb{F}_p ; satisfying ; y^2 &#x3D; x^3 + Ax + B}∪ {O}<br>$$<br>计算P&#x3D;(9,7)和Q&#x3D;(1,8)的和<br>$$<br>λ &#x3D; (y_2 − y_1)&#x2F;(x_2 − x_1)<br>  &#x3D; (8 − 7)&#x2F;(1 − 9) &#x3D; 1&#x2F;(-8) &#x3D; 1&#x2F;5 &#x3D; 5^{-1} \mod 13 &#x3D;8\</p><p> x_3 &#x3D; λ^2 − x_1 − x_2 &#x3D; 64 − 9 − 1 &#x3D; 54 &#x3D; 2\<br> y_3 &#x3D; λ(x_1-x_3)-y_1 &#x3D; 8*(9-2) - 7 &#x3D; 49 \mod{13}&#x3D; 10<br>$$<br>最终得到P+Q&#x3D;(2,10)</p></blockquote><h3 id="椭圆曲线的一些名词"><a href="#椭圆曲线的一些名词" class="headerlink" title="椭圆曲线的一些名词"></a>椭圆曲线的一些名词</h3><h4 id="椭圆曲线的阶"><a href="#椭圆曲线的阶" class="headerlink" title="椭圆曲线的阶"></a>椭圆曲线的阶</h4><p>我们之前说到每个在有限域上的椭圆曲线都由有限个点组成。那么我们不禁要问：到底是多少个点？</p><p>首先，我们要定义一下 在一个群有多少个点就叫做这个群的“阶”（order）【在此放上wiki<a href="https://link.zhihu.com/?target=https://en.wikipedia.org/wiki/Order_(group_theory)">关于order的解释</a>】。</p><blockquote><p>椭圆曲线$E(\mathbb{F}<em>{13}) : Y ^2 &#x3D; X^3 + 3X + 8 ;over ;the ;field ;\mathbb{F}</em>{13}$的阶为9，因为总共有9个点</p></blockquote><h4 id="椭圆曲线的基点"><a href="#椭圆曲线的基点" class="headerlink" title="椭圆曲线的基点"></a>椭圆曲线的基点</h4><p>先介绍一下循环子群的概率，方便我们之后基点的讨论</p><h5 id="数乘和循环子群"><a href="#数乘和循环子群" class="headerlink" title="数乘和循环子群"></a><strong>数乘和循环子群</strong></h5><p>在实数域乘法的定义是：<br>$$<br>nP&#x3D;\underbrace{P+P+⋯+P}_{n个p}<br>$$<br>使用倍加运算可以实现，其时间复杂度我们之后再讨论</p><blockquote><p>举个例子：</p><p>已知椭圆曲线<br>$$<br>E(\mathbb{F}_p) &#x3D; {(x, y) | x, y \in \mathbb{F}_p ; satisfying ; y^2 &#x3D; x^3 + 3x + 8}∪ {O}<br>$$<br>取其上一点P(9,7)，其倍点运算为：</p><ul><li><p>P &#x3D; (9,7)</p></li><li><p>2P &#x3D; (9,6)</p></li><li><p>3P &#x3D; (1,12)</p></li><li><p>4P &#x3D; (9,7)</p></li></ul></blockquote><p>可以看出，点P运算4次还是点P，这就是循环子群的概念，可以看出点P的运算结果可以构成一个有限的集合，这种群算方式可以看成群的运算，从而构成循环子群。</p><h5 id="基点的概念"><a href="#基点的概念" class="headerlink" title="基点的概念"></a>基点的概念</h5><p>可以看出基点就是椭圆曲线上的一个点，基点有一个阶n，点加运算n次即可得到再次得到基点。</p><h5 id="基点的生成"><a href="#基点的生成" class="headerlink" title="基点的生成"></a>基点的生成</h5><p>基点可以构成一个循环子群，sm2椭圆加密就是在这个子群上进行运算。</p><p>假设椭圆曲线的阶为N，对于椭圆曲线上的每一个点，我们都有$NP &#x3D; O$，同时基点G（其阶为n）也能构成一个元素个数的为n的子群，由群论的拉格朗日定理，一定有$n|N$，我们设置一个辅因子$h &#x3D; N&#x2F;n$，随机取椭圆曲线上的一点，可以看出点hP循环n次就是无穷远点，如果n为素数，那么点hp生成的子群阶就是n<br>$$<br>n<em>h</em>p &#x3D; O<br>$$<br>通过下面的运算步骤，我们可以寻找到阶为n的椭圆曲线下的子群。</p><blockquote><ul><li>计算椭圆曲线的阶 N 。</li><li>选择一个阶为 n 的子群。n必须是素数且必须是 N 的因子。</li><li>计算辅因子 h&#x3D;N&#x2F;n 。</li><li>在曲线上选择一个随机的点 P 。</li><li>计算 G&#x3D;hP 。</li><li>如果 G 是0，那么回到步骤4。否则我们就已经找到了阶为 n 和辅因子是 h 的子群的基点。</li></ul></blockquote><h2 id="sm2国密算法流程介绍"><a href="#sm2国密算法流程介绍" class="headerlink" title="sm2国密算法流程介绍"></a>sm2国密算法流程介绍</h2><p>最详尽的算法流程步骤请参见这个pdf：<a href="https://oscca.gov.cn/sca/xxgk/2010-12/17/1002386/files/b791a9f908bb4803875ab6aeeb7b4e03.pdf">sm2技术文档</a>，本人在这里仅仅简单介绍一下流程和步骤，并讲解其中原理。其中流程中的一些符号不给予解释，文档里都有。</p><h3 id="加密算法"><a href="#加密算法" class="headerlink" title="加密算法"></a>加密算法</h3><ul><li>A1：用随机数发生器产生随机数k∈[1,n-1]； </li><li>A2：计算椭圆曲线点C1&#x3D;[k]G&#x3D;(x1,y1)，按本文本第1部分4.2.8和4.2.4给出的细节，将C1的数据类 型转换为比特串； </li><li>A3：计算椭圆曲线点S&#x3D;[h]PB，若S是无穷远点，则报错并退出； </li><li>A4：计算椭圆曲线点[k]PB&#x3D;(x2,y2)，将坐标x2、y2 的 数据类型转换为比特串； </li><li>A5：计算t&#x3D;KDF(x2 ∥ y2, klen)，若t为全0比特串，则返回A1； </li><li>A6：计算C2 &#x3D; M ⊕ t； </li><li>A7：计算C3 &#x3D; Hash(x2 ∥ M ∥ y2)； </li><li>A8：输出密文C &#x3D; C1 ∥ C2 ∥ C3。</li></ul><p>其中KDF为密钥派生函数，函数原型为KDF(z,klen)可以根据比特串z，和长度klen，从而输出一个长度为klen的比特串。</p><p>下面给一个流程图</p><p><img src="C:\Users\24546\AppData\Roaming\Typora\typora-user-images\image-20221210202636498.png" alt="image-20221210202636498"></p><h3 id="加密算法原理的一些理解"><a href="#加密算法原理的一些理解" class="headerlink" title="加密算法原理的一些理解"></a>加密算法原理的一些理解</h3><ul><li><p>为什么随机数k范围是[1,n-1]，因为如果k&#x3D;n，那么[k]G &#x3D; O，这样的点G是无法用坐标表示出来的，也无法参加后面的运算</p></li><li><p>真正的密文在C2里，想要获取C2，必须用密钥派生函数KDF得到比特串t的值，而想要得到t的值，又必须计算$[k]P_B$，但是k是随机生成的，想要准确的获取k有两种方法。一种是从$[1,n-1]$遍历，要知道这样的遍历需要计算$n*(n-1)&#x2F;2$次加法运算，n一般是个很大的数（数量级为$10^{78}$），这种计算量算到宇宙毁灭也算不出来。另一种是解方程$[x]G&#x3D;(x_1,y_1)$，这就回到椭圆曲线上的困难问题<a href="https://baike.baidu.com/item/ECDLP/3324859">ECDLP</a>，所以想要解密是十分的困难。</p></li><li><p>C2的长度为klen，即和密文的长度想当</p></li><li><p>C3是哈希函数，更多的是为验证接受到的密文是否出现改动</p></li></ul><h3 id="解密算法"><a href="#解密算法" class="headerlink" title="解密算法"></a>解密算法</h3><p>设klen为密文中C2的比特长度。 为了对密文C&#x3D;C1 ∥ C2 ∥ C3 进行解密，作为解密者的用户B应实现以下运算步骤： </p><ul><li>B1：从C中取出比特串C1，将C1的数据类型转换为椭圆曲线上的点，验证C1是否满足椭圆曲线方程，若不满足则报错并退出； </li><li>B2：计算椭圆曲线点S&#x3D;[h]C1，若S是无穷远点，则报错并退出； </li><li>B3：计算[dB]C1&#x3D;(x2,y2)，将坐标x2、y2的数据类型转 换为比特串； </li><li>B4：计算t&#x3D;KDF(x2 ∥ y2, klen)，若t为全0比特串，则报错并退出； </li><li>B5：从C中取出比特串C2，计算M′ &#x3D; C2 ⊕ t； </li><li>B6：计算u &#x3D; Hash(x2 ∥ M′ ∥ y2)，从C中取出比特串C3，若$u \neq C3$则报错并退出；</li><li>B7：输出明文M′。</li></ul><p>还是给出一个流程图</p><p><img src="C:\Users\24546\AppData\Roaming\Typora\typora-user-images\image-20221210204747217.png" alt="image-20221210204747217"></p><h3 id="解密算法的一些理解"><a href="#解密算法的一些理解" class="headerlink" title="解密算法的一些理解"></a>解密算法的一些理解</h3><ul><li>为什么计算$[d_B]C_1&#x3D;[d_B*k]G$即可得到加密流程中的(x2,y2)，要知道只有$[k]P_B&#x3D;(x2,y2)$，理由是：</li></ul><p>密钥对的设定是有规则的，即$[d_B]G&#x3D;P_B$，所以这里可以等价。试想一下，想要根据公钥PB得到私钥$d_B$，又需要解一个ECDLP问题，sm2的安全性就基于此。</p><h2 id="Python程序实现"><a href="#Python程序实现" class="headerlink" title="Python程序实现"></a>Python程序实现</h2><p>sm2算法的实现有专门的库gmssl，调用其中的库即可实现加解密。</p><p>这里仿照gmssl库做出了一些改进，实现了sm2的加解密。</p><p>其中椭圆曲线参数的设定和基点的选择参照官方技术文档</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">基点G的阶:     FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFF7203DF6B21C6052B53BBF40939D54123<br>素数p:        FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFF<br>基点G横坐标:   32c4ae2c1f1981195f9904466a39c9948fe30bbff2660be1715a4589334c74c7<br>基点G纵坐标:   bc3736a2f4f6779c59bdcee36b692153d0a9877cc62a474002df32e52139f0a0<br>椭圆曲线系数a: FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFC<br>椭圆曲线系数b: 28E9FA9E9D9F5E344D5A9E4BCF6509A7F39789F515AB8F92DDBCBD414D940E93<br></code></pre></td></tr></table></figure><p>代码实现如下</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> binascii<br><span class="hljs-keyword">from</span> random <span class="hljs-keyword">import</span> choice<br><span class="hljs-keyword">from</span> gmssl <span class="hljs-keyword">import</span> sm3,func<br><span class="hljs-keyword">import</span> base64<br><span class="hljs-comment"># 选择素域，设置椭圆曲线参数</span><br><br>default_ecc_table = \<br>&#123;<br>    <span class="hljs-string">&#x27;n&#x27;</span>: <span class="hljs-string">&#x27;FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFF7203DF6B21C6052B53BBF40939D54123&#x27;</span>,<br>    <span class="hljs-string">&#x27;p&#x27;</span>: <span class="hljs-string">&#x27;FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFF&#x27;</span>,<br>    <span class="hljs-string">&#x27;g_x&#x27;</span>: <span class="hljs-string">&#x27;32c4ae2c1f1981195f9904466a39c9948fe30bbff2660be1715a4589334c74c7&#x27;</span>,<br>    <span class="hljs-string">&#x27;g_y&#x27;</span>: <span class="hljs-string">&#x27;bc3736a2f4f6779c59bdcee36b692153d0a9877cc62a474002df32e52139f0a0&#x27;</span>,<br>    <span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-string">&#x27;FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFC&#x27;</span>,<br>    <span class="hljs-string">&#x27;b&#x27;</span>: <span class="hljs-string">&#x27;28E9FA9E9D9F5E344D5A9E4BCF6509A7F39789F515AB8F92DDBCBD414D940E93&#x27;</span>,<br>&#125;<br><br><span class="hljs-comment"># default_ecc_table = \</span><br><span class="hljs-comment"># &#123;</span><br><span class="hljs-comment">#     &#x27;n&#x27;: &#x27;1&#x27;,</span><br><span class="hljs-comment">#     &#x27;p&#x27;: &#x27;D&#x27;,</span><br><span class="hljs-comment">#     &#x27;g_x&#x27;: &#x27;1&#x27;,</span><br><span class="hljs-comment">#     &#x27;g_y&#x27;: &#x27;1&#x27;,</span><br><span class="hljs-comment">#     &#x27;a&#x27;: &#x27;3&#x27;,</span><br><span class="hljs-comment">#     &#x27;b&#x27;: &#x27;8&#x27;,</span><br><span class="hljs-comment"># &#125;</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CryptSM2</span>(<span class="hljs-title class_ inherited__">object</span>):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, private_key, public_key, ecc_table=default_ecc_table</span>):<br>        <span class="hljs-comment">#初始化函数，需要输入公钥和私钥</span><br>        self.private_key = private_key<br>        self.para_len = <span class="hljs-built_in">len</span>(ecc_table[<span class="hljs-string">&#x27;n&#x27;</span>])<br>        self.public_key = self.Str_coordinate_to_jacobian(public_key)<br>        self.ecc_a3 = (<br>            <span class="hljs-built_in">int</span>(ecc_table[<span class="hljs-string">&#x27;a&#x27;</span>], base=<span class="hljs-number">16</span>) + <span class="hljs-number">3</span>) % <span class="hljs-built_in">int</span>(ecc_table[<span class="hljs-string">&#x27;p&#x27;</span>], base=<span class="hljs-number">16</span>)<br>        self.ecc_table = ecc_table<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">double_point</span>(<span class="hljs-params">self, Point</span>):  <span class="hljs-comment"># 倍点</span><br>        l = <span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&#x27;</span>.join(Point)) <span class="hljs-comment">#计算点的16进制长度 </span><br>        len_2 = <span class="hljs-number">2</span> * self.para_len<br>        x1 = <span class="hljs-built_in">int</span>(Point[<span class="hljs-number">0</span>], <span class="hljs-number">16</span>)<br>        y1 = <span class="hljs-built_in">int</span>(Point[<span class="hljs-number">1</span>], <span class="hljs-number">16</span>)<br>        z1 = <span class="hljs-built_in">int</span>(Point[<span class="hljs-number">2</span>], <span class="hljs-number">16</span>)<br><br>        p = <span class="hljs-built_in">int</span>(self.ecc_table[<span class="hljs-string">&#x27;p&#x27;</span>], base=<span class="hljs-number">16</span>)<br>        <span class="hljs-comment">#使用计算倍点的公式</span><br>        T6 = (z1 * z1) % p<br>        T2 = (y1 * y1) % p<br>        T3 = (x1 + T6) % p<br>        T4 = (x1 - T6) % p<br>        T1 = (T3 * T4) % p<br>        T3 = (y1 * z1) % p<br>        T4 = (T2 * <span class="hljs-number">8</span>) % p<br>        T5 = (x1 * T4) % p<br>        T1 = (T1 * <span class="hljs-number">3</span>) % p<br>        T6 = (T6 * T6) % p<br>        T6 = (self.ecc_a3 * T6) % p<br>        T1 = (T1 + T6) % p<br>        z3 = (T3 + T3) % p<br>        T3 = (T1 * T1) % p<br>        T2 = (T2 * T4) % p<br>        x3 = (T3 - T5) % p<br><br>        <span class="hljs-keyword">if</span> (T5 % <span class="hljs-number">2</span>) == <span class="hljs-number">1</span>:<br>            T4 = (T5 + ((T5 + p) &gt;&gt; <span class="hljs-number">1</span>) - T3) % p<br>        <span class="hljs-keyword">else</span>:<br>            T4 = (T5 + (T5 &gt;&gt; <span class="hljs-number">1</span>) - T3) % p<br><br>        T1 = (T1 * T4) % p<br>        y3 = (T1 - T2) % p<br><br>        form = <span class="hljs-string">&#x27;%%0%dx&#x27;</span> % self.para_len<br>        <span class="hljs-keyword">return</span> (form % x3, form % y3, form % z3)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_point</span>(<span class="hljs-params">self, P1, P2</span>):  <span class="hljs-comment"># 点加函数，P2点为仿射坐标即z=1，P1为Jacobian加重射影坐标</span><br>        p = <span class="hljs-built_in">int</span>(self.ecc_table[<span class="hljs-string">&#x27;p&#x27;</span>], base=<span class="hljs-number">16</span>)<br>        X1 = <span class="hljs-built_in">int</span>(P1[<span class="hljs-number">0</span>], <span class="hljs-number">16</span>)<br>        Y1 = <span class="hljs-built_in">int</span>(P1[<span class="hljs-number">1</span>], <span class="hljs-number">16</span>)<br>        Z1 = <span class="hljs-built_in">int</span>(P1[<span class="hljs-number">2</span>],<span class="hljs-number">16</span>)<br><br>        x2 = <span class="hljs-built_in">int</span>(P2[<span class="hljs-number">0</span>], <span class="hljs-number">16</span>)<br>        y2 = <span class="hljs-built_in">int</span>(P2[<span class="hljs-number">1</span>], <span class="hljs-number">16</span>)<br><br>        T1 = (Z1 * Z1) % p<br>        T2 = (y2 * Z1) % p<br>        T3 = (x2 * T1) % p<br>        T1 = (T1 * T2) % p<br>        T2 = (T3 - X1) % p<br>        T3 = (T3 + X1) % p<br>        T4 = (T2 * T2) % p<br>        T1 = (T1 - Y1) % p<br>        Z3 = (Z1 * T2) % p<br>        T2 = (T2 * T4) % p<br>        T3 = (T3 * T4) % p<br>        T5 = (T1 * T1) % p<br>        T4 = (X1 * T4) % p<br>        X3 = (T5 - T3) % p<br>        T2 = (Y1 * T2) % p<br>        T3 = (T4 - X3) % p<br>        T1 = (T1 * T3) % p<br>        Y3 = (T1 - T2) % p<br><br><br>        form = <span class="hljs-string">&#x27;%%0%dx&#x27;</span> % self.para_len<br>        <br>        <span class="hljs-keyword">return</span> (form % X3, form % Y3, form % Z3)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">kp</span>(<span class="hljs-params">self, k_int, Point_xy</span>):  <br>        <span class="hljs-comment"># kP运算，即k倍点的运算函数</span><br>        Point = Point_xy<br>        k = k_int<br>        mask_str = <span class="hljs-string">&#x27;8&#x27;</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(self.para_len - <span class="hljs-number">1</span>):<br>            mask_str += <span class="hljs-string">&#x27;0&#x27;</span><br>        mask = <span class="hljs-built_in">int</span>(mask_str, <span class="hljs-number">16</span>)<br>        Temp = Point<br>        flag = <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(self.para_len * <span class="hljs-number">4</span>): <span class="hljs-comment">#每个16进制4个bit</span><br>            <span class="hljs-keyword">if</span> (flag):<br>                Temp = self.double_point(Temp)<br>            <span class="hljs-keyword">if</span> (k &amp; mask) != <span class="hljs-number">0</span>: <span class="hljs-comment">#用与操作判断k的最高位是否为0</span><br>                <span class="hljs-keyword">if</span> (flag):<br>                    Temp = self.add_point(Temp, Point)<br>                <span class="hljs-keyword">else</span>:<br>                    flag = <span class="hljs-literal">True</span><br>                    Temp = Point<br>            k = k &lt;&lt; <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> self._convert_jacb_to_nor(Temp)<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_convert_jacb_to_nor</span>(<span class="hljs-params">self, Point</span>): <span class="hljs-comment"># Jacobian加重射影坐标转换成仿射坐标</span><br>        len_2 = <span class="hljs-number">2</span> * self.para_len<br>        x = <span class="hljs-built_in">int</span>(Point[<span class="hljs-number">0</span>], <span class="hljs-number">16</span>)<br>        y = <span class="hljs-built_in">int</span>(Point[<span class="hljs-number">1</span>], <span class="hljs-number">16</span>)<br>        z = <span class="hljs-built_in">int</span>(Point[<span class="hljs-number">2</span>], <span class="hljs-number">16</span>)<br>        p = <span class="hljs-built_in">int</span>(self.ecc_table[<span class="hljs-string">&#x27;p&#x27;</span>], base=<span class="hljs-number">16</span>)<br>        z_inv = <span class="hljs-built_in">pow</span>(z, p - <span class="hljs-number">2</span>, p)<br>        z_invSquar = (z_inv * z_inv) % p<br>        z_invQube = (z_invSquar * z_inv) % p<br>        x_new = (x * z_invSquar) % p<br>        y_new = (y * z_invQube) % p<br>        z_new = (z * z_inv) % p<br>        <span class="hljs-keyword">if</span> z_new == <span class="hljs-number">1</span>:<br>            form = <span class="hljs-string">&#x27;%%0%dx&#x27;</span> % self.para_len<br>            <br>            <span class="hljs-keyword">return</span> (form % x_new, form % y_new, form % z_new)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">encrypt</span>(<span class="hljs-params">self, data_str</span>):<br>        <span class="hljs-comment"># 加密函数，data消息字符串</span><br>        data = data_str.encode() <span class="hljs-comment">#将消息转化为bytes流</span><br>        msg = data.<span class="hljs-built_in">hex</span>() <span class="hljs-comment"># 消息转化为16进制字符串</span><br>        G = (self.ecc_table[<span class="hljs-string">&#x27;g_x&#x27;</span>],self.ecc_table[<span class="hljs-string">&#x27;g_y&#x27;</span>],<span class="hljs-string">&quot;1&quot;</span>)<br>        k = <span class="hljs-number">2</span><span class="hljs-comment">#int(func.random_hex(self.para_len),16) #1.产生随机数k \in [1,n-1]</span><br>        C1 = self.kp(k,G) <span class="hljs-comment">#2.计算[k]G = (x1,y1)</span><br>        C1 = self._convert_jacb_to_nor(C1)<br>        C1 = C1[<span class="hljs-number">0</span>]+C1[<span class="hljs-number">1</span>]<br>        xy = self.kp(k,self.public_key) <span class="hljs-comment">#3.计算点s = [k]pk</span><br>        x2 = xy[<span class="hljs-number">0</span>]<br>        y2 = xy[<span class="hljs-number">1</span>]<br>        m_len = <span class="hljs-built_in">len</span>(msg)<br>        t = sm3.sm3_kdf((x2+y2).encode(<span class="hljs-string">&#x27;utf8&#x27;</span>), m_len/<span class="hljs-number">2</span>)<span class="hljs-comment">#5.计算t = KDF(x2||y2,klen)</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">int</span>(t,<span class="hljs-number">16</span>)==<span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>        <span class="hljs-keyword">else</span>:<br>            form = <span class="hljs-string">&#x27;%%0%dx&#x27;</span> % m_len <span class="hljs-comment">#两个百分号代表%</span><br>            C2 = form % (<span class="hljs-built_in">int</span>(msg, <span class="hljs-number">16</span>) ^ <span class="hljs-built_in">int</span>(t, <span class="hljs-number">16</span>)) <span class="hljs-comment">#6.计算C2 = M 异或 t，C2的长度理应为消息M的长度</span><br>            C3 = sm3.sm3_hash([<br>                i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">bytes</span>.fromhex(<span class="hljs-string">&#x27;%s%s%s&#x27;</span>% (x2,msg,y2))<span class="hljs-comment">#7.计算哈希函数C3 = Hash(x2 || M || y2)</span><br>            ])<br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">bytes</span>.fromhex(<span class="hljs-string">&#x27;%s%s%s&#x27;</span> % (C1,C3,C2))<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decrypt</span>(<span class="hljs-params">self, data</span>):<br>            <span class="hljs-comment"># 解密函数，data密文（bytes）</span><br>            data = data.<span class="hljs-built_in">hex</span>()<br>            len_2 = <span class="hljs-number">2</span> * self.para_len<br>            len_3 = len_2 + <span class="hljs-number">64</span> <br>            C1 = self.Str_coordinate_to_jacobian(data[<span class="hljs-number">0</span>:len_2]) <span class="hljs-comment">#1.提取出C1,并转化为坐标点</span><br>            C3 = data[len_2:len_3]<br>            C2 = data[len_3:]<br>            xyz = self.kp(<span class="hljs-built_in">int</span>(self.private_key,<span class="hljs-number">16</span>),C1)<span class="hljs-comment">#3.计算[sk]C1 = (x2,y2)</span><br>            xy = self._convert_jacb_to_nor(xyz)<br>            <span class="hljs-comment"># print(&#x27;xy = %s&#x27; % xy)</span><br>            x2 = xy[<span class="hljs-number">0</span>]<br>            y2 = xy[<span class="hljs-number">1</span>]<br>            cl = <span class="hljs-built_in">len</span>(C2)<br>            t = sm3.sm3_kdf((x2+y2).encode(<span class="hljs-string">&#x27;utf8&#x27;</span>), cl/<span class="hljs-number">2</span>)<span class="hljs-comment">#4.计算t = KDF(x2||y2,klen)</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">int</span>(t, <span class="hljs-number">16</span>) == <span class="hljs-number">0</span>:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>            <span class="hljs-keyword">else</span>:<br>                form = <span class="hljs-string">&#x27;%%0%dx&#x27;</span> % cl<br>                M = form % (<span class="hljs-built_in">int</span>(C2,<span class="hljs-number">16</span>) ^ <span class="hljs-built_in">int</span>(t,<span class="hljs-number">16</span>))<span class="hljs-comment">#5.恢复明文M = C2 异或 t</span><br>                u = sm3.sm3_hash([<br>                    i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">bytes</span>.fromhex(<span class="hljs-string">&#x27;%s%s%s&#x27;</span>% (x2,M,y2))<br>                ])<br>                <span class="hljs-keyword">return</span> <span class="hljs-built_in">bytes</span>.fromhex(M)<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">Str_coordinate_to_jacobian</span>(<span class="hljs-params">self,Point_str</span>):<br>        Point = Point_str<br>        x = Point[<span class="hljs-number">0</span>:self.para_len]<br>        y = Point[self.para_len:<span class="hljs-number">2</span>*self.para_len]<br>        z = <span class="hljs-string">&quot;1&quot;</span><br>        <span class="hljs-keyword">return</span> (x,y,z)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-comment"># sm2的公私钥</span><br>    SM2_PRIVATE_KEY = <span class="hljs-string">&#x27;00B9AB0B828FF68872F21A837FC303668428DEA11DCD1B24429D0C99E24EED83D5&#x27;</span><br>    SM2_PUBLIC_KEY = <span class="hljs-string">&#x27;B9C9A6E04E9C91F7BA880429273747D7EF5DDEB0BB2FF6317EB00BEF331A83081A6994B8993F3F5D6EADDDB81872266C87C018FB4162F5AF347B483E24620207&#x27;</span><br>    operator = CryptSM2(SM2_PRIVATE_KEY,SM2_PUBLIC_KEY)<br>    c = operator.encrypt(<span class="hljs-string">&quot;网络空间安全&quot;</span>)<br>    <span class="hljs-built_in">print</span>(base64.b64encode(c))<br>    result = operator.decrypt(c).decode(encoding=<span class="hljs-string">&quot;utf-8&quot;</span>)<br>    <span class="hljs-built_in">print</span>(result)<br><br>    <span class="hljs-comment"># n = int(default_ecc_table[&#x27;n&#x27;],16)</span><br>    <span class="hljs-comment"># G = operator.Str_coordinate_to_jacobian(SM2_PRIVATE_KEY)</span><br>    <span class="hljs-comment"># print(operator.kp(n,G))</span><br>    <br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">人民有信仰，国家有希望</summary>
    
    
    
    <category term="密码学" scheme="http://example.com/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/"/>
    
    
    <category term="python" scheme="http://example.com/tags/python/"/>
    
    <category term="椭圆曲线加密算法" scheme="http://example.com/tags/%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>python常用库(密码学)</title>
    <link href="http://example.com/2022/11/19/python%E5%B8%B8%E7%94%A8%E5%BA%93-%E5%AF%86%E7%A0%81%E5%AD%A6/"/>
    <id>http://example.com/2022/11/19/python%E5%B8%B8%E7%94%A8%E5%BA%93-%E5%AF%86%E7%A0%81%E5%AD%A6/</id>
    <published>2022-11-19T10:51:45.000Z</published>
    <updated>2022-11-19T10:51:45.494Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>EIGamal加密算法</title>
    <link href="http://example.com/2022/11/18/EIGamal%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95/"/>
    <id>http://example.com/2022/11/18/EIGamal%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95/</id>
    <published>2022-11-18T04:41:14.000Z</published>
    <updated>2022-12-05T04:41:37.683Z</updated>
    
    <content type="html"><![CDATA[<h1 id="EIGamal加密算法"><a href="#EIGamal加密算法" class="headerlink" title="EIGamal加密算法"></a>EIGamal加密算法</h1><h2 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a>背景介绍</h2><h3 id="DH-Diffie-Hellman-算法"><a href="#DH-Diffie-Hellman-算法" class="headerlink" title="DH(Diffie-Hellman)算法"></a>DH(Diffie-Hellman)算法</h3><p>DH算法用于在不安全的公共通道中协商密钥，安全性体现在：在有限域上计算离散代数非常困难。上两位大牛Whitfield Diffie 和 Martin Hellman的照片：</p><img src="/2022/11/18/EIGamal%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95/DH_master.jpg" class="" title="大师"><p>算法描述：</p><blockquote><p>假定Alice和Bob期望在一个不安全的网络中协商一个共同的密钥，那么进行如下步骤：</p><ul><li>两人先说好大素数（质数）p和它的原始根g。</li><li>Alice随机产生一个数a，并计算$y_A &#x3D; g^a \mod p$, 发送给Bob。</li><li>Bob随机产生一个数b，并计算$y_B&#x3D; g^b \mod p$，发送给Alice。</li></ul><p>此时， Alice手握Bob发过来的$y_B$，结合自己产生的a，开始这样计算：</p><p>$y_B^a \mod p &#x3D; (g^b \mod p)^a \mod p &#x3D; g^{ab} \mod p$。</p><p>Bob也拿到了Alice发来的$y_A$，同时结合自己的b，也开始计算：</p><p>$y_A^b \mod p &#x3D; (g^a \mod p)^b \mod p &#x3D; g^{ab} \mod g$。</p><p>这样Alice和Bob都得到了相同的密钥。</p></blockquote><img src="/2022/11/18/EIGamal%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95/DH.png" class="" title="DH密钥交换图解"><h3 id="EIGamal诞生"><a href="#EIGamal诞生" class="headerlink" title="EIGamal诞生"></a>EIGamal诞生</h3><p>ElGamal算法是由Tather ElGamal在1985年提出的，它是一种基于<a href="https://so.csdn.net/so/search?q=%E7%A6%BB%E6%95%A3&spm=1001.2101.3001.7020">离散</a>对数难题的加密体系，与RAS算法一样，既能用于数据加密，也能用于数字签名。ElGamal算法是基于因数分解，而ElGamal算法是基于离散对数问题。与RSA算法相比，ElGamal算法哪怕是使用相同的私钥，对相同的明文进行加密，每次加密后得到的签名也各不相同，有效的防止了网络中可能出现的重放攻击。</p><ul><li>原文的链接：<a href="https://link.springer.com/content/pdf/10.1007/3-540-39568-7_2.pdf"><a href="https://ieeexplore.ieee.org/abstract/document/1057074/">A public key cryptosystem and a signature scheme based on discrete logarithms</a></a></li></ul><p>这篇论文在谷歌学术上被引用了将近10000次，可以说有想当广泛的影响力，大家如果有时间可以欣赏一下作者是怎么行文的，EIGamal加密算法十分的简单，看看作者是如何将其扩充到9页，也是一种锻炼自己的方式嘿嘿。</p><h2 id="基于离散对数的数学难题"><a href="#基于离散对数的数学难题" class="headerlink" title="基于离散对数的数学难题"></a>基于离散对数的数学难题</h2><h3 id="基本描述"><a href="#基本描述" class="headerlink" title="基本描述"></a>基本描述</h3><p><strong>如果对于一个整数y和质数p的一个原根g，可以找到一个唯一的指数x，使得：</strong></p><p>$y&#x3D;g^x\pmod{p} $<strong>其中</strong> $0≤x≤p−2$<strong>成立，那么指数x称为y的以g为基数的模p的离散对数。</strong></p><p>离散对数难题是指：当已知一个大质数p和它的一个原根g，如果给定一个y，要计算x的值是相当困难的。</p><h3 id="针对不合理参数的破解方法"><a href="#针对不合理参数的破解方法" class="headerlink" title="针对不合理参数的破解方法"></a>针对不合理参数的破解方法</h3><h4 id="当质数满足-p-x3D-2-n-1"><a href="#当质数满足-p-x3D-2-n-1" class="headerlink" title="当质数满足$p &#x3D; 2^n+1$"></a>当质数满足$p &#x3D; 2^n+1$</h4><p>当$p &#x3D; 2^n+1$,x可以被转化成二进制序列${b_0,\dots,b_{n-1}}$,其中$b_i\in {0,1}$,有如下等式<br>$$<br>x &#x3D; \sum_{i&#x3D;0}^{n-1}{b_i*2^i}<br>$$<br>注意到，因为g是模数p的一个原根，所以集合${g^i|i\in[0,p-2]}&#x3D;{1,\dots,p-1}$,两个集合即两个集合应该相等，由Euler小定理:<br>$$<br>g^{p-1} \equiv 1 \pmod{p}<br>$$<br>那么对方程开方:<br>$$<br>g^{(p-1)&#x2F;2} \equiv -1 \pmod{p}<br>$$<br>为什么不是等于1呢，因为已经有$g^0&#x3D;1$了，$g^{(p-1)&#x2F;2}$不能和$g^0$相等（集合${g^i|i\in[0,p-2]}$等于素数p的既约剩余系），所以只能等于-1</p><p>有了上面的基础，我们可以简单推导出下面的公式<br>$$<br>y^{(p-1)&#x2F;2} \equiv (g^x)^{(p-1)&#x2F;2} \equiv (-1)^x \pmod{p}<br>$$<br>根据x的二进制序列，当x的最低位</p><ul><li>$b_0&#x3D;0$时，$y^{(p-1)&#x2F;2} \equiv 1 \pmod{p}$</li><li>$b_0&#x3D;1$时，$y^{(p-1)&#x2F;2} \equiv -1 \pmod{p}$</li></ul><p>由此我们可以确定第一位$b_0$的值，我们继续令$z \equiv y<em>g^{(-b_0)}\equiv g^{x_1} \pmod{p}$,这里<br>$$<br>x_1 &#x3D; \sum_{i&#x3D;1}^{n-1}b_i</em>2^i<br>$$<br>如果$b_1&#x3D;0$那么$x_1$是4的倍数而不是2的倍数，有下面的等式<br>$$<br>z^{(p-1)&#x2F;4} \pmod{p} \equiv<br>\begin{equation}<br>    \begin{cases}<br>        +1,b_1&#x3D;0\<br>        -1,b_0&#x3D;1<br>     \end{cases}<br>\end{equation}<br>$$<br>由此我们有可以判断一位$b_1$，以此类推，我们可以完全复原密文x</p><h4 id="当p没有大素数因子"><a href="#当p没有大素数因子" class="headerlink" title="当p没有大素数因子"></a>当p没有大素数因子</h4><h2 id="EIGamal流程介绍"><a href="#EIGamal流程介绍" class="headerlink" title="EIGamal流程介绍"></a>EIGamal流程介绍</h2><h3 id="密钥产生"><a href="#密钥产生" class="headerlink" title="密钥产生"></a>密钥产生</h3><ul><li>选取一个强素数$p$，而且满足$p-1$至少有一个很大的质因数（如果因子很小那么计算离散对数很简单）</li><li>素数$p$的一个本原根$g$</li><li>随机选取整数$a$</li></ul><p>产生一个公钥$pk &#x3D; (p,g,g^a)$，私钥是随机选取的整数a</p><h3 id="加密"><a href="#加密" class="headerlink" title="加密"></a>加密</h3><p>假设Alice想发送一个密文m给Bob</p><ul><li>随机选取一个数$k\in[1,p-2]$</li><li>计算$c_1 &#x3D; g^k \mod p$</li><li>再计算$c_2 &#x3D; (g^a)^k*m \mod p$</li></ul><p>如此就计算出了密文，这是一对数$(c_1,c_2)$，并将其发送给Bob</p><h3 id="解密"><a href="#解密" class="headerlink" title="解密"></a>解密</h3><p>Bob讲密文恢复成明文m</p><ul><li>计算$v \equiv c_1^a \pmod{p}$</li><li>计算$m \equiv c_2*v^{-1} \pmod{p}$</li></ul><blockquote><p>证明：</p><p>$m \equiv c_2<em>v^{-1} \pmod{p} \equiv m</em>g^{ak}*(g^{ak})^{-1} \pmod{p} \equiv m \pmod{p}$</p></blockquote><h2 id="python程序实现"><a href="#python程序实现" class="headerlink" title="python程序实现"></a>python程序实现</h2><h3 id="参数生成"><a href="#参数生成" class="headerlink" title="参数生成"></a>参数生成</h3><p>强素数满足p-1至少有一个大因子，可以用Crypto.Util.number里的函数<code>getStrongPrime()</code>，这样可以直接产生一个非常强的素数。但是这样有几个问题：</p><ul><li>这个函数随机生成的强素数的bit位数必须是128的倍数而且大于512。一方面导致了计算时间的增大，令一方面如果p太大可能导致不安全（比如$g^a \mod p$可能在数值上就等于$g^a$，而有些同学喜欢默认为原根就是2,3,5中的几个，如果a取的不是很大，我们可以直接开方，如果是整数那么这个就是我们要的a）</li><li>这个素数因为有大因子，在验证g是原根的时候，这几个大因子寻找十分困难，以至于时间很长很长</li></ul><p>下面给出一个解决方案：</p><blockquote><p>我们只需要p-1有一个大因子就行了，我们默认大因子为素数q和数字2，这样就有关系p &#x3D; 2*q+1,如此一来，我们只需要验证p-1的两个因子即可判断是不是原根</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">Gen_primitive_root</span>(<span class="hljs-params">p,q</span>):<br>    <span class="hljs-comment">#产生一个本原根，产生方法，从2，3，... ，p-1逐个选取</span><br>    <span class="hljs-comment">#选到2的时候，选取phi(p)的几个非1因子，比如phi(11)=10,10有因子2，5</span><br>    <span class="hljs-comment">#如果2的2次方和5次方都不等于1，那么一定2的10次方等于1，这时候2为本原根</span><br>    <span class="hljs-comment">#但，这样真的很慢很慢</span><br><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        candidate_root = random.randint(<span class="hljs-number">2</span>,p-<span class="hljs-number">2</span>)<br>        <span class="hljs-comment">#按照Gen_para生成的素数p只有两个素因子2和q</span><br>        <span class="hljs-keyword">if</span> gmpy2.powmod(candidate_root,<span class="hljs-number">2</span>,p)!=<span class="hljs-number">1</span> <span class="hljs-keyword">and</span>  gmpy2.powmod(candidate_root,q,p)!=<span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> candidate_root     <br>        <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Gen_para</span>(<span class="hljs-params">m</span>):<br>    digit = <span class="hljs-built_in">len</span>(<span class="hljs-built_in">str</span>(m))<br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        <span class="hljs-comment">#这里是一个坑，尽量吧q的范围扩大一点，这样有更大的几率让2*q+1是一个素数</span><br>        q = sympy.randprime(<span class="hljs-number">10</span>**digit, <span class="hljs-number">10</span>**(digit+<span class="hljs-number">1</span>))<br>        p = <span class="hljs-number">2</span> * q + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> sympy.isprime(q):<br>            <span class="hljs-keyword">if</span>  gmpy2.is_prime(p):<br>                <span class="hljs-keyword">break</span><br>    g = Gen_primitive_root(p,q)<br>    a = random.randint(<span class="hljs-number">2</span> , p-<span class="hljs-number">2</span>)<br>    <span class="hljs-keyword">return</span> [p,g,<span class="hljs-built_in">pow</span>(g,a,p)],a<br></code></pre></td></tr></table></figure><h3 id="加解密实现"><a href="#加解密实现" class="headerlink" title="加解密实现"></a>加解密实现</h3><p>参数生成了之后加解密就没什么好说的了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">encrypt</span>(<span class="hljs-params">m,pk</span>):<br>    k = random.randint(<span class="hljs-number">1</span>,p-<span class="hljs-number">2</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;参数k的值为:%d&quot;</span>%k)<br>    c1 = <span class="hljs-built_in">pow</span>(g,k,p)<br>    c2 = (<span class="hljs-built_in">pow</span>(g_a,k,p) * m)%p<br>    <span class="hljs-keyword">return</span>  c1,c2 <br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">decrypt</span>(<span class="hljs-params">c1,c2,sk</span>):<br>    v = <span class="hljs-built_in">pow</span>(c1,sk,p)<br>    m = c2*sympy.invert(v,p) % p<br>    <span class="hljs-keyword">return</span> m<br></code></pre></td></tr></table></figure><h3 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">import</span> gmpy2<br><span class="hljs-keyword">import</span> sympy<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Gen_primitive_root</span>(<span class="hljs-params">p,q</span>):<br>    <span class="hljs-comment">#产生一个本原根，产生方法，从2，3，... ，p-1逐个选取</span><br>    <span class="hljs-comment">#选到2的时候，选取phi(p)的几个非1因子，比如phi(11)=10,10有因子2，5</span><br>    <span class="hljs-comment">#如果2的2次方和5次方都不等于1，那么一定2的10次方等于1，这时候2为本原根</span><br>    <span class="hljs-comment">#但，这样真的很慢很慢</span><br><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        candidate_root = random.randint(<span class="hljs-number">2</span>,p-<span class="hljs-number">2</span>)<br>        <span class="hljs-comment">#按照Gen_para生成的素数p只有两个素因子2和q</span><br>        <span class="hljs-keyword">if</span> gmpy2.powmod(candidate_root,<span class="hljs-number">2</span>,p)!=<span class="hljs-number">1</span> <span class="hljs-keyword">and</span>  gmpy2.powmod(candidate_root,q,p)!=<span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> candidate_root          <br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Gen_para</span>(<span class="hljs-params">m</span>):<br>    digit = <span class="hljs-built_in">len</span>(<span class="hljs-built_in">str</span>(m))<br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        <span class="hljs-comment">#这里是一个坑，尽量吧q的范围扩大一点，这样有更大的几率让2*q+1是一个素数</span><br>        q = sympy.randprime(<span class="hljs-number">10</span>**digit, <span class="hljs-number">10</span>**(digit+<span class="hljs-number">1</span>))<br>        p = <span class="hljs-number">2</span> * q + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> sympy.isprime(q):<br>            <span class="hljs-keyword">if</span>  gmpy2.is_prime(p):<br>                <span class="hljs-keyword">break</span><br>    g = Gen_primitive_root(p,q)<br>    a = random.randint(<span class="hljs-number">2</span> , p-<span class="hljs-number">2</span>)<br>    <span class="hljs-keyword">return</span> [p,g,<span class="hljs-built_in">pow</span>(g,a,p)],a<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">encrypt</span>(<span class="hljs-params">m,pk</span>):<br>    k = random.randint(<span class="hljs-number">1</span>,p-<span class="hljs-number">2</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;参数k的值为:%d&quot;</span>%k)<br>    c1 = <span class="hljs-built_in">pow</span>(g,k,p)<br>    c2 = (<span class="hljs-built_in">pow</span>(g_a,k,p) * m)%p<br>    <span class="hljs-keyword">return</span>  c1,c2 <br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">decrypt</span>(<span class="hljs-params">c1,c2,sk</span>):<br>    v = <span class="hljs-built_in">pow</span>(c1,sk,p)<br>    m = c2*sympy.invert(v,p) % p<br>    <span class="hljs-keyword">return</span> m<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    file_name = <span class="hljs-string">&quot;secret0.txt&quot;</span><br>    f = <span class="hljs-built_in">open</span>(file_name)<br>    m = <span class="hljs-built_in">int</span>(f.readline())<br>    pk , sk = Gen_para(m)<br>    p,g,g_a = pk<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;素数p为%d&quot;</span>%p)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;原根g为%d&quot;</span>%g)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;参数g^a为%d&quot;</span>%g_a)<br>    c1 , c2 = encrypt(m,pk)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;密文c1为%d&quot;</span>%c1)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;密文c2为%d&quot;</span>%c2)<br>    m_d = decrypt(c1,c2,sk)<br>    <span class="hljs-keyword">if</span> m == m_d:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;解密正确&quot;</span>)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">基于离散对数难题的加密算法</summary>
    
    
    
    <category term="密码学" scheme="http://example.com/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/"/>
    
    
    <category term="python" scheme="http://example.com/tags/python/"/>
    
    <category term="离散对数困难问题" scheme="http://example.com/tags/%E7%A6%BB%E6%95%A3%E5%AF%B9%E6%95%B0%E5%9B%B0%E9%9A%BE%E9%97%AE%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>中国剩余定理</title>
    <link href="http://example.com/2022/11/04/%E4%B8%AD%E5%9B%BD%E5%89%A9%E4%BD%99%E5%AE%9A%E7%90%86/"/>
    <id>http://example.com/2022/11/04/%E4%B8%AD%E5%9B%BD%E5%89%A9%E4%BD%99%E5%AE%9A%E7%90%86/</id>
    <published>2022-11-04T06:13:36.000Z</published>
    <updated>2023-05-17T12:40:48.563Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="b086f971f4928854bdf2ea26c4cf7f895fed3be1be35d553cd45b3d80008ba76">e7de803e7160295f95749b4342f9c4f199704f8dc0becdf40f3554da5420de4532aa19bc708a71721d7d521d8adbcab9ceae445ff18e0b938b1b0fd2d5b1c76dbda7f208f07ad6a853215521d948fb41bfc437f4017d9ee0c91774fd9e28e33c48cff2f77f2d3dd8d5c88a25d1f273aef743ab4b9d7c3c1f10427adfe47f6e4afe7942e98c29d265346946a7b237bdd5997f5a2a45d69d2b7e8371622b1adac3dc9b45cd3dc05599fa7f7e9d58188db5eabd1afd11081dd4be03ed5548ecf2a1b03ad9973e6845edb02a1368060c0f9cd15b7557a5837e172f55f7c0dab04d2d6342b3a35b4ff71510f958cb3eb8f6faf4b08687fa49ba37cb92d8cf2059d1b12b0348bd4878ce5b5e50b484ee612c1dc52b539286aaa8e37f738866b2fa25d1936b14883ca428c3b5650800d10e2cbf453ed1a48763e82e2ba07a11d67c18415bd5646ae02f3c9e321e72fa7d0eec4483365470bd55867648ddb1a6256de575b3743b32dc43fcf19c5e9e00a8ae85590bb4077e833cf492505005f7ef6ca7b1ed917422dbaff15f282f0ca5c501e12be9856b5a8b1a4f15e57561431323b269371544d1fdb40ca64d124a6e36ae6c0a3e42e05f6672adbf78ad50fee31c2dfff1153b3495c83bfe5f148e664f4e496be9b56d2f259baecf0453b1c2a048df1040aa1a7361d8d3eb5326295ce6d8d8d4f2cec8c17b59522ad72c9cd914ea9ef4fda37388dbd748c77ef9bdcea747663d4f0e5ab7dfe78d3b3e75f38a89836980cf2308d4ddc7a5a5a176afc27e9a1fbd62e45ddeabd270a686d52ba7707179cc3cc1c733074ac7432c62675d041dd62911849c3e910aa645593105e5ccc0f845dc5b47a6a2c84cb2059c2b6c447d225b6447e7e99664fa515f43faa0cf51be6f9358aa6d039e4b90fe641a170a1ab61ab5344e5dd17ac34e65104e37464e727f6dad0521a838f1bfee94475925dceb7f3b9dde375e3327a9121de9b66420fd264fb41f487c6312650dfe7ba5d9818d910211b2673d645c514b2cebbc09b6f673d3c4a6320745dc49e065e1d4d4f39f029b5b89bcce3363c72951e9d4a82d3508d5e03eff97b8957c33712a8650bd4da2196aa3bae2a0f6aab58a308d82513344232aa77ab0868bf9101c23a343be97833c9b66caf568ff5b878242c07786a68848ca79ab92bf8ba34eb37d4a65b68c43c7b9f3c639d806aaea8da988cb8af94322eab882e37f34ed3588b01a6904d6db71f1fc326421c58cb237ab0ca2473130ab780e0548bf70f0d5a5c2a0ab191c5c7cf5bda6032694df845d175c07741ba157513790f278d57f368ef6bf62d4902bde3029a6d67cd63878c95d9c594308bee4e438e48452438a90f52432d3bddfa894cfd5b3314efb20936709cc248f7e6247dda75e38d394e887b5ac8f9a97977a60f3c980f35bd699457ec919bdfca7f2f8a0e2e979562c94598445ff5f0b0a1e3562a45197976af865186784082497a2da5311acd50c3db3ab60dbefd00d4024d83465f23209b96f8cc03b73411328b7c5432c5a727045c8ad3d5f636820cc2a135b8d0796e97445283a5480bf7afe99aa509454f826268844445cfc962590b35d8193d0e872fbba3883d56415fb17c75459c01ae746d9a981f34e625eb1c25e54597032edbe43b846098b7535853eaf1a75db5d2898ed92361c08f9233ae5b0283d9a37ae8d8b011640aee104dedb6a992f481ce77f37ce08173dfef0d16d3960db200db25e34e697977a358228c5c0a3238328e5fe8e18d4e5a7b1ac8d32b0f08da895f9a3d878f41119b3ab3ac288796bb46d5adf87bd7f81cb96d4de2810611cd47019674151c89794c19db4f40cd84f1dfb27aaef48550c364d88ebd27ccdf71e0c31944a2efeb7410340ab1c981df1bf6520dca2d4a801b85b6e915b43c126b929431b512f97db573744355341d9bfa4c8fd6aa302aaf7155d5548160d2b3703becf49a3fc255390bded47f2b79db81a35e55ea4117a84934660e018020fbb8c0d36ea55c629fa8676e0003759cab38edeaf5af701e98506a50e4724a3802f8d304900cc4088bb9f0db5cd9c2f5a5a247f8737f45fdc56283527f9f725bfcaad52991ed44ff8a82ac6637af8081a8c2beaa2b270fc5c27cae1d2f23d226c62c5ff6c354efd394b0a23a16af967d495e64999d1a0372ef1e977e8ecbad940ddbe932a00c2c437c0828933d213034620e7f84d62634b0ed76c5c2d1b03f8e2d7bcef89e2f457d4196420197140a8b33e41fbca615a93d26a08510730ff6308260a7004b09c05e2df29b8793a3da9cd1e9fe4ee7110ef0f7a03c281cc5af98290c6cfcb24c1259da84178d9bc07c92dc984d27644cfd1e92549f807ba1062ecd07b0b4f69f24182630a6d68be5d4be93dda28f225532ea23bf7e5207a2b8a79a85ab9a1c29485dab29a80d5a8efa98f801fb22abd7d80ff0c3bb28566c676e26f8a0ba89a6138fb9a73b358f1dcb6be841b1e1591c79ef8095797032b0d976661363e2f8b00fc9ec2711223c0d5ce24491869e08d08e8259a5933d18014aa6a79045fbad0c055e46ac299c7bea448544c422d82f16f4785f7c877b5cf7c97d2acc83e7a430490985e6d3662793cd0ecf304154b93cfc6312d4708cf4ff4b2223c111e76f9be44727277ef99d7f67a13dc5274230935dae15d6f7720a4b5395c168fbde50830ebd49f7df7cdf26ff3eeee39186a7b95e0ca2a383a31cf633e8296d65fc1ff5ee573d8fed3e7b9a49ca12781d041a510a0d2a160f3a836f04f3a9443e7bbf93f6978b24971ef205a53703aad33d9e93ab2804fb2c2025696568ff6c77ba98a066770876f3e84346dd2aeb49187ccc96abacb587272e67b6421865ad50ab665f57b556f8857a57fdd9b438bb9fd10634d9bdd44fb0c989505b520b7dfa832d5635b26edba43e0d705dbf1cc44b16aeacd2c620f4768bf66884a15719e24c2698d7c19d05fdcedd21794a80baf91211675231913ecccf2508c2095a5d82150aeb93576ccd60e4f189ac6bde7f9f46c8f458e260b0e4c21b410bde28baa59ebbcda1005cdd663fa65b88bf5839a451308ee37ec2463a7c49801a77f8e380587facdb8efebf5ace0d6d90f5893f34e5f138294aa7878b6ce6921673b6f45218dca08e696dec032438b47143346e90b4be30c488c2196e77accd5a2df793d7873a9bbb1025e21aa0bd056d563e8dfa0c840e51d37b729300a2a335410d348f139b82e4d781d8f25d58fd3ef22374b1a9f0d0879837b7cbfb3fee4abad9f50b588254fe12aae92c8d5ee1d0eb2a06b3fd9dd677a2741e0c13803b84b1a480c939249da27b85b718e5de06c1ec88a8904877c23d2ccfe4c6df4994156402ee2b5790c673523b7b7b302487fe2a9a07a1675b976b73be95e9de312c3f505cdebfe8f72ad9a4f435091e51c086379d642d10797bdb978384d3bb2fe0876bfb1ea6c61ebd09829b277cb166d8dfe42e8c79388e3674ab2a631cc10eefe04674188ec145a648e89ea0d68a2dd9a109d7008a11f14c46e93136fed8fd84fd57d2c915487ae609730a20b416dc1d47919172f0ef95d53023ec545d0d6961d1eff5b3f2ff77f986f42fd866f5d6747827ef15748f40990821a6ffe526ce2a6fe8a98a36fcfe0c4ab4b20f1c477ba535b1863191533f2e8fcb4ee357eb4465d1a465b432c5b743334e97dc357a695609f9887daf79ab6790294139f3eeb6cd59a3ea7ba35a834cf9bcc160034f2b21d66360d29d77f2704ee4a031e8cb3a4ecfbf3292ea77376d6c497548942e17d383e6db6d531805da888a742388f28d06197f90dd98109d8f535d44e0e46a705f3c36097ed675706cedeffa9c85a67f81e8f7bf4270a2b5264ed870eab4e58c8f164c1c89c706e120f66829fe905a7e3b55978eb749adee972d3d01281d9f98ed4c8246148744aff64271c53892e5fa30afd8a4b890fb1f97f1b7692d3f021fa0f6107a6aee9a33cb50a258418c685931f3a702ff863b40780f33216694c7c0a1357620f6f27ccdc76e4f2faf9b726f9b4af6593d02b1a119eeda8734870f1e817af269584339cf9bbc76c32143dae651b95e656fa1bcd2cdbf9c41fd5147ea86ed215fdf340c560903d44804d84e120aa17c1e892216b56b089e1a61d5278a43fb181d25bdd2cb20d29ad0d5711bdc3006a3f09b41295ee3c10c2666137976b7ab2a20fe03d61a51fc2a6829298bcf27bf31067989603f5869f7d92b8675689a3620f98570256faf4018572247222e4eca7a16c6d8d69e4343bc2ed9d243e87b4f07023c3cd2f6d9bf40e66f14a105d383848a709059a77e24122d5b14c38bbdb9cedf0f90b508495632349ed6d52cb808ef8b31cecaf5d5936e8c06a9a247359fa794333adad2f863f17aa8deb08d17ba8856ba27e590b8ad975ab54fac6409ed306749911fa73febe9310c3a9e5ee04098d8b75144c0cb9b645f475abb00caa83a1584bcb622a9be216829aa42b107fe15d06af203e70e8b9fd7cee6ccd554890591bc268dd1dd63cb5563df70f834338ec0d71650996bcc72228a01699e39cf367778743fa45c155d9277d2b428b69c090e5f70def1459ec330de1761965961b5c0db08fa9c4965b0b2b13b0944cd37b83fe776c8ca4ddc7050d07ab897cc07716de1b211084c127b2a76ed5cb596e250a1104e1d2df475e774951b19c19b82be19893b4f95bdf6c5681aca25c1d5b48a2a6e856d8302073a892f00f1de7d2be50eb50a861d6220ed050cdd41e3aaaf64fcc54792b07bfa739df596555a14a7fa72afe6082a25cc6e91d92ae4598b8fcb3955a00c55de64affec02ab2d21d8f3f4e949e613fc0aaa2aeb44e2623fe3670a17ad840367ea3a9ed15a19a121d4b48aaaff1945affb667707a021f37ce13a7c2553510503c47250cd878206555cfad1960b1ab33abe241d978f77ea0827526d3fad2a952b3401246315d9ae49d21bf4d2304eb0616187ce8be7f51c8fd4a5a6164d2efec056aaebcfc893e558aa20d775577b3697e86aa62fcb21db790f82afdd4a9cbc533ed894244610cef9ec9418b11a71095a0ae2c44a3ece9a24070d8f9bee091f1f357b48c3c04424c581dbc4ac0c083e090f1b8429467ca79cd2e598034e80b536d0c0db6025f8403c4953f08fa3650d7e519586c0e8872f00ec9e4a415fe41b9473cce2670e61aee440d3742929064cfbde9e089148c24371409a1ebb5a3eacd9ae9c18b9593dfee68a86ab10e8d1981d2e15c3d54b7932720d571bb333b02e97996526fdaa1a5fc33d176d79e8b13b1498bd576131bd252d638fd660b749755382ed977fd8d3f04caa58793f0c028c553a78a38073133aeb731ae33275e00de45f46ededdb7d032f3aa8fd1dfff6c7b8ac487ff50c5ded2f219f57a128246e9732faecb404064f0ad1ce70240c59fb2cef371efc2e868860332af7e63f9ba69db5402962bf486ca9e569fef1ee24984382f5367147d8ddf7fa46acd7fbcc13241d4c9cb33b73bb59a465ff3cbc2046d5e8162d39dfcf7dec74e71cb19d04fdad7433ac2d10ef89e5217c9c53c4df8d3973a48118e9976dcd3c75e72c79be8c31ef869d2604ceaf0d3e2cad2798abb80e8c765b5264ad7c70fe087af3dbed20a34662066ccaeb21618a1ef6ff95450e1d152927dcf375fe925785bad0a1c9b8b5a3513cf48537b3fc5a174c6d472eb1acdc188423109a5d01ff321159eef99467eb5593e5b61a8be670bd63aa6a770bf2f2245c13793981626f81629945c97e11f9fb420f1236dd76881c0e6a5c7750c840445dee34775fbfd46aa1bf7e9e2b4d2f64a4f360f892eb9af09813a3bdf505f1d037e95ccb6a9358bb35503b5693004207499d13250d849e4d46559fa098d68502e543293cbdf6864fe9f7f22c9f342cf98b4f8d7999bbdeadcd6730be708fb0c46fa48462705af6a82b1d21439831ecbc508b1c5273e0eac5f59384534e9628f450a3d330462384be3143b15297aaae9821c0464b43368e1f9ce56927600ef09ab6ba3f4424e3c56e9cb66b06bf3f467f5c2cb60a76449b972bdb796f80768dbf7f55ee398efd59bc6b53b1e39d997d32c7229a8400e8cf1850561798914c4e996a9af6685766e49de023dfd242fb7f94b2ce83c1794c92c7e2fbfd5ca7ad7b2e307398dba9f219b3ccd61a01a4e6585faacd58c66a6bb56ec9e09de61b741d79468f12e0a7c38d7e0fe18797a8d2660e67f14909b79f9efe61b1445cc2608f1d706a997538733d308c67c808e2820de0956e4df77ad7c4f09595b53e022a5a1c855c79ef40ba61ec38cae09028678a23b0adc512819c11ff57567e2340dfdb21461cfa64924b476483251f5215b7e0f53bc05ac829052adf988d6b670a5c5c17a90757717dcba768c6e92c079f0bddfccbbedee174442c786c1cc29e990bb90d4059acf2297a934c5965da6731640653ba96ff078a2d9dfcdbce9b1e4d2bd6394d7435594d3cd82f8e86e6aed262f49db255588703de05d15caabe85de07990821d118348bb4ca013d597e867fb7a4f05fc2d4290e31eb86e97c5303541777b5973abd76260025a595746b2ef1e2d5bd22a3d78c68d322fa67f8a28f6ce852353319b6fc8d96191735eb766c6de92fd5def60b23eebd3c22eca5d70c2a6629507dd4181762eae05f7987afd25b1e90c12bb218752b18ab1be9255b853e0b71c2e17d1d254042bde1e8d3cb12a914a0823f4612d666353d21ae18bf51e68bf0e338d173e67e63184898e5e2b289bd8191a0514d28e0be318e3c38eba9e63b8edd7b2952ba36741021103ce53df19a85dbd8b4b63c90a431edcfbb84c7610a367321356f4cc911bccd283144042cac700cf025c025391c5bb6536b344d8967b9f3a218bbe62b18fa6b23b227224b50681a7e0a5628b284c80a02726897833adf3011c065364343b6194c40323c8ad3bcee217942184cc167805911b304f82c874536bc1d58d0cd5500c93f8557eb225c5469b68ee0120cab5105d565e16c2cf9f8582a5af550cfbcd5b25f203c18658f8e2155418ce82ba1f5786592e9becf9f4a8e52e63e65dcf3b9edcce2eff2ea8cbc9ef2a8e7ba0fce3ce2e002421bdfa711fe1f432a87ba49f91452d160a93083385a1e91c541e67b8f57066c04fc2cc181de8f2a0cdc5eec901d8798fa9d6b6aca1bc0307978db6ab800e9921c08c1443bc4c00bf9a8100ed6b1345ea8967e0e6911253775fe596585c1b7f2e9542442e342a671ab72770a847fa66c686046be160641ae7073ec8093db16433b32e34a28ae1db24bf858b7f1d513da6a9a9dd6bd3628e2ea790840324293ee57adad472e063a39610f300d42a970987ebfe14cdffe97033c1647e6eb393a88a2c54c4209f89dfd191b6eefceac2557cc6fb65a5f272fde21217956a3f8e9dc9cf9afb529d8c6c0c417c8db59e08ae643464a13928cb14223f994fbaffa646f38584995808b24754ce373f808c9accfabaaa982dedf6dc427c69bc4d1637c2d36eb0db0562e2ea87f2c6b5feae3cfa4c37422587023b033f79dbf9099489c671b1aa53aca421d0f913588c43bae8e09d30403724992456b1a1465af39019af56be07610195d5d4433f6fc74bd5743b5adea5e6de68e26d38ab7c637cba314346449b0477033a593206b42d64175a0d8bf43f183c04cb5ee2e4460363668960a0dd04587bcd76e90a08517fc79e0c4f7e2b52560535c21708b098155ff436d6f23537f28b2997aa4b40ea3cf990bd7e0a0bb76985e7bbc3395e692bce2063c6245ececa6ab1d1aa4a55e08a306ea4312eb22ec0f60445fb8658a701c0cf9e07175423657d3dcac2acb633facc49fb6c17313926dd75c614387c248cfd12f305155bbb6f6de4e1f233a2f9866e657a55972f71fe84a29318f751513b8ca997edeb3054d244089d91c6d38795d1edab20a6c73367e6ec08a0bf7bf43baa577ca52b09d2150f3f45db0d4d5fd8894a838391a44046fcae978f1f57b92dbe969fbc889608eedbbc1dcd20a86e640656ceb6163f31ff9d159ce6c97f08217d1b85397ec34605071a8f66d84441146801c7b90df24fbd5e0a23a30473f54a573afc8f92294ace1240b3d7648d9c09fc6378967b6b50695a3cb1eb659a954db761e36e0d6d38e671692c78b4c0bd2e8ac04f9b2a9c3f5560951e938bc78b10d4b141917ee8b93271c1329b735e3ec3bbfb18ec37d5f17488ee88603a78923147296115772d2fc52db4afae54082d785ad2db3fcac05039ffcab165681bff77affc46357e56d0ffeef855f52d46ff9a68b702d6fb1d8cb887b47579ee46f31a4df0a69b263d4cbcf49093328a0c2593ef85186c18837047a0b0734d06d6a38d6cb68f3b01017862642beacbdd9b49a2d5ef2532728a20606a5325408f4abbb7a91dad91abbf7fb5eef3554981385a509582a03a69e8ef69ec6c19e3c2b53cc49978ad6f256c8a35820d10bcdd99ed226dfc1017318287e3f58edf64a9c5af08d234e24abc68caff7d826deb8456bca3d381fe297168bb97b11216d2a365f80570286c0e7c9f8023b78f56b5b59b2216d16301f4dfa68186c8dca20f90908157ec722c7a5bf84e1eea398be10c430617b20fbd2f5dac9d381890e7329752a0aa203ab8ddf55794ea56ea0ea2571d36e1dd7b9df130421bf952d6ff75629d5f73ece65e4c1182513e702a94a50ccd5064a0a95afe0323abce30792cc00f525b0c1c08c31113c98b94c8167bbb2d4aa8e3382950f476ecf83c2600fa82706204e78957ee49b843acd65367c46f7959b383dd893f3fd477dd2ee5e3267c0c9d115888b12bb9c2b44a1cef7f610080da49220e67cb8ac9d8f8ea67521b0adbcee5796632e7d091553608d57ac1ba2be91636e6002f35600e7783cca8d81ca3964f1db2a8abb5c22c9d50e2695cd50b1e613d2c3328b764072c96d2c159e3fb56f98902c15cb222c49b49001437ad7801f22f4d4b5717254262e3ecee905df61b4e126dfdadd3d28b6fb33e8e83c87fc1d94d5f98f921c686fa5d377e1957a5fe4bca9ad9a24149adcd6bac3a4958ec0c134e670dd8e43e7e96c962cdc63cf4732a80492da6d3b8568d475bfb5224243e90486046c1790f861d82aebcb73102c854696630be3e522112ed0d55286a6f0481a00b11c170e95653fac108c561636686f1daf405d5aad031dae2fe0e64b0c55ce44f6a81ae20d4de6bee0986a8f177579cfec726d660732a56765bef392b6c9b7600caa0a077e4ad460c9ec09b1c121c959267bdd126dffe5c6e37c3121a4cc095a4d429d9aead301a42c00956b8930adc084804f1c0185a3a1c8f43aa61673abfcccb123f73d1d8401ea6020eaba100fef4067b126bcbd28657120dd89d93e7ca169596159e64dfede5c8778428366ffdd3152651812e822f77856b42190055750cc74bb66ae55913dd44c06a626d6b24ae5e63b04669199ef94496507ab47864df5c2f315a454806489f8fd4b89297fc2c3f0afb7a3cc87d0eed858bf944782a5897e17be94f137fa28723a22d3e365816c12fd420fdbbaac2b3347b852996a8d8c3446c696bed869496d1c8060f4777cfc9b83b9f426d7be76e0aca24b4f7f70237efdb41009d979f20d2588cf421590d9ee01dd82cd7234c45ceeb1f13384739df54177b7d75c2f44999b5f908b6e279861a797f2db2f98726534fde18d47cd2a97eaa3506dfc2597ff8cf894e518e76a279c891a2e12bde8e4856e81d0695dfc72a5ae935c273d479f277d29b81cef2d26db03ddc7d45d78411d34df9a4ac250eaa028eba8878164d55e25db8fe19c64fd5475691b763ec3f85348682e0e90f7434d9214b869728baef4899e87a5e872b2daace98cf72b89fbf55e069147a2f4a9fb483d742b3c4961e641db4d94d84cc76e3c1a394b60361cdfaa7bcedbfdba67f0febfefa2b596e489200d9c68d206aed66ac175747fb236f91d3ab034a017daeefcf304096b47ebdf9336df5ad85bca83e0b07bdf3f9303f81e0dcefc579c026f8fb70519220a3a505b9241ad07f6ee493149810714a74d9687942aef4ba5fcedf92a420cc2179ff59ecd07fd10ea2e24d9bacdc813bcde2974c6b224df7e7bb06ddab5bd3d598ca93a921f66456eeaa8742e0d911b96a50043ca9277b37e92e7c3a71c2ac19a0cbeaaee9f8d7941b04116710bd95f1760970eb6f4c2c751cc4a6666566c717d34e0dff25c7e0851b1824441ddc877d0e5a2e37b50e65de3b4cc063b926c0548c578466d1bc03d249fdc5c4018f21dab7eb965918b7827625538c02af6070d8ebf37f204a9484556e9819566a597ca1fef384918ab8fad39889a23a8298a77750669576708c370fb5268988a9b71330444fe95ce3eb11463bf58264045ff7b3969a3ec1dc3fb6b9a63900de21565c3f6925aec7bb7f418cadfc1ffd656cd705a818f711c0bf51807c45e2f02939997043c76b47220411b89cc5d59913cea3983cb2f03e15eba88fccbe58515a4c9c10eda5c601466e246a3facdbf0bac811b963d2a766b3ae7cce5fd3a37376ae474fec192b23c8571098c6953a6cb50631aa8ece9c5bf6cd7cde69c92293f89235a91084ec3658db362d0481d9debbe92d61159610c6d5cb96b953aa629d2b3fd0b139185a1ab1611683028c17e5b4a553722d90ad85c11c081bcc0859af16b23dca328d0eac561e4f3b5451c20cfb93a2ed69bd3495ecbcc2ed28545971290e920a335ab2f07c35b1a7d890821611406e3566ec1993d2d72696f1d1ff5825f703078169073436b49b6a23f81573631555e0d724eb4ed6b80291be060f91d7a564e9720c8172ebf7a2a364ac93b6521f4457edd80374a610a3e21efab2d8e1083068f79fca843a84698262501285f15ce6cb00e9369771dee253315c49277a86f9e3b7884b69afac3fafefe9b71c603448e90a96140d91f2b85b9f277ebaabf14483267734d2843ef37cb5e8ae06efb544347898d3771356c122e0bbc0b1568e13d1a086b038d77498986cdeb003a31f4815f727eed9c49d3ffa34013ddf0c05f9079ef0b96013ab222544585013e8fc15dae0e06c09f7d497d69582a4ba02ca2a5dd7d263f15c9564a9f8fc06d7056066e02816c174a597f65ea63118e48aee44f235446471c494e6f34c5034e1d1088825be96442daaef7408b54d93a4db5ea2b3523da24ba76dbe1bcb9941edb76f7b6fe4c0862379ddc5b69e4283ecc9981f3fdd414a83d63b00657459d31c5ad7f480483fc58ed301173a915222d099239b9a85b0b969e2034e787a9a9ffcc37e9bb1ef29835b8dc1ac19e8526b364bbc32a9c6ef3851fab43c42ae9c96d0465ce5078dfb132006284e1730ef83b44f54ffe8071d431ec31505b391ddf0939b46ba61985859e92bfdcd7833716aa4c8814c2fcb96d016827fc471bf3642270322a343a2dcb411e861cae707babedc1c01333c7962fc49bd2cd7a81729a4d61647e450d19dad1f8f50e060b849eaeb72c6dafd0c89cfa57b97c4371a4aa2b5c0983428e412b57a24c57391047f60b6a1db5015e10bb5f58527f926fb9c7388b18b340b1eeca8d8c647c1b97fbadb92544f31dfe2b6685b28210ba89f06a49749d535ab78e9fdc25b3917d05bfb80912e48a151e4b4da115c3a41ed7ab569dc07ddaf40509372df608ee0563c4d898cd662e78781913cd4ee0d6db5559a9637b7661ca45f02dc10b91def91ae059cbaf75d3dd8b9284824df34aca34bdbdddabda54baad590cd6e0978dec34b38491af227bc5e59333598aff500e99bb2bb0e9ee6168da1c81734bc995da35b3f8038b4e594dcdb2f29299cbe5183ef044e607379345ebcf631776d147371dad8fe830e6cbbc69e57055bbe048b3058731d3aead84c81a8e4b2b6d9d31a8fb46c4fcb727a282a6a6befd38841be5bedfbabbc9e18f9b33cc9920fb0b60708d6fb67caf4ed544788361f208e2633db51ab0325dfa6b0d869d4ca5af659a464af4b1feee68b00c0e48c03fd804c3fd8554c011bbc9c77106df0e11e2270daadb9b1eb8d97c0a9d671bcc42361e8615e006f39758a0f0f64befc7ee56788463e90c9db95d79bf7c7f3aa45f980ffe4b6b2a48f7a67d8733638f5339fc1645d8240facbfcd5a5ae9c21c4b69e184ce6b51a3b32522afe917ad51c0377ddd5652871dfd267e89e02877a6e9d361704d11327fbc3a96090d6d5b79fb77be3f72ed39c9133a81d4f30ab8ea6c4d26351aa2200c6c1f9ea4e25dd697311abfb0d61701886247f38dc69036e71210842a795164b6aa035730f7fa3ad08ae8a71784d446e9177e83dd024a7cd2778b87bc7fad4dc7f75ba5afdf84ff475c5d067c271dcdd45d918faabe045292944586aaabdeb150373b9b9f6ec8bd0651e7c82ba1db35e2beeb12f5ec16e027a0c82f8663e9c05c6541f25517421a57800dae37a2e6701b3b5325a08c4b76b8f5e18418e4b1d77c067443fa907f7c4377481077c81a25d6649369f6bbfd5069f429d9e970cfd947b78ae82a80b141fb63745d18a51d7f25f331f9184aaf4815b45aee4f9b42d91daef6ca5d886ef5207e5904a22a9d6cdf7909aa710ae70e879120ceb30f59f5470850bb528a2b837420ef51b6aac6933ec1ff5c1f0fd02fdb520d3cf6fd75495c93b5bdf5f01fc9b23be278e220fbfb60b2633b95c1126e2a3cc51be6e2d3c34095dc0517d946ec996c36fda1e6da0ed7119615db1e3684460e365f0dd19eac08756f7486fc6ddbb31ed4457f70d2fab445946767257dfd2f694f08a40422933ea5c717b7ee5141c120462aca80cef800b7cfb704fec1df1744a4b52b197860424e1dcb661ffb9edcdf6a8cde17bb1bb5ed84dcbe744c752b44be9a8ce94ff31e397833674a0c8a6687d59a4fe3cf7242583a2deb1c130b914c6aaa6e053927868268db4a9ea0755e374dc330085bc70ad3b87d11c8bd31a2df8f14f15eaf90c514d1631072da89cf35ffe08a66e88aba66065656380d9b84997dc11aaf84ca8f34437228dbbcc6d4d277ff0509dad3bb0c3a2df9558e2a2d47dfb9ef463325c12ef1219dc64baa48e4c3d6f28d180de46ceabb92882b0c855211eaf2e881aff601bd27559a33f29a71a6c60a306fce710256f2c38aa1c8bf52d66e2f75df53632c3dcc2212e626bf27d9e5600d6b3ece619d5f53050d221671b0f37dbbe98f980c2a98d94948a580074295aeccdfa4a2883a5aac88286c40828198a7dba1af9e233500ebd764deb7f9177188b58e4060d37d9b3fcace39c750ca20fe965eec9f98a8bcc8c9510126c0cb4de5f26025f597de248c2137250d0edba069232342bc3d5c10a42c1ebd52984aa1d75b0b95174ccf95bae9802cf5243095a4e688b3b3ee6a013c7822ba59a3914db5c152091c271190319c4dbc8141032425b9bca7ca33af14a61e94b4c9fdc72fd2082269570f0ab668467c0871adb60fc67db14c98ab06b844615c05eb52f721089545f9b61077d0641b0b032cefbc5bf5daca91fcba7e8391bc699a5d6553e81a48637a3ba8619196f5cf54c8291aa35746a98883db747f7f8c0cc583136e18d44b3f551209276de1820ec38cb55518e9314610b25a6022056b41d57bdf832a5e68c31a0cbebf82017dec035be4bf78b8477a5dece189bb125453977aeac20a068b5ca1a6ec6f86c90f895fd3cf3ea3887a6972afbcbadfa4e90183801771e8bf9c305947b336b310e97c64875621d5ce645f56cf91854e1edda9699e31dc3eee4edc53372cefa4a4b6d674ba8c17b1211aa66676e5d7d41e117a04e68b57a410c65ce6baac9b3673b591483ac36f0d8a3480cc670af30eef1cb7c4de86292796edd5de45151b0b2c99ae6dbe6a2d66e92cf87af6d85372b593ab01e6f52279f8d2726063b5648286bf932a376d17e601e4ee78cbd41d0342a8b3212b789b7772760927c3aec36bc3ae596919a1b09a2a5893bb9e49eb34fba4662fb25e72a8fb1553ce76cc7e0613ef6fbb0df1dcbf3d555682f5bf54d672e88c1e0c4e3550df5afd0e8741c576f4c72d606825e9fb3a14351c6b5bd73ea6a902fb00e30da5957d6a4dafe1ba2396c76199d05abd75caa31d65fab22a1debbb4d227438ae20d78ece84e1eaa6653d85a9a335b78f53e31fcd50b818fe9eda0d25c35b987a1b65ed9956b638dd71dbe00f40a387745d76d420cee292d449e30740b7315227bbc6a14bf1d03c380efd1d4fdd9b45b76cc71165d76d1c3a85e390e1a484d6af94c3816d2f61aca962fc90581adf4419d39b81ec41b3a1d1497c44992e1b6c030783d201352e1601ec13ff06911af7d93fb18f00558717cdeb4c061d9910481423fbdfac113bd2739446405c44477b38d7ffe10223abc594f49867d8ca38019eebb6039ed3f80aefe070d7f59d7e347248ca82ce685c793ddc47e525a56f079cea9cebac40016b71d0f9e7f93942763d7a2ae60340cb078dccb2aff6854569e940bda77d028f1672571af64eef29b328a43401b30d215e4b7c93cf0cf042823caed40a71239c31b107143f3991f6f568ed84a68465178303d864b1b96eae405d0f690531a1683a206cdfa1b74570c459b28b837a76831dace1474b3b40b78f50536a23836e7fae581b3e714329f05a7447cdf92a6ea5997c87ccb8e49cce3792021c4c1de47251e0358d869ccc779c2f303f14c100b2083163c5cb2dac700a401a9ab205828200c42a86afc31fd05b5abc7adc6b794019e17b747c24aa743fa7d94cc86b8aaba7082dc1837c5c2ac02249238c13272c1be9d7d68087ec41c4ac697b47c2cbedc9e5a1a592645947f9d1ec6f4000575ae2482d848b73ead8f649b9052e4139d9e4701002245b48e1e427e0f8fafde77f6109179f5e4481d32e2d5d7e9c2148223ea60906090f51ac8df50ffea2947201c4c702aa344e9f02c863edf525df8c3a27e3e2bb3c354e28942785c2a6aa0abc2b1ca5d4de9d28a38727a03a310f035b255ba2fdcce196f4934c025b40819574b9a3bb6362422cac125512fff4538f67cb4a45d4d440ab8d28dc1988023822181a992ec27b78dbe797a30be5a415a1f485922312a4c0053e428217ecf6e2137ba85f81611c3903fbefc5dd6e7041ed3fd3b5e25ad5deaed121beea9034e42842ba302717727ba4972ec1c70cb95fa2d5f0e891b7c661c06d32e93ea9219f25a180c2232acd51139446bca0f7c6cb7aa83a139d6dcc91bee735ac4707ef12cb98b6f86e9bbcadbae689a924cc17577ce78fb84a2578823761b793dd494c1d11623c8a8f9db9e4a1b65e921cc9f60ef928779865ce11f68e6ec2bac7d7b0491fa1e2095cd082bb89eb4b0772faf9098cac48d3fe755fb4ad7e5d040483a6e19952926c46fd1d4ada7aed3f6e652a754f0b0f323d2fe11195f2df2bca5ca9e2ea24e85274d58f09f9575f6b83cc005afea680e312c401219f9222d1a1cfaf89c96be1e1dbfa3f69468ab87192ce1f9dd598dab26c1a8a12ab3af785d10fe9fbf7ea9af838b966d3af7a2e77dd7b3038f3f6b4548c43c35ab9aa6ced24570b845b104c58a246403ea715eea72fd273c62d74951e7e12372a989256d5b4191c55282c24b6e6c667042c3dc1308803b4e8acd659c05014f31ea68176da0a78c4683a517ac39256434143e901f1939660e66168ea576f7da6e29571e85e2a8e1a219c813e1b17bc493c3d665d5eb96e46c2dd7fa74caa9605283bea170b455f980f8957e9fa102f95531bc87876be34323a19c67df65f584f36c4487bf9ab0b8678d8abb13a0114c0455b2ada03cc907135aa167ca8ce40fb62a259d985d414c096df2218aef4d6a980564656b6f3d6e72acb6cab58247bab69725d17662b0b0f5c5292eee4305ef1695c5b81ce05f61367a448e93d5ce72c463a4e8258b7ecce4f003b3f0c19cf0dca781d034dadbadb9da7bee76c822050dd8439e7d2e57186e73eb944b270dfc888c8d8bb256af7f126312295b038dcf00fd33af92dfff68135f40c0d0027406b0d129a371327287d4fd5dfc2a259353a9692e1b7d1f98567ed4fdaf8c519830c664239e854d2fb6788e19b9a80bf2d5ede1334d6718dacff0217f9c1c712240fb249a91cfe4773e0e36e37da8d6b52386a59b4a7d08a4fafed4abdac97f5bc1c6475efb34ccbd75bb31d244fbf332334b1c00bedabbaadf1ce180052df94b47465d2bc381ed5cc238efdbe4f896a5d01fc35a297df52fde11944e690f795803da6776a343435ce3a68728ec102d22c8916701b0d4c36dbef7b4e20e0ea3b14420871b6a36e444f5fc0c8969e42f201d4e78f11249d5585e8fe9b8565216dd76feacabdc6f7609ffe4f8f025aa9bc94cd93a2f4f87d1572cd2cb5961a3812985ee3a3b5a34ec176c3c2843dc970a1c42cddd1942a93c7ec59d418852946ca448b608646ba79ade3897feab0a9733ca7f3d5b9b35738815b282575527d898defd5eacd9dba6d5226e56de4dec072a3227bb569cdad4d86cd9d23a50c5dd3e6d0b794eea1d3918e6dd8837f902731bddd1dcee7b1285535caa9c2e126b83661b533a1d3c5705dd7f962f477d17bd3adeffe44ca0fee70fa3ac5204b2b0fc483a93356dab17bb09cf39af310a86e9db279d01c5325f2fadb42da393cd17f24e41166a9cea91784d82d6aa9656cc7735ed681eb891cd4eb4322adccb71203f9e655bf8959d57f915b01188c8ee28c46beee022d6ac7259a0c694e7cf2c887175ee2dbe091b3bb08b011e5c027bc75700795122adb79fcbd06b4c6ab6eed9088b5ba05ff8a370eb80758a618a86f2b523ad0779f6e6a5d27a601ce0e78ea54bf03b77f37b7ff35c8950c6ce446f3555949d9d89b2953f6cd7664b1547f3a1db839720cc84b619a4949f9c00a8e7d0581ab101cc3aed626e6947b743a4e234c2cde9cc77f9d43bec73d28d7c2483e21df06d1d524f27b63297c34a162ccef0f01ec54ec28d19fec63e4c38409ebf24b0b6c27ccff562183e6b2499bdb62d0c1ed95d22397ebae0cf212c25d7c96a741d9d203e0ad5c1df3a6ea9b1af95b588b8ab7f6c78ab29bd0dbfb26ca70915a3d8b895636dc73aaaa13cc94855ff347ca258eda03deb8f99f7623cca7d4e72acb002072a5e4b681712e104f0a9431c39c58a50c82188c94cdd3ad2e8a2e57d9afb3a15ce530448884288e65aecd86c6db7a022803c14ef4734db69f7300c6f229dfad3dc591905b137f5eb5b8f608eb7b1cd19990ac4545dfbda682737cd3fd750c334ff5086c7d805d20b81b9a3f086bc5ec26f97b5fb06d74f804708183b8c1dd1421f80f0cc9fec100af04a5f96f23abc70ae404fd4a6b6e919ee0f650e2e5a1a9cd8450de23b3027a6aaba201a0fe1b483218c0889b23ef90c56b73155db308dd84b74ebee76b70f91510fe43befc5f7e446a780b23c3d14a5704a83f3101dee6705e830416c57c5279d0cd39c297dfc3c48ab5303c0a21c38a75f451cc04a5cb27cc74519916182c5ad12564837f05881ee841e19de83a4b11b71bc01df632f36f530422bd0371b69befff5370add68570f60ebd2faf6771718275bd1485ac3be2d04be47249fabfc121b7c8b1469f240ef261c7fb266bbc4814447894c99b6a65819947bbee7f8d47244747061ec6326a428b6f203918ea84ecd45c7ad8d2d8097875186fe3189e296e6037954766745ab7dd59d6223d3e336d6b5a49519b46aeeb32da0d56ac60c334c0d23a8588284ca33c1265d665bede07a0bbc844448b2798548b922a7bdd33073760af97763a792cb6ca06b53a81050d33c13914ec2c0c9838d688d92ee3497298fafa857c2be0737b525863289de29815f679a9330e3ba3751a85dff1266e185007843ae58a6e96eacf41565f3b2b46ce4940546a9a5fa7ed385709a9116bc7b9323a2ec345f90b8ca845fb9b84d82526f97c92f5efdf902cc40a09d576819fffc367663c91fb3091b44c33590553bbf9ab1d8b8f00e7658544d5f1baef0b17c55a323e555d040545962d2eda133fdb6a8866a5bce01516db623bc5312d67cd577ef89da68f78676382ff5c4c80d0025ccef06acaebee249013365b8093d8b781fcfb59493a669d7b48bc159857f19b0b53c85375a7d398d60f6a7cf37d1422821a57632b735923ec9cde3193b50cde39b7eae8d1f469791db1bbb0c85d3d34f82955d752e97a462bfd01ece84b0773bfd5075f57c119c79a3b0da3ca18e6340ac0fb60af40be9754fcfca574dbbbdfce6ca2511d52c45d77002c38d60dd32384b589e4f6b086e26b1122e7cdf1b091628791fcf2ea26165be83784d91919b9c4ba0dc79883b06a3726f1ece713b32e98ab0c07fedffe1b38b4121216955da7d70178876ef3f4e0e81cf6cc063c7efbf94a817587b960267423d3214673a17e239a928dea5319039ac780d2980383288ae3713fb7173f182a3e30aa26e876c9f1c18dfbfecc418192323eb01a9c0c0c21d8633c22f5d591d8be01e4e72aa4e61a4de41a33d0afd155d42ebe8521b712c0da4eb41a1432d4dff6268fec8e56ca348a151767f1f1930c738ee711d186d5da17592b1fdccafc4daaf4cf2a21703442f23e70fc8dc3abcca9abfd268d78ba6ff09e18a9de3d39fa1ad0a415014372da7f8f7ff1389b210a25aaba6f1f7f5c24588f694477a009765d172e3c3c71ed254798b953f4ca14ecd718a91f912b6cf6b331479eddfb8db1333e4dae30d98573355da41b578f2bd1440f41f26a369b2e292d896c1c4c444d83aefd6dcb95fb41b5627be99f78b76ead9fd26af3f29ca335e41d83a4cee6c061d187ee3203ac248dc4c0c1a77b89c301c76c13754f6ce5bcd1ca1e133b1dd5ec584ec478b30f439c305150356b42bfbdb8e12af747e1ad774057d87a9d61e94bd13dc330e17ccc5a07db35185fd4980d8b57839e658b208a66154a20dde1ee52a2e327a46287ad5293169c9e413ec88f2157b373777b6a7a4656122085e4af8fb99a8ce4a2bb0c234a90a6d9f05bd6ae2f7f1ed16e7dd229c7e57179bcd6510ac49ad832014f736e504af71689e29f04837264b8332d71b4a70fdd0828e44c9a5bddbe5eef7e2b4a142e92dfd9b4a1a95b8f434650c6fbe4e589f01f96e1df584e8ab27a14ee1f53f05b3065d6565d000afb1744c9601ff884b741c6fd4b0bbf42894fdb17ad0a293c6204b9e3dc3fe5b3e6cc910e5ae7ae5addb1b19f05176d9f36c0450e7b080925e1790a8a083364187b18cf8e486994717450deead6aee757f7f916c101260f03c8ece556427eccbd0fe71435198e25ecfd149507d0bb6db6aab26b66f89657421a347e8bb818fa4f173d40b6c7ae59b22ff39c392b007bccea7193948b1f10b8052d7411e3ac529c88c37ec1ff890ccd9d5630a6ed55064a00f591052aaddee5201091114ed79c10149183da8b9a0862990cb2ff14d81d0c945e19f6af50b54cf4c2de31a841856f2af6608fd2b8751dc1d75ec6037e3d449b4b1f1332e42b50b7efb9227c902c58019029b993ae1f7ff892b698da4d2fcd5cf3ab630210d8322f0d99568c5288d9d4065998c02fb362f967aa37726af5a9337bd76b4423a2c964cd1341cb063fe89045ea52b07fd2799439399b5f54c220f806c3d505fe01f3829e131160a188be0e753a1b6a0e95dbf955ce92902ff1814f4ff16d4f26db82f914903a4c2ec7e350f857116de1e6131b9aa0943294597b63148c52955054a4299dfa30450c1d17de803d2285244686cc4eb8e45c8e8633d0127c4326b4781256b1c900877db20562efc084154127005456df7a4291a3f2f9f1e34aea0bbdfb4d5d0bdffa62e12a53622bb1384715166a1b400ecc6eb14fb62f336f2ee65e002f6122c8bbcb8da27045cfea71f5066cfbfd42bd5bc1f156aa3efc84f49c671ba4d5db6ee061b043fdc46a6a3bbd49a4835229846d01986eb7611bd3b5c6cda237ae55fe798660171e7868920be12def4a5e68c6e5a73fb133746e4087deb5cb7e1e5769c442cb2ea1b280b483c6388ba1dc1693f8640de33b0d3e71853e7a48c5d15a67f0bb0ba204b7de9c2fce3aeea8bd9aabc8ff997ff6c055adbe792df6057cd60352ea1c95decd4466d5bf5eef764240590fb8c530a5db0ba25f61717cafbffe85615686b8d5fd8e01db7dcef6c4ef2a10563e6ad238d5e9369faf358ec2ccaa6dd4be48ca2b556f44fdc21a2fc5c36e849ea8ca500f084d1a7b2c962bbf0d6a617143e0347b58ae70fa9213453809afc44c02dfa73961bd561fa9ae7a11c73ce8da5b843613874fbcfa965bed43cb30d0f681f532dcd37fb8a040612f96d73a2fddc3ff6a06db10eeff9f78bd4e8e7273564daaaf9e9d9824fb72f1813408a33eaaff79468ee5852fcd816c47cfece5b7ca859615253d8ccab21842bfb0aecef9c116815c71a0e5fc522d58dfc309e537cdf01a911740dcaec4d8796b3aa50c3988aaff359e5633cc4cba03729729d356e285fa220511945444b967cbe40ca16621541c21e4ec7e05bd8023f55b12ceb152690c50fe13d453f97d328e51f5c01f13744d501e1ad46f23192a3253108021aec93dc0e509563620e93632ced19aad0b9985d23e720d276d6578d90b9c97535c09c8f367aed1c989fcc8ae648c1fba062672831537569e347f36ca50cbe013522fa16666030e057632535126bbdee09590a2ab7bb6b4297f85edbca9e12adc6237690cff973ce22f7c822c18752f92cef5debf7da83c90eeedfd81f8e8a302c78cd8a7f2392a3009feae7024018e45048ab4ac61e696e6ab350fcd367fcc1602510edacf384320deb2b882cce9e0d8e5de3ea2e749db9f1228283edc3eafe1c03210506660a00967ccec6e511a354514b6c8cf438bd60209ce01f3b3280b3b4c2d1a88c5a7a69e50e056e884645e2d22ab259b15e661d67f34f53e8d0d334cc1ca2926ae8d1495e51109fb3448c975abdb3ed818e8a1d02a4df305cf759823118ccb92af151c281f11d622fbb0bd959b73a53829502cdaef5b55b1f9f7ec0f8bce9131d8638f48d1563e6db15e100b60dc85e8079299cfe5260c1a8c2f09e03b39fba7ff286336927a6a8c3644e1b2817728be778a7c7201345b97174e5eb27734b98a88f26119f2bbbc1296cc3132ba257e6bf9eb85ffc8edfe7f89c5b845b545eb87204ab4f64f3c759133896156ff8d888fb1cbec5f056785e9b2dafc54d4c5b0ef80558c2abcc551d6ae0ca0d34c03efc5c0c8ba997cd9fff2fd80cc13c06d41052814d1a0283dd54b7a5cdfa08a6c63fd507b74d88d5d92f2793dc2a50bd444a8715bc1883fe5e66151cec9041c8db4078b57d2c59e793f1848182f5de7c5706dc3d64414a7ec22b3dba22d2cd70e8e09d87a8a2059fba0ec20b5a2874dccf68283fc473c169faeb5b5119f2a6cb34013be3fcccb82ebba621099e315b11f9289cef089c4f73751a804ee2b58371d4e06ab477345c966d239bd625e83bc55331fa022110e31f2667ed3b21fe81c011b6b8dcc6ddd382f9aa9c4519f082fd38bf305a463a15caca19aa60aa18a8787d77bd88b10fb121e005fd00ea0d0e66600603c136b7848f6cc0cc03f594fe858e2c2a619f6e2abc8d784b2c7b8b1ce48101e26ab5573790a93af3810d2a3a7f872082b018e63ae0294fb769859b5ede76de95e685e25c5d3583a26e7027d9b9a7ae4243a10030bbfb11a6d61fb6a1904a939f9dc4ff8a83a7de535acc47ff5905f96ba4f3adcb8a5badbf28d33922467b03403214d32e0746a72ba43dd74bb7f10132ed74979b0bf8ffb9ae24c01ac19e47c1e2d004833b08351a6fe25b8a9aea3f80866ab6893c952128855b360da4eebf6598dc6353cc312dc223af963045fc96ac2e978027437c4dace157e4472d057b507ba0992891d37263b9eef6a104cb813648d6e40bf875e980162cdf113a1f34f9bb21858d1a6656677a8e620e9fe2a409347c79537632ad84dfe0b924e39f2d6dd9af048c7bd2a26d4d7b8a438fdb7d68da1b14ac3cc6e3da2a0109f3b91a0ad371e33706e78080e0b8e3f2a765a611fd124bba555669dba63a4da2acc2de3f005beb42bd4e870f87eaf3477e1d5a450b2b3f60467fa6b7d099165a81eba6f7d884bf5bde32833fba7a9ac8c4868de18cc2b74a003979aae27c2b0c8330df24da2b0afd1fd3bd43d244fcf0da102a01d71472d01cd89f3545dc1b824501951b8b07e5acf7288551f41cbfc725c451eb357b235e0b84d3ff6a199be69bc41183310276507f983236c1ba46b3132c2850654ddfe62ec92c0eb34acb5c5b5add030211aadf6ec95b575a01dd015865bc2957440311577174ab9f7a29556496f15c39b27f84fecc40c38b4c6fd421488dcdaa21b9df07cfe10df1bcce714156e87c3afc8005e6f351c17bd86c6a0c0d00ee09af268c21412ff54beb58f61c8f807b712d4a3f0ee6f9ec78cb29c34d966be1fe56e9b352db80d72408f65a42978bed0ee98bc6fc1f5953be9215c460a5faae3d4c54562dfc8b48cf8b9e1beb56281cf8217102fed02a903065a00c7ce1f909559d8f11f20100e24bc7b6c20eac4ed8e1be6651c61edb261cda4a43e5a898d157df4169e75405a325a709dc95acd62d8ce7011e2892e2118b40180f5b1e943907587e949df82c4af53abde092dcdb2740af0b8f708b6ca73eb2082b510314961460f737ff40c0a43f4e06f56731da190ddd23a13dbc8776d4ae145907ab79c94832106210c32195997db646a7299b05041a92865b343e9332158457d5530c51973ec7f20867a1c200810d896b9381dd76a909ea81b169ee9c658fc48b3164dcbf0bdf0d1a54c0eb0d4a4655e22585078197318148c3edec28055cb6a2f04207a53d0571f5d485ce369a7325fe4766731765ac46600537c2dd09dab4b639f7c55333591e8323c78da0da697fd8ac0fe0c008594eac49bcc</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">您好, 这里需要密码.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">来自遥远的东方的定理</summary>
    
    
    
    <category term="密码学" scheme="http://example.com/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/"/>
    
    
    <category term="python" scheme="http://example.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>RSA加密系统的20年</title>
    <link href="http://example.com/2022/10/29/RSA%E5%8A%A0%E5%AF%86%E7%B3%BB%E7%BB%9F%E7%9A%8420%E5%B9%B4/"/>
    <id>http://example.com/2022/10/29/RSA%E5%8A%A0%E5%AF%86%E7%B3%BB%E7%BB%9F%E7%9A%8420%E5%B9%B4/</id>
    <published>2022-10-29T11:21:48.000Z</published>
    <updated>2022-11-26T14:19:21.893Z</updated>
    
    <content type="html"><![CDATA[<h1 id="RSA加密系统的20年"><a href="#RSA加密系统的20年" class="headerlink" title="RSA加密系统的20年"></a>RSA加密系统的20年</h1><p><strong>原文：<a href="https://www.ams.org/notices/199902/boneh.pdf">Twenty Years of Attacks on the RSA Cryptosystem</a></strong></p><p><strong>作者：Dan Boneh@Stanford University(<a href="mailto:dabo@cs.stanford.edu">dabo@cs.stanford.edu</a>)</strong></p><p><strong>译者：Harper</strong></p><p>参考链接：</p><ul><li><a href="https://ctf-wiki.org/crypto/asymmetric/rsa/rsa_coppersmith_attack/#boneh-and-durfee-attack">Coppersmith 相关攻击 - CTF Wiki</a></li><li><a href="https://paper.seebug.org/727/">二十年以来对 RSA 密码系统攻击综述</a></li></ul><h2 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a>背景介绍</h2><p>RSA密码系统由Ron Rivest, Adi Shamir和Len Adleman发明，在1977年8月的《科学美国人》杂志上首次公布。密码系统最常用于提供隐私和确保数字数据的真实性。目前，RSA被部署在许多商业系统中。它被网络服务器和浏览器用来保护网络传输，它被用来确保电子邮件的私密性和真实性，它被用来保护远程登录会话，它是电子信用卡支付系统的核心。简而言之，RSA常用于需要考虑数字数据安全性的应用程序中。</p><img src="/2022/10/29/RSA%E5%8A%A0%E5%AF%86%E7%B3%BB%E7%BB%9F%E7%9A%8420%E5%B9%B4/RSA%E4%BD%9C%E8%80%85.png" class="RSA是1977年由罗纳德·李维斯特（Ron Rivest）、阿迪·萨莫尔（Adi Shamir）和伦纳德·阿德曼（Leonard Adleman）一起提出的。当时他们三人都在麻省理工学院工作。RSA就是他们三人姓氏开头字母拼在一起组成的"><h2 id="RSA加密算法"><a href="#RSA加密算法" class="headerlink" title="RSA加密算法"></a>RSA加密算法</h2><p>我们遵循标准命名约定，使用Alice和Bob表示希望相互通信的两个通用方。我们使用Marvin来表示恶意的攻击者，希望窃听或篡改Alice和Bob之间的通信。</p><h3 id="参数设置"><a href="#参数设置" class="headerlink" title="参数设置"></a>参数设置</h3><ul><li>两个质数$p和q$，再计算得到$N &#x3D; p*q$</li><li>一个随机整数$e\in (1, φ(N))$,再计算$d \equiv e^{-1} \pmod{\varphi(N)}$</li><li>公钥pk &#x3D; &lt;N,e&gt;</li><li>私钥sk &#x3D; &lt;N,d&gt;</li></ul><h4 id="参数生成方法"><a href="#参数生成方法" class="headerlink" title="参数生成方法"></a>参数生成方法</h4><p><strong>第一步，随机选择两个不相等的质数p和q。</strong></p><blockquote><p><strong>Alice</strong>选择了61和53。（实际应用中，这两个质数越大，就越难破解。）</p></blockquote><p><strong>第二步，计算p和q的乘积N。</strong></p><blockquote><p>Alice就把61和53相乘。</p><p>N &#x3D; 61×53 &#x3D; 3233</p></blockquote><p>N的长度就是密钥长度。3233写成二进制是110010100001，一共有12位，所以这个密钥就是12位。实际应用中，RSA密钥一般是1024位，重要场合则为2048位。</p><p><strong>第三步，计算N的欧拉函数φ(N)。</strong></p><blockquote><p>N是质数，则 φ(N)&#x3D;N-1<br>N &#x3D; p1 × p2<br>φ(N) &#x3D; φ(p1p2) &#x3D; φ(p1)φ(p2)<br>&#x3D;&gt; φ(N) &#x3D; (p-1)(q-1)</p></blockquote><p>Alice算出φ(3233)等于60×52，即3120。</p><p><strong>第四步，随机选择一个整数e，条件是1&lt; e &lt; φ(N)，且e与φ(N) 互质。</strong></p><p>Alice就在1到3120之间，随机选择了17。（实际应用中，常常选择65537。）</p><p><strong>第五步，计算e对于φ(N)的模反元素d。</strong></p><p>所谓”模反元素”就是指有一个整数d，可以使得ed被φ(N)除的余数为1,故$d \equiv e^{-1} \pmod{\varphi(N)}$</p><blockquote><p>ed ≡ 1 (mod φ(N))</p></blockquote><p>这个式子等价于</p><blockquote><p>ed - 1 &#x3D; kφ(N)</p></blockquote><p>于是，找到模反元素d，实质上就是对下面这个二元一次方程求解，使用拓展欧几里得算法即可</p><blockquote><p>ex + φ(N)y &#x3D; 1</p></blockquote><p><strong>第六步，将N和e封装成公钥，N和d封装成私钥。</strong></p><p>在Alice的例子中，N&#x3D;3233，e&#x3D;17，d&#x3D;2753，所以公钥就是 (3233,17)，私钥就是（3233, 2753）。</p><p>实际应用中，公钥和私钥的数据都采用<a href="https://link.zhihu.com/?target=https://zh.wikipedia.org/zh-cn/ASN.1">ASN.1</a>格式表达。</p><h3 id="加密"><a href="#加密" class="headerlink" title="加密"></a>加密</h3><p>密文是一个整数m属于乘法群$\mathbb{Z^*_{N}}$，即$m \in \mathbb{Z^*_{N}}$</p><p>计算密文ciphertext简称c，需要用到公钥pk&#x3D;&lt;N,e&gt;</p><blockquote><p>$c \equiv m*e \pmod{N}$</p></blockquote><p>Alice的公钥是 (3233, 17)，Bob的m假设是65，那么可以算出下面的等式：</p><blockquote><p>65^17 ≡ 2790 (mod 3233)</p></blockquote><p>于是，c等于2790，Bob就把2790发给了Alice。</p><h4 id="参数生成的效率"><a href="#参数生成的效率" class="headerlink" title="参数生成的效率"></a>参数生成的效率</h4><p>RSA密钥对的生成方法是随机选取两个$\cfrac{n}{2}$位素数并将其相乘得到N。然后，对于给定的加密$ e &lt; \varphi(N)$，使用扩展欧氏算法计算$d \equiv e^{-1} \pmod{N}$。</p><p>由于素数集非常密集，因此可以快速生成一个随机的$\cfrac{n}{2}$位素数，方法是选取随机的$\cfrac{n}{2}$位整数并用**概率素数检验(如Fermat素性检验法)**来检验每个整数的素数。</p><p>总体来说，生成素数还是比较快的，openssl生成一个1024位的素数在毫秒级即可实现。</p><h3 id="解密"><a href="#解密" class="headerlink" title="解密"></a>解密</h3><p>Alice拿到Bob发来的2790以后，就用自己的私钥(3233, 2753) 进行解密。可以证明，下面的等式一定成立：</p><blockquote><p>$m \equiv c^d \pmod{N}$</p></blockquote><p>也就是说，c的d次方除以N的余数为m。现在，c等于2790，私钥是(3233, 2753)，那么，Alice算出</p><blockquote><p>2790^2753 ≡ 65 (mod 3233)</p></blockquote><p>因此，Alice知道了Bob加密前的原文就是65。</p><h3 id="解密正确性的证明"><a href="#解密正确性的证明" class="headerlink" title="解密正确性的证明"></a>解密正确性的证明</h3><p>这里需要使用<a href="https://zhuanlan.zhihu.com/p/35060143">Euler定理</a>,即</p><blockquote><p>如果正整数 n 和整数 a 互质，那么就有<br>$a^{\varphi(n)}≡1\pmod{n})$<br>其中<strong>欧拉函数</strong> φ(n) 是「小于 n 的正整数中和 n 互质的数」的个数</p></blockquote><p>下面进入正式的证明过程</p><blockquote><p>$$<br>c^d \equiv (m^e)^d \equiv m^{ed} \<br>\because e<em>d \equiv 1 \pmod{\varphi(N)} \<br>\therefore e</em>d&#x3D;k<em>\varphi(N)+1 ; where ; k \in \mathbf{Z} \<br>\therefore m^{ed} \equiv m^{k</em>\varphi(N)+1} \equiv m^{k<em>\varphi(N)} <em>m \pmod{N} \<br>with;the ; help ; of ; Euler ;theorem:m^{\varphi(N)} \equiv1 \pmod{N}\<br>so: ; m^{ed} \equiv m^{k</em>\varphi(N)+1} \equiv m^{k</em>\varphi(N)} <em>m \equiv  1</em>m\equiv m \pmod{N}<br>$$</p></blockquote><h3 id="安全性分析"><a href="#安全性分析" class="headerlink" title="安全性分析"></a>安全性分析</h3><h4 id="数学难题-大整数的素数分解"><a href="#数学难题-大整数的素数分解" class="headerlink" title="数学难题-大整数的素数分解"></a>数学难题-大整数的素数分解</h4><p>我们可以看到，如果不知道d，就没有办法从c求出m。而前面已经说过，要知道d就必须分解N，这是极难做到的，因为至今为止大整数的素数分解依然是一个难题，所以RSA算法保证了通信安全</p><h4 id="语义安全-semantic-security"><a href="#语义安全-semantic-security" class="headerlink" title="语义安全-semantic security"></a>语义安全-semantic security</h4><p>RSA不是一个语义安全的加密算法，所谓语义安全，我们不能从密文中获得任何关于明文的信息，比如一段话的第一个字母，一段话中某个数字出现的次数等等。</p><p>拿RSA举例，我们可以很简单的获得m在N上的雅各比符号</p><h2 id="基本攻击"><a href="#基本攻击" class="headerlink" title="基本攻击"></a>基本攻击</h2><p>我们首先描述一些老的基本攻击，这些攻击说明了RSA的公然滥用情况。虽然存在许多这样的攻击，但我们仅举两个例子。</p><h3 id="Common-modulus-共模"><a href="#Common-modulus-共模" class="headerlink" title="Common modulus-共模"></a>Common modulus-共模</h3><p>为了避免为每个用户生成不同的模数$N&#x3D;p*q$，人们可能希望一劳永逸地固定使用一个$N$，所有用户都使用相同的$N$。可信的中央机构可以向用户提供唯一的一对参数$&lt;e_i,d_i&gt;$，用户从其中生成公钥$&lt;N,e_i&gt;$和私钥$&lt;N,d_i&gt;$。</p><p>乍一看，这似乎行得通：为Alice准备的密文$c &#x3D; m^{e_a} \pmod{N}$无法由Bob解密，因为Bob不知道$d_a$。但是，这是不正确的，由此产生的系统是不安全的。事实上，Bob可以使用他自己的指数$&lt;e_b,d_b&gt;$来分解模数$N$。一旦被分解，Bob就可以从她的公钥中计算出Alice的私钥。Simmons的这一观察结果表明，RSA模不应被一个以上的实体使用。</p><h3 id="Blinding-盲化"><a href="#Blinding-盲化" class="headerlink" title="Blinding-盲化"></a>Blinding-盲化</h3><p>设$&lt;N,d&gt;$是Bob的私钥，而$&lt;N,e&gt;$是相应的公钥。假设攻击者Marvin想要Bob的签名$m^d_{Bob} \pmod{N} \in \mathbb{Z^{\ast}_N}$。当然Bob不傻，他拒绝签署。但是Marvin可以尝试以下方法：他随机选择一个$r \in \mathbb{Z^{\ast}<em>N}$并设$m’ &#x3D; r^e*m</em>{Bob}$。然后他让Bob在随机消息$m’$上签名。Bob可能愿意在看上去没什么问题的上签名，但是回想一下$S’&#x3D;(m’)^d \mod{N}$，Marvin现在简单地计算$S &#x3D; S’&#x2F;r$就得到Bob在初始上的签名$S$。</p><p>事实上：<br>$$<br>S^e &#x3D; (S’)^e&#x2F;(r^e)&#x3D;(M’)^{ed}&#x2F;r^e \equiv M’&#x2F;r^e &#x3D; M \pmod{N}<br>$$<br>这种称为盲化的技术使Marvin能够在他选择的消息上获得有效的签名，方法是让Bob在随机的”盲化”消息上签名。Bob不知道他实际在签名的是什么消息。由于大多数签名方案在签名之前对消息应用”单向散列”算法，因此此种攻击倒不是一个严重的问题。尽管我们将盲化描述为一种攻击，但它实际上是实现匿名数字现金所需的一个有用属性(可以用来购买商品的现金，但不会透露购买者的身份）</p><h2 id="Low-Private-Exponent-低解密指数攻击"><a href="#Low-Private-Exponent-低解密指数攻击" class="headerlink" title="Low Private Exponent-低解密指数攻击"></a>Low Private Exponent-低解密指数攻击</h2><h3 id="理论"><a href="#理论" class="headerlink" title="理论"></a>理论</h3><p>解密使用参数d，如果d非常小，那么可以用此方法进行解密。</p><p><strong>Theorem 2 (M. Wiener)</strong> 令 $N &#x3D; pq$ ，这里 $q &lt; p &lt; 2q$ . 如果$ d &lt; 1&#x2F;3  N^{1&#x2F;4}$ 。 给定私钥对$&lt;N,e&gt;$ ，这里$e*d &#x3D; 1 \mod{\varphi(N)}$ , Marvin 可以快速的复原参数 $d$.</p><blockquote><p>证明详见论文《<strong>TWENTY YEARS OF ATTACKS ON THE RSA CRYPTOSYSTEM</strong>》</p><p>最后给出结论：<br>$$<br>\left| \cfrac{e} {N} - \cfrac{k} {d} \right| \le \cfrac{1} {dN^{1&#x2F;4} } &lt; \cfrac{1}  {2d^2} \<br>这里k满足：k\varphi(N)-ed&#x3D;1<br>$$</p></blockquote><p>这是一个经典的逼近关系，两个分数在约束内非常逼近。首先$k\varphi(N)-ed&#x3D;1$,所以$gcd(k,d)&#x3D;1$，即k和d互素，分数$\cfrac{k} {d}$是一个最简分数。虽然d很小，但也只是相对于N（1024bits）比较小，实际上d也有上百比特的长度，所以$\cfrac{1} {2d^2}$是一个很小的数，由上面的不等式得到$\cfrac{e} {N}$是很接近于$\cfrac{k} {d}$的。大致的思路就是在$\cfrac{e}{N}$附近寻找一个小数，把小数按照分数的形式展开，分母就是我们想要找的参数$d$，但实际上并没有这么简单(论文中使用连分数展开)。</p><p>由于通常都是1024位，因此$d$必须至少256位长才能避免这种攻击。这对于诸如”智能卡”之类的低功耗设备来说是不幸的，因为小就能节省大量能耗。 然而，并不是毫无办法。Wiener提出了许多能够实现快速解密并且不易受其攻击影响的技术</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><p>使用python库owiener实现</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> owiener<br>e = <span class="hljs-number">3047442173541658754667464233797118324917469250436575767227172319344577259865313428705759330024959317716760816959590728238918140105663188172228696589411452947738069773833351725455888549656717874059636289036277785342126992626060696063089487811946920569580454880169977542532087635095357205433679009382368108273</span><br><br>n = <span class="hljs-number">135568509670260054049994954417860747085442883428459182441559553532993752593294067458983143521109377661295622146963670193783017382697726454953197805014428888491744355387957923382241961401063461549210355871385000347645387907568135032087942016502668629010859519249039662555733548461551175133582871220209515648241</span><br><br>d = owiener.attack(e, n)<br><br>m=<span class="hljs-number">123123123123123123123123123123123113212312312312</span><br>c = <span class="hljs-built_in">pow</span>(m,e,n)<br>m_decrypted = <span class="hljs-built_in">pow</span>(c,d,n)<br><span class="hljs-built_in">print</span>(m_decrypted)<br></code></pre></td></tr></table></figure><p>计算得到d的值为</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-number">22299128035876669298809061693021648003426573977341841609779417036458441464337</span><br></code></pre></td></tr></table></figure><p>计算d的位数大概是<strong>254位</strong>,符合上面的分析，运算时间也是很快，用python基本秒出答案。</p><h2 id="Low-Private-Exponent-低加密指数攻击"><a href="#Low-Private-Exponent-低加密指数攻击" class="headerlink" title="Low Private Exponent-低加密指数攻击"></a>Low Private Exponent-低加密指数攻击</h2><p>为了减少加密或签名验证时间，习惯上使用一个小的公共指数。 e 的最小可能值为3，但为了击败某些攻击，建议使用$e &#x3D; 2^{16} + 1 &#x3D; 65537$。当使用65537时，签名验证需要 17 次乘法，而使用随机 $e &lt; \varphi(N)$ 时大约需要 1000 次乘法。所以对使用小e的攻击连绵不绝。</p><h3 id="Coppersmith理论"><a href="#Coppersmith理论" class="headerlink" title="Coppersmith理论"></a>Coppersmith理论</h3><p>对低公共指数 RSA 最有效的攻击是基于 Coppersmith的一个定理。 Coppersmith 定理有很多应用，这里只介绍其中的一部分。想要破解RSA，实际上可以看成一个解决函数零点的问题：<br>$$<br>x^e \equiv c \pmod{N}<br>$$<br>解出这个函数，就是我们想要做的事情，后面关于多项式环的论述也都是基于这个思想。</p><h4 id="前置定理"><a href="#前置定理" class="headerlink" title="前置定理"></a>前置定理</h4><p>首先介绍一个理论：</p><p><strong>Theorem 3 (Coppersmith)</strong>  Let N be an integer and $f \in \mathbb{Z}[x]$ be a monic polynomial of degree d. Set $X &#x3D; N ^{\frac{1} {d}- \epsilon } $ for some  $\epsilon \ge 0$. Then, given $ &lt; N , f &gt; $  Marvin can effciently find all integers  $\left| x_0 \right| &lt; X $  satisfying $f (x_0 ) &#x3D; 0 \mod{N} $. The running time is dominated by the time it takes to run the LLL algorithm on a lattice of dimension O (w ) with $w &#x3D; min(\frac{1} {\epsilon},log_2N )$.</p><p><font color="red">该定理提供了一种算法，可以有效地找方程$f(x) \equiv 0 \pmod{N}$ 的所有小于 $X &#x3D; N^{\frac{1}{d}} $的根</font></p><p>再给出一个引理：</p><p>首先我们定义范数的概念，给出多项式$h(x)&#x3D;\sum{a_ix^i} \in \mathbb{Z}$,定义范数$|h|^2 &#x3D; \sum{|a_i|^2}$</p><p><em><strong>Lemma 4</strong></em> <em>Let $h(x) \in \mathbb{Z}$ be a polynomial of degree d and let X be a positive integer. Suppose $|h(xX )| &lt; \cfrac{N}{d^{1&#x2F;2}} $ . If $|x_0| &lt; X$ satisfies $h(x_0) &#x3D; 0 \mod{N}$ , then $h(x_0) &#x3D; 0$ holds over the integers.</em></p><p>这个引理告诉我们：<font color="red">如果满足前置条件，$f(x) \equiv 0 \pmod{N}$的根，也是$f(x)&#x3D;0$在整数域上的根</font>，但实际上函数$f(x)$一般都没有这么小的范数能满足前置条件。我们可以构造一个函数$h(x)&#x3D;g(x)*f(x)$，这个函数$h(x)$应该有比较小的范数来满足前置条件。这相当于一个问题，找到$f(x),xf(x),x^2f(x),\dots,x^rf(x)$的一个线性组合，这个线性组合就是函数$h(x)$，且有较低的范数。</p><h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p>前面我们介绍过，想要找到函数$h(x)$，实际上就是找一个线性组合，Dan Boneh在论文中叙述了一个基于格中LLL算法的解决方案。大家可以细看论文(作者关于格的理论已经忘得差不多了)，以后咱再补充。</p><h3 id="Hastad广播攻击"><a href="#Hastad广播攻击" class="headerlink" title="Hastad广播攻击"></a>Hastad广播攻击</h3><p>所谓广播，就是一个人把消息发给很多人，这里我们假设假设 Bob 希望将加密消息 M 发送给多个参与方 $P_1, P_2, \dots ,P_K $。每一方都有自己的 RSA 密钥 $pk&#x3D;&lt;N_i,e_i&gt;$ 。我们假设 M 小于所有的$N_i$ ，即$M&lt;min(N_1,N2, \dots , N_K)$。为了发送 M，天真的Bob 使用每个公钥对其进行加密，并将第 i 个密文发送给 第i个参与方$P_i$。攻击者 Marvin 可以在 Bob 视线之外窃听连接并收集 k 个被传输的密文。</p><p>为了便于大家理解，我们举一个例子来说明：</p><p>我们假定所有公共指数$e_i&#x3D;3$，如果参与方的个数$K \ge 3$那么marvin可以破解出明文M，事实上破解只需解下面一个方程即可：<br>$$<br>\begin{equation}<br>    \begin{cases}<br>    C_1 \equiv M^3 \mod{N_1}\<br>    C_2 \equiv M^3 \mod{N_2}\<br>    C_3 \equiv M^3 \mod{N_3}<br>    \end{cases}<br>\end{equation}<br>$$<br>这里假定$gcd(N_i,N_j)&#x3D;1$，即任意两个N之间互素，否则我们可以用$N_i&#x2F;N_j$很简单的求出他们的公因子，从而复原出$p和q$，这个假定是有意义的。对于上面的方程，我们使用中国剩余定理(CRT)解出结果即为明文。</p>]]></content>
    
    
    <summary type="html">它已经存在很久了，但我们仍然无法完全破解它</summary>
    
    
    
    <category term="密码学" scheme="http://example.com/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/"/>
    
    
    <category term="RSA" scheme="http://example.com/tags/RSA/"/>
    
  </entry>
  
  <entry>
    <title>Fermat素性检验</title>
    <link href="http://example.com/2022/10/29/Fermat%E7%B4%A0%E6%80%A7%E6%A3%80%E9%AA%8C/"/>
    <id>http://example.com/2022/10/29/Fermat%E7%B4%A0%E6%80%A7%E6%A3%80%E9%AA%8C/</id>
    <published>2022-10-29T07:00:59.000Z</published>
    <updated>2022-12-05T04:40:55.189Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Fermat素性检验"><a href="#Fermat素性检验" class="headerlink" title="Fermat素性检验"></a>Fermat素性检验</h1><h2 id="实验环境"><a href="#实验环境" class="headerlink" title="实验环境"></a>实验环境</h2><blockquote><ul><li>电脑：联想拯救者R9000p</li><li>cpu：AMD Ryzen 7 5800H</li><li>内存：16GB</li><li>操作系统：windows11</li><li>python版本：3.10</li></ul></blockquote><p>目标：</p><ul><li>掌握python基本函数库的使用</li><li>熟悉抽象代数的基本定理如Fermat小定理的使用</li><li>理解Fermat素性检验的原理，并编程实现</li><li>测试一些大数，以一定概率检验其素性</li></ul><h2 id="Fermat素性检验介绍"><a href="#Fermat素性检验介绍" class="headerlink" title="Fermat素性检验介绍"></a>Fermat素性检验介绍</h2><h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p><strong>费马素性检验</strong>是一种素数判定法则，利用<a href="https://baike.baidu.com/item/%E9%9A%8F%E6%9C%BA%E5%8C%96%E7%AE%97%E6%B3%95/6233182?fromModule=lemma_inlink">随机化算法</a>判断一个数是<a href="https://baike.baidu.com/item/%E5%90%88%E6%95%B0/49186?fromModule=lemma_inlink">合数</a>还是<em>可能是</em>素数。</p><h3 id="Fermat小定理"><a href="#Fermat小定理" class="headerlink" title="Fermat小定理"></a>Fermat小定理</h3><p>$$<br>对\forall(a,p)&#x3D;1,p为质数\<br>\exists a^{p-1} \equiv 1 \pmod{p}<br>$$</p><blockquote><p>证明：</p><p>${1,2,3,4…p-1}$是p的既约剩余系</p><p>$\because a,p$互质</p><p>$\therefore {a<em>1 , a</em>2 , a<em>3 , a</em>4 ,\dots,a*(p-1)}$也为p的既约剩余系</p><p>$\therefore 1<em>2</em>3 \dots <em>(p-1)≡a</em>2<em>a</em>3*a……(p-1)*a  \pmod{p}$</p><p>化简得$a^{p-1} \equiv 1 \pmod{p}$</p></blockquote><h3 id="Fermat素性检验基本原理"><a href="#Fermat素性检验基本原理" class="headerlink" title="Fermat素性检验基本原理"></a>Fermat素性检验基本原理</h3><p>根据<a href="https://baike.baidu.com/item/%E8%B4%B9%E9%A9%AC%E5%B0%8F%E5%AE%9A%E7%90%86/4776158?fromModule=lemma_inlink">费马小定理</a>：如果<em>p</em>是素数，$1\leq a \leq p-1$</p><p>那么<br>$$<br>a^{p-1} \equiv 1 \pmod{p}<br>$$<br>如果我们想知道<em>n</em>是否是素数，我们在中间选取<em>a</em>，看看上面等式是否成立。</p><ul><li>如果对于数值<em>a</em>等式不成立，那么<em>n</em>是合数。</li><li>如果有很多的<em>a</em>能够使等式成立，那么我们可以说<em>n</em>可能是素数，或者<a href="https://baike.baidu.com/item/%E4%BC%AA%E7%B4%A0%E6%95%B0/9262664?fromModule=lemma_inlink">伪素数</a>。</li></ul><p>在我们检验过程中，有可能我们选取的<em>a</em>都能让等式成立，然而n却是合数，所以最终得到的结果是，<font color = "red">我们以一定概率确定p是否为素数</font></p><h3 id="Fermat素性检验流程"><a href="#Fermat素性检验流程" class="headerlink" title="Fermat素性检验流程"></a>Fermat素性检验流程</h3><p>给定奇整数 $m\geq3$ 和安全参数 $k&#x3D;5$<br>（1） 随机选取整数$a$,令$2\leq a \leq m-2$<br>（2） 计算$g&#x3D;(a, m)$，如果$g &#x3D;1$，转（3）；否则，跳出，m为合数<br>（3） 计算$r &#x3D;a^{m-1}\pmod{m}$，如果r&#x3D;1,m可能是素数，转（1）；否则，跳出，m为合数<br>（4） 重复上述过程k次，如果每次得到m可能为素数，则m为素数的概率为$1- \frac1{2^k}$ 。</p><img src="/2022/10/29/Fermat%E7%B4%A0%E6%80%A7%E6%A3%80%E9%AA%8C/%E6%B5%81%E7%A8%8B%E5%9B%BE.png" class="流程图"><h2 id="python代码"><a href="#python代码" class="headerlink" title="python代码"></a>python代码</h2><p>需要导入math模块求最大公因数</p><p>需要导入random模块来产生随机数</p><p>求$r &#x3D;a^{m-1}\pmod{m}$必须使用pow(a,num-1,num)函数一边乘法一边取模运算速度较快，不能先算$a^{m-1}$再取模，否则时间太长算不出来</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">is_prime</span>(<span class="hljs-params">num, k=<span class="hljs-number">7</span></span>):<br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(k):<br>        a=random.randrange(<span class="hljs-number">2</span>,num-<span class="hljs-number">2</span>)<br>        <span class="hljs-keyword">if</span> math.gcd(a, num)!=<span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>, <span class="hljs-number">1</span>-(<span class="hljs-number">0.2</span>)**k<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">pow</span>(a,num-<span class="hljs-number">1</span>,num)!=<span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span> , <span class="hljs-number">1</span>-(<span class="hljs-number">0.2</span>)**k<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span> , <span class="hljs-number">1</span>-(<span class="hljs-number">0.2</span>)**k<br>m1 = <span class="hljs-number">743476040059754298379331647007684224429004972336533937786799284757790400765316630522369642718204165253922832684184615021404737105614714107158733905598636152327037707290538422718453498125366750918857659068838460954633737911274770976191590193809661578032117496009853673140977556559136466107768672598883924301125589893895001253674886100289402530711221893</span><br>m2 = <span class="hljs-number">5434520625653357625890820149570485819447986258433769976634917091398967074086679540928507095017715540385352266035820823142060119390272763774034231321959236056764511968630360067353876686142517564224926196131349204754111599877101485686283117193149781387816214484583521923017500621725053392290279263586984207169423800476914654441473576611460323772832328657</span><br>m3 = <span class="hljs-number">876147742992673125957404768949712978720573116974723188491435550196169965040848206868200084918233743662847668000971402407461887306389122707315529364807593342507936022301657320206278702095378618110195051280478534126716517153056984269659532882692418682262081495725304483536777013188527470348249542840277926802938912332306310470632601156641005608958891</span><br>m4 = <span class="hljs-number">9876147742992673125957404768949712978720573116974723188491435550196169965040848206868200084918233743662847668000971402407461887306389122707315529364807593342507936022301657320206278702095378618110195051280478534126716517153056984269659532882692418682262081495725304483536777013188527470348249542840277926802938912332306310470632601156641005608958891</span><br><br>result , pr = is_prime(m4)<br><span class="hljs-keyword">if</span> result:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;该数以&quot;</span>,pr*<span class="hljs-number">100</span>,<span class="hljs-string">&quot;%的概率判定为素数&quot;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;该数不是素数&quot;</span>)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">不确定的东西让人痛苦不已</summary>
    
    
    
    <category term="密码学" scheme="http://example.com/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/"/>
    
    
    <category term="python" scheme="http://example.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>latex常用数学公式</title>
    <link href="http://example.com/2022/10/25/latex%E5%B8%B8%E7%94%A8%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F/"/>
    <id>http://example.com/2022/10/25/latex%E5%B8%B8%E7%94%A8%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F/</id>
    <published>2022-10-25T03:57:26.000Z</published>
    <updated>2022-12-05T05:18:33.310Z</updated>
    
    <content type="html"><![CDATA[<h1 id="latex常用数学公式"><a href="#latex常用数学公式" class="headerlink" title="latex常用数学公式"></a>latex常用数学公式</h1><p>最近需要写一些文档，里面会有大量的公式，写出好看的公式的过程真的很治愈:cat:,这一期博客主要来介绍一些常用的latex公式，内容很干。<font color = "red">自己用markdown写的公式，渲染出来都是对的，但是放到博客上不知道怎么回事有一些奇奇怪怪的错误</font>，大家直接粘贴代码就行。</p><p>参考：<br><a href="https://artofproblemsolving.com/wiki/index.php/LaTeX:Symbols">https://artofproblemsolving.com/wiki/index.php/LaTeX:Symbols</a><br><a href="https://artofproblemsolving.com/wiki/index.php/LaTeX:Commands">https://artofproblemsolving.com/wiki/index.php/LaTeX:Commands</a></p><h2 id="各种类型的符号表"><a href="#各种类型的符号表" class="headerlink" title="各种类型的符号表"></a>各种类型的符号表</h2><h3 id="数集符号"><a href="#数集符号" class="headerlink" title="数集符号"></a>数集符号</h3><table><thead><tr><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th></tr></thead><tbody><tr><td align="center">$\mathbb{R}$</td><td align="center">\mathbb{R}</td><td align="center">$\mathbf{R}$</td><td align="center">\mathbf{R}</td><td align="center">$\mathcal{R}$</td><td align="center">\mathcal{R}</td><td align="center">$\mathfrak{R}$</td><td align="center">\mathfrak{R}</td></tr><tr><td align="center">$\mathbb{Z}$</td><td align="center">\mathbb{Z}</td><td align="center">$\mathbf{Z}$</td><td align="center">\mathbf{Z}</td><td align="center">$\mathcal{Z}$</td><td align="center">\mathcal{Z}</td><td align="center">$\mathfrak{Z}$</td><td align="center">\mathfrak{Z}</td></tr><tr><td align="center">$\mathbb{Q}$</td><td align="center">\mathbb{Q}</td><td align="center">$\mathbf{Q}$</td><td align="center">\mathbf{Q}</td><td align="center">$\mathcal{Q}$</td><td align="center">\mathcal{Q}</td><td align="center">$\mathfrak{Q}$</td><td align="center">\mathfrak{Q}</td></tr></tbody></table><h3 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h3><table><thead><tr><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th></tr></thead><tbody><tr><td align="center">$$\pm$$</td><td align="center">\pm</td><td align="center">$\mp$</td><td align="center">\mp</td><td align="center">$\times$</td><td align="center">\times</td></tr><tr><td align="center">$$\div$$</td><td align="center">\div</td><td align="center">$\cdot$</td><td align="center">\cdot</td><td align="center">$\ast$</td><td align="center">\ast</td></tr><tr><td align="center">$$\star$$</td><td align="center">\star</td><td align="center">$\dagger$</td><td align="center">\dagger</td><td align="center">$\ddagger$</td><td align="center">\ddagger</td></tr><tr><td align="center">$$\amalg$$</td><td align="center">\amalg</td><td align="center">$\cap$</td><td align="center">\cap</td><td align="center">$\cup$</td><td align="center">\cup</td></tr><tr><td align="center">$\uplus$</td><td align="center">\uplus</td><td align="center">$\sqcap$</td><td align="center">\sqcap</td><td align="center">$\sqcup$</td><td align="center">\sqcup</td></tr><tr><td align="center">$\vee$</td><td align="center">\vee</td><td align="center">$\wedge$</td><td align="center">\wedge</td><td align="center">$\oplus$</td><td align="center">\oplus</td></tr><tr><td align="center">$\ominus$</td><td align="center">\ominus</td><td align="center">$\otimes$</td><td align="center">\otimes</td><td align="center">$\circ$</td><td align="center">\circ</td></tr><tr><td align="center">$\bullet$</td><td align="center">\bullet</td><td align="center">$\diamond$</td><td align="center">\diamond</td><td align="center">$\lhd$</td><td align="center">\lhd</td></tr><tr><td align="center">$\rhd$</td><td align="center">\rhd</td><td align="center">$\unlhd$</td><td align="center">\unlhd</td><td align="center">$\unrhd$</td><td align="center">\unrhd</td></tr><tr><td align="center">$\oslash$</td><td align="center">\oslash</td><td align="center">$\odot$</td><td align="center">\odot</td><td align="center">$\bigcirc$</td><td align="center">\bigcirc</td></tr><tr><td align="center">$\triangleleft$</td><td align="center">\triangleleft</td><td align="center">$\Diamond$</td><td align="center">\Diamond</td><td align="center">$\bigtriangleup$</td><td align="center">\bigtriangleup</td></tr><tr><td align="center">$\bigtriangledown$</td><td align="center">\bigtriangledown</td><td align="center">$\Box$</td><td align="center">\Box</td><td align="center">$\triangleright$</td><td align="center">\triangleright</td></tr><tr><td align="center">$\setminus$</td><td align="center">\setminus</td><td align="center">$\wr$</td><td align="center">\wr</td><td align="center">$\sqrt{x}$</td><td align="center">\sqrt{x}</td></tr><tr><td align="center">$x^{\circ}$</td><td align="center">x^{\circ}</td><td align="center">$\triangledown$</td><td align="center">\triangledown</td><td align="center">$\sqrt[n]{x}$</td><td align="center">\sqrt[n]{x}</td></tr><tr><td align="center">$a^x$</td><td align="center">a^x</td><td align="center">$a^{xyz}$</td><td align="center">a^{xyz}</td><td align="center">$a_x$</td><td align="center">a_x</td></tr></tbody></table><h3 id="关系符号"><a href="#关系符号" class="headerlink" title="关系符号"></a>关系符号</h3><table><thead><tr><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th></tr></thead><tbody><tr><td align="center">$\le$</td><td align="center">\le</td><td align="center">$\ge$</td><td align="center">\ge</td><td align="center">$\neq$</td><td align="center">\neq</td></tr><tr><td align="center">$\sim$</td><td align="center">\sim</td><td align="center">$\ll$</td><td align="center">\ll</td><td align="center">$\gg$</td><td align="center">\gg</td></tr><tr><td align="center">$\doteq$</td><td align="center">\doteq</td><td align="center">$\simeq$</td><td align="center">\simeq</td><td align="center">$\subset$</td><td align="center">\subset</td></tr><tr><td align="center">$\supset$</td><td align="center">\supset</td><td align="center">$\approx$</td><td align="center">\approx</td><td align="center">$\asymp$</td><td align="center">\asymp</td></tr><tr><td align="center">$\subseteq$</td><td align="center">\subseteq</td><td align="center">$\supseteq$</td><td align="center">\supseteq</td><td align="center">$\cong$</td><td align="center">\cong</td></tr><tr><td align="center">$\smile$</td><td align="center">\smile</td><td align="center">$\sqsubset$</td><td align="center">\sqsubset</td><td align="center">$\sqsupset$</td><td align="center">\sqsupset</td></tr><tr><td align="center">$\equiv$</td><td align="center">\equiv</td><td align="center">$\frown$</td><td align="center">\frown</td><td align="center">$\sqsubseteq$</td><td align="center">\sqsubseteq</td></tr><tr><td align="center">$\sqsupseteq$</td><td align="center">\sqsupseteq</td><td align="center">$\propto$</td><td align="center">\propto</td><td align="center">$\bowtie$</td><td align="center">\bowtie</td></tr><tr><td align="center">$\in$</td><td align="center">\in</td><td align="center">$\ni$</td><td align="center">\ni</td><td align="center">$\prec$</td><td align="center">\prec</td></tr><tr><td align="center">$\succ$</td><td align="center">\succ</td><td align="center">$\vdash$</td><td align="center">\vdash</td><td align="center">$\dashv$</td><td align="center">\dashv</td></tr><tr><td align="center">$\preceq$</td><td align="center">\preceq</td><td align="center">$\succeq$</td><td align="center">\succeq</td><td align="center">$\models$</td><td align="center">\models</td></tr><tr><td align="center">$\perp$</td><td align="center">\perp</td><td align="center">$\parallel$</td><td align="center">\parallel</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">$\mid$</td><td align="center">\mid</td><td align="center">$\bumpeq$</td><td align="center">\bumpeq</td><td align="center"></td><td align="center"></td></tr></tbody></table><p>关系符号前面加一个n，就可以变成这些关系符号的反义</p><table><thead><tr><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th></tr></thead><tbody><tr><td align="center">$\nmid$</td><td align="center">\nmid</td><td align="center">$\nleq$</td><td align="center">\nleq</td><td align="center">$\ngeq$</td><td align="center">\ngeq</td></tr><tr><td align="center">$\nsim$</td><td align="center">\nsim</td><td align="center">$\ncong$</td><td align="center">\ncong</td><td align="center">$\nparallel$</td><td align="center">\nparallel</td></tr><tr><td align="center">$\not&lt;$</td><td align="center">\not&lt;</td><td align="center">$\not&gt;$</td><td align="center">\not&gt;</td><td align="center">$\not&#x3D;$</td><td align="center">\not&#x3D; or \neq or \ne</td></tr><tr><td align="center">$\not\le$</td><td align="center">\not\le</td><td align="center">$\not\ge$</td><td align="center">\not\ge</td><td align="center">$\not\sim$</td><td align="center">\not\sim</td></tr><tr><td align="center">$\not \approx$</td><td align="center">\not\approx</td><td align="center">$\not\cong$</td><td align="center">\not\cong</td><td align="center">$\not\equiv$</td><td align="center">\not\equiv</td></tr><tr><td align="center">$\not\parallel$</td><td align="center">\not\parallel</td><td align="center">$\nless$</td><td align="center">\nless</td><td align="center">$\ngtr$</td><td align="center">\ngtr</td></tr><tr><td align="center">$\lneq$</td><td align="center">\lneq</td><td align="center">$\gneq$</td><td align="center">\gneq</td><td align="center">$\lnsim$</td><td align="center">\lnsim</td></tr><tr><td align="center">$\lneqq$</td><td align="center">\lneqq</td><td align="center">$\gneqq$</td><td align="center">\gneqq</td><td align="center"></td><td align="center"></td></tr></tbody></table><h3 id="希腊字母"><a href="#希腊字母" class="headerlink" title="希腊字母"></a>希腊字母</h3><table><thead><tr><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th></tr></thead><tbody><tr><td align="center">$\alpha$</td><td align="center">\alpha</td><td align="center">$\beta$</td><td align="center">\beta</td><td align="center">$\gamma$</td><td align="center">\gamma</td><td align="center">$\delta$</td><td align="center">\delta</td></tr><tr><td align="center">$\epsilon$</td><td align="center">\epsilon</td><td align="center">$\varepsilon$</td><td align="center">\varepsilon</td><td align="center">$\zeta$</td><td align="center">\zeta</td><td align="center">$\eta$</td><td align="center">\eta</td></tr><tr><td align="center">$\theta$</td><td align="center">\theta</td><td align="center">$\vartheta$</td><td align="center">\vartheta</td><td align="center">$\iota$</td><td align="center">\iota</td><td align="center">$\kappa$</td><td align="center">\kappa</td></tr><tr><td align="center">$\lambda$</td><td align="center">\lambda</td><td align="center">$\mu$</td><td align="center">\mu</td><td align="center">$\nu$</td><td align="center">\nu</td><td align="center">$\xi$</td><td align="center">\xi</td></tr><tr><td align="center">$\pi$</td><td align="center">\pi</td><td align="center">$\varpi$</td><td align="center">\varpi</td><td align="center">$\rho$</td><td align="center">\rho</td><td align="center">$\varrho$</td><td align="center">\varrho</td></tr><tr><td align="center">$\sigma$</td><td align="center">\sigma</td><td align="center">$\varsigma$</td><td align="center">\varsigma</td><td align="center">$\tau$</td><td align="center">\tau</td><td align="center">$\upsilon$</td><td align="center">\upsilon</td></tr><tr><td align="center">$\phi$</td><td align="center">\phi</td><td align="center">$\varphi$</td><td align="center">\varphi</td><td align="center">$\chi$</td><td align="center">\chi</td><td align="center">$\psi$</td><td align="center">\psi</td></tr><tr><td align="center">$\omega$</td><td align="center">\omega</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr></tbody></table><p>一些大写的希腊字母</p><table><thead><tr><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th></tr></thead><tbody><tr><td align="center">$\Gamma$</td><td align="center">\Gamma</td><td align="center">$\Delta$</td><td align="center">\Delta</td><td align="center">$\Theta$</td><td align="center">\Theta</td><td align="center">$\Lambda$</td><td align="center">\Lambda</td></tr><tr><td align="center">$\Xi$</td><td align="center">\Xi</td><td align="center">$\Pi$</td><td align="center">\Pi</td><td align="center">$\Sigma$</td><td align="center">\Sigma</td><td align="center">$\Upsilon$</td><td align="center">\Upsilon</td></tr><tr><td align="center">$\Phi$</td><td align="center">\Phi</td><td align="center">$\Psi$</td><td align="center">\Psi</td><td align="center">$\Omega$</td><td align="center">\Omega</td><td align="center"></td><td align="center"></td></tr></tbody></table><h3 id="箭头"><a href="#箭头" class="headerlink" title="箭头"></a>箭头</h3><table><thead><tr><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th></tr></thead><tbody><tr><td align="center">$\gets$</td><td align="center">\gets</td><td align="center">$\to$</td><td align="center">\to</td></tr><tr><td align="center">$\leftarrow$</td><td align="center">\leftarrow</td><td align="center">$\Leftarrow$</td><td align="center">\Leftarrow</td></tr><tr><td align="center">$\rightarrow$</td><td align="center">\rightarrow</td><td align="center">$\Rightarrow$</td><td align="center">\Rightarrow</td></tr><tr><td align="center">$\leftrightarrow$</td><td align="center">\leftrightarrow</td><td align="center">$\Leftrightarrow$</td><td align="center">\Leftrightarrow</td></tr><tr><td align="center">$\mapsto$</td><td align="center">\mapsto</td><td align="center">$\hookleftarrow$</td><td align="center">\hookleftarrow</td></tr><tr><td align="center">$\leftharpoonup$</td><td align="center">\leftharpoonup</td><td align="center">$\leftharpoondown$</td><td align="center">\leftharpoondown</td></tr><tr><td align="center">$\rightleftharpoons$</td><td align="center">\rightleftharpoons</td><td align="center">$\longleftarrow$</td><td align="center">\longleftarrow</td></tr><tr><td align="center">$\Longleftarrow$</td><td align="center">\Longleftarrow</td><td align="center">$\longrightarrow$</td><td align="center">\longrightarrow</td></tr><tr><td align="center">$\Longrightarrow$</td><td align="center">\Longrightarrow</td><td align="center">$\longleftrightarrow$</td><td align="center">\longleftrightarrow</td></tr><tr><td align="center">$\Longleftrightarrow$</td><td align="center">\Longleftrightarrow</td><td align="center">$\longmapsto$</td><td align="center">\longmapsto</td></tr><tr><td align="center">$\hookrightarrow$</td><td align="center">\hookrightarrow</td><td align="center">$\rightharpoonup$</td><td align="center">\rightharpoonup</td></tr><tr><td align="center">$\rightharpoondown$</td><td align="center">\rightharpoondown</td><td align="center">$\leadsto$</td><td align="center">\leadsto</td></tr><tr><td align="center">$\uparrow$</td><td align="center">\uparrow</td><td align="center">$\Uparrow$</td><td align="center">\Uparrow</td></tr><tr><td align="center">$\downarrow$</td><td align="center">\downarrow</td><td align="center">$\Downarrow$</td><td align="center">\Downarrow</td></tr><tr><td align="center">$\updownarrow$</td><td align="center">\updownarrow</td><td align="center">$\Updownarrow$</td><td align="center">\Updownarrow</td></tr><tr><td align="center">$\nearrow$</td><td align="center">\nearrow</td><td align="center">$\searrow$</td><td align="center">\searrow</td></tr><tr><td align="center">$\swarrow$</td><td align="center">\swarrow</td><td align="center">$\nwarrow$</td><td align="center">\nwarrow</td></tr><tr><td align="center">$\overrightarrow{AB}$</td><td align="center">\overrightarrow{AB}</td><td align="center">$\overleftarrow{AB}$</td><td align="center">\overleftarrow{AB}</td></tr><tr><td align="center">$\overleftrightarrow{AB}$</td><td align="center">\overleftrightarrow{AB}</td><td align="center"></td><td align="center"></td></tr></tbody></table><h3 id="一些奇奇怪怪的点"><a href="#一些奇奇怪怪的点" class="headerlink" title="一些奇奇怪怪的点"></a>一些奇奇怪怪的点</h3><table><thead><tr><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th></tr></thead><tbody><tr><td align="center">$\cdot$</td><td align="center">\cdot</td><td align="center">$\vdots$</td><td align="center">\vdots</td></tr><tr><td align="center">$\dots$</td><td align="center">\dots</td><td align="center">$\ddots$</td><td align="center">\ddots</td></tr><tr><td align="center">$\cdots$</td><td align="center">\cdots</td><td align="center"></td><td align="center"></td></tr></tbody></table><h3 id="字母上的强调符号"><a href="#字母上的强调符号" class="headerlink" title="字母上的强调符号"></a>字母上的强调符号</h3><table><thead><tr><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th></tr></thead><tbody><tr><td align="center">$\hat{x}$</td><td align="center">\hat{x}</td><td align="center">$\check{x}$</td><td align="center">\check{x}</td><td align="center">$\dot{x}$</td><td align="center">\dot{x}</td></tr><tr><td align="center">$\breve{x}$</td><td align="center">\breve{x}</td><td align="center">$\acute{x}$</td><td align="center">\acute{x}</td><td align="center">$\ddot{x}$</td><td align="center">\ddot{x}</td></tr><tr><td align="center">$\grave{x}$</td><td align="center">\grave{x}</td><td align="center">$\tilde{x}$</td><td align="center">\tilde{x}</td><td align="center">$\mathring{x}$</td><td align="center">\mathring{x}</td></tr><tr><td align="center">$\bar{x}$</td><td align="center">\bar{x}</td><td align="center">$\vec{x}$</td><td align="center">\vec{x}</td><td align="center"></td><td align="center"></td></tr></tbody></table><p>当对 $i$和$j$应用强调符号时，可以使用\imath和\jmath来防止点与重音发生干扰：</p><table><thead><tr><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th></tr></thead><tbody><tr><td align="center">$\vec{\jmath}$</td><td align="center">\vec{\jmath}</td><td align="center">$\tilde{\imath}$</td><td align="center">\tilde{\imath}</td></tr></tbody></table><p>\tilde 和 \hat 有一个更宽的版本，$\hat{7+x}$和$\widehat{7+x}$两种箭头是有区别的：</p><table><thead><tr><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th></tr></thead><tbody><tr><td align="center">$\widehat{7+x}$</td><td align="center">\widehat{7+x}</td><td align="center">$\widetilde{abc}$</td><td align="center">\widetilde{abc}</td></tr></tbody></table><h3 id="其他一些奇怪的符号"><a href="#其他一些奇怪的符号" class="headerlink" title="其他一些奇怪的符号"></a>其他一些奇怪的符号</h3><table><thead><tr><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th></tr></thead><tbody><tr><td align="center">$\infty$</td><td align="center">\infty</td><td align="center">$\triangle$</td><td align="center">\triangle</td><td align="center">$\angle$</td><td align="center">\angle</td></tr><tr><td align="center">$\aleph$</td><td align="center">\aleph</td><td align="center">$\hbar$</td><td align="center">\hbar</td><td align="center">$\imath$</td><td align="center">\imath</td></tr><tr><td align="center">$\jmath$</td><td align="center">\jmath</td><td align="center">$\ell$</td><td align="center">\ell</td><td align="center">$\wp$</td><td align="center">\wp</td></tr><tr><td align="center">$\Re$</td><td align="center">\Re</td><td align="center">$\Im$</td><td align="center">\Im</td><td align="center">$\mho$</td><td align="center">\mho</td></tr><tr><td align="center">$\prime$</td><td align="center">\prime</td><td align="center">$\emptyset$</td><td align="center">\emptyset</td><td align="center">$\nabla$</td><td align="center">\nabla</td></tr><tr><td align="center">$\surd$</td><td align="center">\surd</td><td align="center">$\partial$</td><td align="center">\partial</td><td align="center">$\top$</td><td align="center">\top</td></tr><tr><td align="center">$\bot$</td><td align="center">\bot</td><td align="center">$\vdash$</td><td align="center">\vdash</td><td align="center">$\dashv$</td><td align="center">\dashv</td></tr><tr><td align="center">$\forall$</td><td align="center">\forall</td><td align="center">$\exists$</td><td align="center">\exists</td><td align="center">$\neg$</td><td align="center">\neg</td></tr><tr><td align="center">$\flat$</td><td align="center">\flat</td><td align="center">$\natural$</td><td align="center">\natural</td><td align="center">$\sharp$</td><td align="center">\sharp</td></tr><tr><td align="center">$\backslash$</td><td align="center">\backslash</td><td align="center">$\Box$</td><td align="center">\Box</td><td align="center">$\Diamond$</td><td align="center">\Diamond</td></tr><tr><td align="center">$\clubsuit$</td><td align="center">\clubsuit</td><td align="center">$\diamondsuit$</td><td align="center">\diamondsuit</td><td align="center">$\heartsuit$</td><td align="center">\heartsuit</td></tr><tr><td align="center">$\spadesuit$</td><td align="center">\spadesuit</td><td align="center">$\Join$</td><td align="center">\Join</td><td align="center">$\blacksquare$</td><td align="center">\blacksquare</td></tr><tr><td align="center">$\diamondsuit$</td><td align="center">\diamondsuit</td><td align="center">$\mathbb{R}$</td><td align="center">\mathbb{R} (represents all real numbers)</td><td align="center">$\checkmark$</td><td align="center">\checkmark</td></tr><tr><td align="center">$\heartsuit$</td><td align="center">\heartsuit</td><td align="center">$\in$</td><td align="center">\in</td><td align="center">$\cup$</td><td align="center">\cup</td></tr><tr><td align="center">$\S$</td><td align="center">\S</td><td align="center">$\P$</td><td align="center">\P</td><td align="center">$\Vdash$</td><td align="center">\Vdash</td></tr><tr><td align="center">$\vDash$</td><td align="center">\vDash</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr></tbody></table><h3 id="括号"><a href="#括号" class="headerlink" title="括号"></a>括号</h3><p>In mathematics, sometimes we need to enclose expressions in brackets, braces or parentheses. Some of these work just as you’d imagine in LaTeX; type ( and ) for parentheses, [ and ] for brackets, and | and | for absolute value. However, other symbols have special commands:</p><table><thead><tr><th align="left">Symbol</th><th align="left">Command</th><th align="left">Symbol</th><th align="left">Command</th><th align="left">Symbol</th><th align="left">Command</th></tr></thead><tbody><tr><td align="left">$${$$</td><td align="left">{</td><td align="left">$$}$$</td><td align="left">}</td><td align="left">$|$</td><td align="left">|</td></tr><tr><td align="left">$\backslash$</td><td align="left">\backslash</td><td align="left">$\lfloor$</td><td align="left">\lfloor</td><td align="left">$\rfloor$</td><td align="left">\rfloor</td></tr><tr><td align="left">$\lceil$</td><td align="left">\lceil</td><td align="left">$\rceil$</td><td align="left">\rceil</td><td align="left">$\langle$</td><td align="left">\langle</td></tr><tr><td align="left">$\rangle$</td><td align="left">\rangle</td><td align="left"></td><td align="left"></td><td align="left"></td><td align="left"></td></tr></tbody></table><h2 id="编写数学公式"><a href="#编写数学公式" class="headerlink" title="编写数学公式"></a>编写数学公式</h2><h3 id="下标和上标"><a href="#下标和上标" class="headerlink" title="下标和上标"></a>下标和上标</h3><p>下标和上标（例如指数）可以分别使用下划线_和箭头^符号。</p><table><thead><tr><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th></tr></thead><tbody><tr><td align="center">$2^{2}$</td><td align="center">2^2</td><td align="center">$\textstyle a_i$</td><td align="center">a_i</td></tr><tr><td align="center">$\textstyle 2^{23}$</td><td align="center">2^{23}</td><td align="center">$\textstyle n_{i-1}$</td><td align="center">n_{i-1}</td></tr><tr><td align="center">$a^{i+1}_3$</td><td align="center">a^{i+1}_3</td><td align="center">$x^{3^2}$</td><td align="center">x^{3^2}</td></tr><tr><td align="center">$2^{a_i}$</td><td align="center">2^{a_i}</td><td align="center">$2^a_i$</td><td align="center">2^a_i</td></tr></tbody></table><h3 id="分式"><a href="#分式" class="headerlink" title="分式"></a>分式</h3><p>使用\frac{分子}{分母}来进行渲染</p><table><thead><tr><th align="center">Symbol</th><th align="center">Command</th></tr></thead><tbody><tr><td align="center">$\frac {1}{2}$</td><td align="center">\frac{1}{2} or \frac12</td></tr><tr><td align="center">$\frac{2}{x+2}$</td><td align="center">\frac{2}{x+2}</td></tr><tr><td align="center">$\frac{1+\frac{1}{x}}{3x + 2}$</td><td align="center">\frac{1+\frac{1}{x}}{3x + 2}</td></tr></tbody></table><p>如果分号比较多，建议用\cfrac代替\frac，看起来更大也舒服很多</p><table><thead><tr><th align="center">Symbol</th><th align="center">Command</th></tr></thead><tbody><tr><td align="center">$\cfrac{2}{1+\cfrac{2}{1+\cfrac{2}{1+\cfrac{2}{1}}}}$</td><td align="center">\cfrac{2}{1+\cfrac{2}{1+\cfrac{2}{1+\cfrac{2}{1}}}}</td></tr><tr><td align="center">$\frac{2}{1+\frac{2}{1+\frac{2}{1+\frac{2}{1}}}}$</td><td align="center">\frac{2}{1+\frac{2}{1+\frac{2}{1+\frac{2}{1}}}}</td></tr></tbody></table><h3 id="累加，累乘，求极限，求对数一类的符号"><a href="#累加，累乘，求极限，求对数一类的符号" class="headerlink" title="累加，累乘，求极限，求对数一类的符号"></a>累加，累乘，求极限，求对数一类的符号</h3><p>分别使用命令\sum、\prod、\lim和\log。要表示下限和上限，或对数的底，使用_和^的方式与下标和上标相同。</p><table><thead><tr><th align="center">Symbol</th><th align="center">Command</th></tr></thead><tbody><tr><td align="center">$\textstyle \sum_{i&#x3D;1}^{\infty}\frac{1}{i}$</td><td align="center">\sum_{i&#x3D;1}^{\infty}\frac{1}{i}</td></tr><tr><td align="center">$\textstyle \prod_{n&#x3D;1}^5\frac{n}{n-1}$</td><td align="center">\prod_{n&#x3D;1}^5\frac{n}{n-1}</td></tr><tr><td align="center">$\textstyle \lim_{x\to\infty}\frac{1}{x}$</td><td align="center">\lim_{x\to\infty}\frac{1}{x}</td></tr><tr><td align="center">$\textstyle \lim\limits_{x\to\infty}\frac{1}{x}$</td><td align="center">\lim\limits_{x\to\infty}\frac{1}{x}</td></tr><tr><td align="center">$\textstyle \log_n n^2$</td><td align="center">\log_n n^2</td></tr></tbody></table><p>其中一些符号在latex的显示模式下更漂亮：</p><table><thead><tr><th align="center">Symbol</th><th align="center">Command</th></tr></thead><tbody><tr><td align="center"><img src="https://latex.artofproblemsolving.com/3/6/6/3668f57e794d7f20c001ff9776563d1b5e03dfaa.png" alt="$\sum_{i=1}^{\infty}\frac{1}{i}$"></td><td align="center">\sum_{i&#x3D;1}^{\infty}\frac{1}{i}</td></tr><tr><td align="center"><img src="https://latex.artofproblemsolving.com/3/8/6/38620f28e72b9e630220f8b9c5d90a077e9f140c.png" alt="$\prod_{n=1}^5\frac{n}{n-1}$"></td><td align="center">\prod_{n&#x3D;1}^5\frac{n}{n-1}</td></tr><tr><td align="center"><img src="https://latex.artofproblemsolving.com/2/d/b/2db126637f5c59d21b8686443b38eb82bfee3935.png" alt="$\lim_{x\to\infty}\frac{1}{x}$"></td><td align="center">\lim_{x\to\infty}\frac{1}{x}</td></tr></tbody></table><h3 id="模运算符号"><a href="#模运算符号" class="headerlink" title="模运算符号"></a>模运算符号</h3><table><thead><tr><th align="center">Symbol</th><th align="center">Command</th></tr></thead><tbody><tr><td align="center">$9\equiv 3 \bmod{6}$</td><td align="center">9\equiv 3 \bmod{6}</td></tr><tr><td align="center">$9\equiv 3 \pmod{6}$</td><td align="center">9\equiv 3 \pmod{6}</td></tr><tr><td align="center">$9\equiv 3 \mod{6}$</td><td align="center">9\equiv 3 \mod{6}</td></tr><tr><td align="center">$9\equiv 3\pod{6}$</td><td align="center">9\equiv 3 \pod{6}</td></tr></tbody></table><h3 id="三角函数"><a href="#三角函数" class="headerlink" title="三角函数"></a>三角函数</h3><table><thead><tr><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th></tr></thead><tbody><tr><td align="center">$\textstyle \cos$</td><td align="center">\cos</td><td align="center">$\textstyle \sin$</td><td align="center">\sin</td><td align="center">$\textstyle \tan$</td><td align="center">\tan</td></tr><tr><td align="center">$\sec$</td><td align="center">\sec</td><td align="center">$\textstyle \textstyle \csc$</td><td align="center">\csc</td><td align="center">$\textstyle \cot$</td><td align="center">\cot</td></tr><tr><td align="center">$\textstyle \arccos$</td><td align="center">\arccos</td><td align="center">$\textstyle \arcsin$</td><td align="center">\arcsin</td><td align="center">$\textstyle \arctan$</td><td align="center">\arctan</td></tr><tr><td align="center">$\textstyle \cosh$</td><td align="center">\cosh</td><td align="center">$\textstyle \sinh$</td><td align="center">\sinh</td><td align="center">$\textstyle \tanh$</td><td align="center">\tanh</td></tr><tr><td align="center">$\textstyle \coth$</td><td align="center">\coth</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr></tbody></table><h3 id="矩阵"><a href="#矩阵" class="headerlink" title="矩阵"></a>矩阵</h3><p>我们可以使用\begin｛array｝…\end｛array｝命令构建数组或矩阵，并使用\left和\right来适当调整矩阵周围的分隔符大小</p><h3 id="其他符号"><a href="#其他符号" class="headerlink" title="其他符号"></a>其他符号</h3><table><thead><tr><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th></tr></thead><tbody><tr><td align="center">$\arg$</td><td align="center">\arg</td><td align="center">$\textstyle\deg$</td><td align="center">\deg</td><td align="center">$\textstyle\det$</td><td align="center">\det</td></tr><tr><td align="center">$\dim$</td><td align="center">\dim</td><td align="center">$\textstyle\exp$</td><td align="center">\exp</td><td align="center">$\textstyle\gcd$</td><td align="center">\gcd</td></tr><tr><td align="center">$\hom$</td><td align="center">\hom</td><td align="center">$\inf$</td><td align="center">\inf</td><td align="center">$\ker$</td><td align="center">\ker</td></tr><tr><td align="center">$\textstyle\lg$</td><td align="center">\lg</td><td align="center">$\liminf$</td><td align="center">\liminf</td><td align="center">$\limsup$</td><td align="center">\limsup</td></tr><tr><td align="center">$\textstyle\max$</td><td align="center">\max</td><td align="center">$\textstyle\min$</td><td align="center">\min</td><td align="center">$\Pr$</td><td align="center">\Pr</td></tr><tr><td align="center">$\sup$</td><td align="center">\sup</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr></tbody></table><p>其中一些命令的下标方式与求和、乘积和对数相同。有些渲染在显示模式和常规数学模式下不同。</p><table><thead><tr><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th><th align="center">Symbol</th><th align="center">Command</th></tr></thead><tbody><tr><td align="center">$\dim_x$</td><td align="center">\dim_x</td><td align="center">$\textstyle\gcd_x$</td><td align="center">\gcd_x</td><td align="center">$\inf_x$</td><td align="center">\inf_x</td></tr><tr><td align="center">$\liminf_x$</td><td align="center">\liminf_x</td><td align="center">$\limsup_x$</td><td align="center">\limsup_x</td><td align="center">$\textstyle\max_x$</td><td align="center">\max_x</td></tr><tr><td align="center">$\textstyle\min_x$</td><td align="center">\min_x</td><td align="center">$\Pr_x$</td><td align="center">\Pr_x</td><td align="center">$\sup_x$</td><td align="center">\sup_x</td></tr></tbody></table><h2 id="矩阵-1"><a href="#矩阵-1" class="headerlink" title="矩阵"></a>矩阵</h2><p>把矩阵单独放在一个板块是因为矩阵有很多花招，很多很多不同的表示</p><h3 id="1-数字周围无符号"><a href="#1-数字周围无符号" class="headerlink" title="1. 数字周围无符号"></a>1. 数字周围无符号</h3><h4 id="数字周围无符号"><a href="#数字周围无符号" class="headerlink" title="数字周围无符号"></a>数字周围无符号</h4><p>$$<br>\begin{matrix}<br>    1&amp;0\<br>    0&amp;1<br>\end{matrix}<br>$$</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;matrix&#125;<br>    1<span class="hljs-built_in">&amp;</span>0<span class="hljs-keyword">\\</span><br>    0<span class="hljs-built_in">&amp;</span>1<br><span class="hljs-keyword">\end</span>&#123;matrix&#125;<br></code></pre></td></tr></table></figure><h4 id="小括号-p"><a href="#小括号-p" class="headerlink" title="小括号+p"></a>小括号+p</h4><p>$$<br>\begin{pmatrix}<br>    1&amp;0\<br>    0&amp;1<br>\end{pmatrix}<br>$$</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;pmatrix&#125;<br>    1<span class="hljs-built_in">&amp;</span>0<span class="hljs-keyword">\\</span><br>    0<span class="hljs-built_in">&amp;</span>1<br><span class="hljs-keyword">\end</span>&#123;pmatrix&#125;<br></code></pre></td></tr></table></figure><h4 id="中括号-b"><a href="#中括号-b" class="headerlink" title="中括号+b"></a>中括号+b</h4><p>$$<br>\begin{bmatrix}<br>    1&amp;0\<br>    0&amp;1<br>\end{bmatrix}<br>$$</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;bmatrix&#125;<br>    1<span class="hljs-built_in">&amp;</span>0<span class="hljs-keyword">\\</span><br>    0<span class="hljs-built_in">&amp;</span>1<br><span class="hljs-keyword">\end</span>&#123;bmatrix&#125;<br></code></pre></td></tr></table></figure><h4 id="大括号-B"><a href="#大括号-B" class="headerlink" title="大括号+B"></a>大括号+B</h4><p>$$<br>\begin{Bmatrix}<br>    1&amp;0\<br>    0&amp;1<br>\end{Bmatrix}<br>$$</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;Bmatrix&#125;<br>    1<span class="hljs-built_in">&amp;</span>0<span class="hljs-keyword">\\</span><br>    0<span class="hljs-built_in">&amp;</span>1<br><span class="hljs-keyword">\end</span>&#123;Bmatrix&#125;<br></code></pre></td></tr></table></figure><h4 id="单竖线-v"><a href="#单竖线-v" class="headerlink" title="单竖线+v"></a>单竖线+v</h4><p>$$<br>\begin{vmatrix}<br>    1&amp;0\<br>    0&amp;1<br>\end{vmatrix}<br>$$</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ruby">\<span class="hljs-keyword">begin</span>&#123;vmatrix&#125;<br>    <span class="hljs-number">1</span>&amp;<span class="hljs-number">0</span>\\<br>    <span class="hljs-number">0</span>&amp;<span class="hljs-number">1</span><br>\<span class="hljs-keyword">end</span>&#123;vmatrix&#125;<br></code></pre></td></tr></table></figure><h4 id="双竖线-V"><a href="#双竖线-V" class="headerlink" title="双竖线+V"></a>双竖线+V</h4><p>$$<br>\begin{Vmatrix}<br>    1&amp;0\<br>    0&amp;1<br>\end{Vmatrix}<br>$$</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;Vmatrix&#125;<br>    1<span class="hljs-built_in">&amp;</span>0<span class="hljs-keyword">\\</span><br>    0<span class="hljs-built_in">&amp;</span>1<br><span class="hljs-keyword">\end</span>&#123;Vmatrix&#125;<br></code></pre></td></tr></table></figure><h3 id="省略号"><a href="#省略号" class="headerlink" title="省略号"></a>省略号</h3><p>使用<br><code>\dots</code>水平<br><code>\vdots</code> 竖直<br><code>\ddots</code>倾斜<br><code>\hdotsfor&#123;&#125;</code>跨列省略号。大括号中填共几列<br>如：<br>$$<br>\begin{bmatrix}<br>a_{11} &amp; \dots &amp; a_{1n}\<br>&amp;\ddots &amp; \vdots \<br>a_{n1}&amp; &amp; a_{nn}<br>\end{bmatrix}<br>$$</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-built_in">$</span><span class="hljs-built_in">$</span><br><span class="hljs-keyword">\begin</span>&#123;bmatrix&#125;<br>a<span class="hljs-built_in">_</span>&#123;11&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\dots</span> <span class="hljs-built_in">&amp;</span> a<span class="hljs-built_in">_</span>&#123;1n&#125;<span class="hljs-keyword">\\</span><br><span class="hljs-built_in">&amp;</span><span class="hljs-keyword">\ddots</span> <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\vdots</span> <span class="hljs-keyword">\\</span><br>a<span class="hljs-built_in">_</span>&#123;n1&#125;<span class="hljs-built_in">&amp;</span> <span class="hljs-built_in">&amp;</span> a<span class="hljs-built_in">_</span>&#123;nn&#125;<br><span class="hljs-keyword">\end</span>&#123;bmatrix&#125;<br><span class="hljs-built_in">$</span><span class="hljs-built_in">$</span><br></code></pre></td></tr></table></figure><h3 id="分块矩阵"><a href="#分块矩阵" class="headerlink" title="分块矩阵"></a>分块矩阵</h3><p>$$<br>\begin{bmatrix}<br>\begin{matrix}1&amp;0\0&amp;1\end{matrix}&amp; \text{\Large 0}\<br>\text{\Large 0}&amp;\begin{matrix}1&amp;0\0&amp;1\end{matrix}<br>\end{bmatrix}<br>$$</p><blockquote><p><code>\Large 0</code>是比普通的零要大一些的</p></blockquote><p>上面矩阵的代码为：</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-built_in">$</span><span class="hljs-built_in">$</span><br><span class="hljs-keyword">\begin</span>&#123;bmatrix&#125;<br><span class="hljs-keyword">\begin</span>&#123;matrix&#125;1<span class="hljs-built_in">&amp;</span>0<span class="hljs-keyword">\\</span>0<span class="hljs-built_in">&amp;</span>1<span class="hljs-keyword">\end</span>&#123;matrix&#125;<span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\text</span>&#123;<span class="hljs-keyword">\Large</span> 0&#125;<span class="hljs-keyword">\\</span><br><span class="hljs-keyword">\text</span>&#123;<span class="hljs-keyword">\Large</span> 0&#125;<span class="hljs-built_in">&amp;</span><span class="hljs-keyword">\begin</span>&#123;matrix&#125;1<span class="hljs-built_in">&amp;</span>0<span class="hljs-keyword">\\</span>0<span class="hljs-built_in">&amp;</span>1<span class="hljs-keyword">\end</span>&#123;matrix&#125;<br><span class="hljs-keyword">\end</span>&#123;bmatrix&#125;<br><span class="hljs-built_in">$</span><span class="hljs-built_in">$</span><br></code></pre></td></tr></table></figure><blockquote><p><code>\text</code>是在数学编辑模式下临时使用文本编辑，在公式中输入汉字都要使用此标签。分块矩阵就是矩阵的嵌套，仔细阅读代码就能理解 。</p></blockquote><h3 id="三角矩阵"><a href="#三角矩阵" class="headerlink" title="三角矩阵"></a>三角矩阵</h3><p>$$<br>\begin{bmatrix}<br>a_{11}&amp;a_{12} &amp; \dots &amp; a_{1n}\<br>&amp;a_{22}&amp;\dots&amp;a_{2n}\<br>&amp;&amp;\ddots&amp;\vdots\<br>&amp;{\huge 0}&amp;&amp;a_{nn}<br>\end{bmatrix}<br>$$</p><p>具体代码如下</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-built_in">$</span><span class="hljs-built_in">$</span><br><span class="hljs-keyword">\begin</span>&#123;bmatrix&#125;<br>a<span class="hljs-built_in">_</span>&#123;11&#125;<span class="hljs-built_in">&amp;</span>a<span class="hljs-built_in">_</span>&#123;12&#125; <span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\dots</span> <span class="hljs-built_in">&amp;</span> a<span class="hljs-built_in">_</span>&#123;1n&#125;<span class="hljs-keyword">\\</span><br><span class="hljs-built_in">&amp;</span>a<span class="hljs-built_in">_</span>&#123;22&#125;<span class="hljs-built_in">&amp;</span><span class="hljs-keyword">\dots</span><span class="hljs-built_in">&amp;</span>a<span class="hljs-built_in">_</span>&#123;2n&#125;<span class="hljs-keyword">\\</span><br><span class="hljs-built_in">&amp;</span><span class="hljs-built_in">&amp;</span><span class="hljs-keyword">\ddots</span><span class="hljs-built_in">&amp;</span><span class="hljs-keyword">\vdots</span><span class="hljs-keyword">\\</span><br><span class="hljs-built_in">&amp;</span>&#123;<span class="hljs-keyword">\huge</span> 0&#125;<span class="hljs-built_in">&amp;</span><span class="hljs-built_in">&amp;</span>a<span class="hljs-built_in">_</span>&#123;nn&#125;<br><span class="hljs-keyword">\end</span>&#123;bmatrix&#125;<br><span class="hljs-built_in">$</span><span class="hljs-built_in">$</span><br></code></pre></td></tr></table></figure><h3 id="方程组"><a href="#方程组" class="headerlink" title="方程组"></a>方程组</h3><p>方程组四舍五入也算半个矩阵吧<br>$$<br>\begin{equation}<br>    \begin{cases}<br>        l_{11}y_{1} &#x3D; 1 \<br>        l_{21}y_{1} + l_{22}y_{2} &#x3D; 0 \<br>        l_{31}y_{1} + l_{32}y_{2} + l_{33}y_{3} &#x3D; 0 \<br>        l_{41}y_{1} + l_ {42}y_{2} + l_{43}y_{3} + l_{44}y_{4} &#x3D; 0<br>     \end{cases}<br>\end{equation}<br>$$</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-built_in">$</span><span class="hljs-built_in">$</span><br><span class="hljs-keyword">\begin</span>&#123;equation&#125;<br>    <span class="hljs-keyword">\begin</span>&#123;cases&#125;<br>        l<span class="hljs-built_in">_</span>&#123;11&#125;y<span class="hljs-built_in">_</span>&#123;1&#125; = 1 <span class="hljs-keyword">\\</span><br>        l<span class="hljs-built_in">_</span>&#123;21&#125;y<span class="hljs-built_in">_</span>&#123;1&#125; + l<span class="hljs-built_in">_</span>&#123;22&#125;y<span class="hljs-built_in">_</span>&#123;2&#125; = 0 <span class="hljs-keyword">\\</span> <br>        l<span class="hljs-built_in">_</span>&#123;31&#125;y<span class="hljs-built_in">_</span>&#123;1&#125; + l<span class="hljs-built_in">_</span>&#123;32&#125;y<span class="hljs-built_in">_</span>&#123;2&#125; + l<span class="hljs-built_in">_</span>&#123;33&#125;y<span class="hljs-built_in">_</span>&#123;3&#125; = 0 <span class="hljs-keyword">\\</span><br>        l<span class="hljs-built_in">_</span>&#123;41&#125;y<span class="hljs-built_in">_</span>&#123;1&#125; + l<span class="hljs-built_in">_</span> &#123;42&#125;y<span class="hljs-built_in">_</span>&#123;2&#125; + l<span class="hljs-built_in">_</span>&#123;43&#125;y<span class="hljs-built_in">_</span>&#123;3&#125; + l<span class="hljs-built_in">_</span>&#123;44&#125;y<span class="hljs-built_in">_</span>&#123;4&#125; = 0<br>     <span class="hljs-keyword">\end</span>&#123;cases&#125;<br><span class="hljs-keyword">\end</span>&#123;equation&#125;<br><span class="hljs-built_in">$</span><span class="hljs-built_in">$</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">写出好看的公式，生活会更有趣</summary>
    
    
    
    <category term="笔记" scheme="http://example.com/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="latex" scheme="http://example.com/tags/latex/"/>
    
  </entry>
  
  <entry>
    <title>ubuntu安装openssl库</title>
    <link href="http://example.com/2022/10/21/ubuntu%E5%AE%89%E8%A3%85openssl%E5%BA%93/"/>
    <id>http://example.com/2022/10/21/ubuntu%E5%AE%89%E8%A3%85openssl%E5%BA%93/</id>
    <published>2022-10-21T07:25:40.000Z</published>
    <updated>2022-10-21T09:07:42.262Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ubuntu18-04安装openssl库"><a href="#ubuntu18-04安装openssl库" class="headerlink" title="ubuntu18.04安装openssl库"></a>ubuntu18.04安装openssl库</h1><p>opensssl库是常用的加密函数库，主要有以下加密算法</p><blockquote><p>加密算法</p><ul><li>对称加密：指加密和解密使用相同密钥的加密算法。对称加密算法的优点在于加解密的高速度和使用长密钥时的难破解性。<br>常见的对称加密算法：DES、3DES、DESX、AES、RC4、RC5、RC6等 </li><li>非对称加密：指加密和解密使用不同密钥的加密算法，也称为公私钥加密。<br>常见的非对称加密算法：RSA、DSA（数字签名用）等</li><li>Hash算法：Hash算法它是一种单向算法，用户可以通过Hash算法对目标信息生成一段特定长度的唯一的Hash值，却不能通过这个Hash值逆向获得目标信息。<br>常见的Hash算法：MD2、MD4、MD5、SHA、SHA-1等</li></ul></blockquote><p>下面介绍openssl库的安装</p><h2 id="安装方法"><a href="#安装方法" class="headerlink" title="安装方法"></a>安装方法</h2><h3 id="打开命令行终端"><a href="#打开命令行终端" class="headerlink" title="打开命令行终端"></a>打开命令行终端</h3><p>新手的话按ctrl+alt+t即可</p><h3 id="更新-x2F-下载编译器-make-和-gcc"><a href="#更新-x2F-下载编译器-make-和-gcc" class="headerlink" title="更新&#x2F;下载编译器 make 和 gcc"></a>更新&#x2F;下载编译器 make 和 gcc</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt install make gcc<br>sudo apt update<br>sudo apt upgrade<br></code></pre></td></tr></table></figure><h3 id="下载OpenSSL安装包"><a href="#下载OpenSSL安装包" class="headerlink" title="下载OpenSSL安装包"></a>下载OpenSSL安装包</h3><p>以版本openssl-1.1.1q版本为例，想要其他版本请到官网下载指定版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo wget https://www.openssl.org/source/openssl-1.1.1b.tar.gz<br></code></pre></td></tr></table></figure><h3 id="解压缩"><a href="#解压缩" class="headerlink" title="解压缩"></a>解压缩</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo tar -zxf openssl-1.1.1b.tar.gz &amp;&amp; <span class="hljs-built_in">cd</span> openssl-1.1.1b<br></code></pre></td></tr></table></figure><h3 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo ./config shared<br>sudo make<br>sudo make install<br></code></pre></td></tr></table></figure><h3 id="修改默认路径"><a href="#修改默认路径" class="headerlink" title="修改默认路径"></a>修改默认路径</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo <span class="hljs-built_in">ln</span> -s /usr/local/bin/openssl /usr/bin/openssl<br>sudo ldconfig<br></code></pre></td></tr></table></figure><h3 id="检查版本"><a href="#检查版本" class="headerlink" title="检查版本"></a>检查版本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">openssl version<br></code></pre></td></tr></table></figure><p>如果到这一步能输出版本信息</p><img src="/2022/10/21/ubuntu%E5%AE%89%E8%A3%85openssl%E5%BA%93/%E7%BB%93%E6%9E%9C%E8%BE%93%E5%87%BA.png" class="" title="版本信息"><h2 id="结果测试"><a href="#结果测试" class="headerlink" title="结果测试"></a>结果测试</h2><h3 id="测试代码"><a href="#测试代码" class="headerlink" title="测试代码"></a>测试代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;sys/time.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;openssl/bn.h&gt;</span></span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">timeval</span> timestart, timeend ;<br><span class="hljs-type">float</span> timeuse_encrypt = <span class="hljs-number">0</span> , timeuse_decrypt = <span class="hljs-number">0</span>, timeuse_add = <span class="hljs-number">0</span> , timeuse_mul = <span class="hljs-number">0</span> , timeuse = <span class="hljs-number">0</span> ;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;   BN_CTX *ctx = <span class="hljs-built_in">BN_CTX_new</span>();<br>    <span class="hljs-built_in">BN_CTX_start</span>(ctx);<br>    BIGNUM *r1 = <span class="hljs-built_in">BN_CTX_get</span>(ctx);<br>    BIGNUM *r2 = <span class="hljs-built_in">BN_CTX_get</span>(ctx);<br>    BIGNUM *n = <span class="hljs-built_in">BN_CTX_get</span>(ctx);<br>    BIGNUM *tmp = <span class="hljs-built_in">BN_CTX_get</span>(ctx);<br>    BIGNUM *dv = <span class="hljs-built_in">BN_CTX_get</span>(ctx);<br>    BIGNUM *rem = <span class="hljs-built_in">BN_CTX_get</span>(ctx);<br>    <span class="hljs-built_in">BN_rand</span>(r1, <span class="hljs-number">236896</span> , <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>    <span class="hljs-built_in">BN_rand</span>(r2, <span class="hljs-number">236896</span> , <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>    <span class="hljs-built_in">BN_rand</span>(n, <span class="hljs-number">236896</span> , <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>    <br>    <span class="hljs-built_in">gettimeofday</span>(&amp;timestart, <span class="hljs-literal">NULL</span>);<span class="hljs-comment">//160*236896</span><br>    <span class="hljs-built_in">BN_mod_mul</span>(tmp , r1 , r2 , n  , ctx);<span class="hljs-comment">//a mod q = a/q*q</span><br>    <span class="hljs-built_in">gettimeofday</span>(&amp;timeend, <span class="hljs-literal">NULL</span>);<br>    timeuse = <span class="hljs-number">1000000</span> * (timeend.tv_sec - timestart.tv_sec) + timeend.tv_usec - timestart.tv_usec;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nmod mul time:%f ms\n&quot;</span>, timeuse / <span class="hljs-number">1000</span>);<br>    <br>    <span class="hljs-built_in">gettimeofday</span>(&amp;timestart, <span class="hljs-literal">NULL</span>);<span class="hljs-comment">//160*236896</span><br>    <span class="hljs-built_in">BN_mul</span>(tmp , r1 , r2  , ctx);<span class="hljs-comment">//a mod q = a/q*q</span><br>    <span class="hljs-built_in">gettimeofday</span>(&amp;timeend, <span class="hljs-literal">NULL</span>);<br>    timeuse = <span class="hljs-number">1000000</span> * (timeend.tv_sec - timestart.tv_sec) + timeend.tv_usec - timestart.tv_usec;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nmul time:%f ms\n&quot;</span>, timeuse / <span class="hljs-number">1000</span>);<br><br>    <span class="hljs-built_in">gettimeofday</span>(&amp;timestart, <span class="hljs-literal">NULL</span>);<span class="hljs-comment">//160*236896</span><br>    <span class="hljs-built_in">BN_div</span>(dv , rem , tmp ,n , ctx);<span class="hljs-comment">//r1*r2/n</span><br>    <span class="hljs-built_in">gettimeofday</span>(&amp;timeend, <span class="hljs-literal">NULL</span>);<br>    timeuse = <span class="hljs-number">1000000</span> * (timeend.tv_sec - timestart.tv_sec) + timeend.tv_usec - timestart.tv_usec;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\ndiv time:%f ms\n&quot;</span>, timeuse / <span class="hljs-number">1000</span>);<br>    <br>    <span class="hljs-built_in">gettimeofday</span>(&amp;timestart, <span class="hljs-literal">NULL</span>);<span class="hljs-comment">//160*236896</span><br>    <span class="hljs-built_in">BN_mod</span>(tmp , tmp , n  , ctx);<span class="hljs-comment">//r1*r2/n mod q = a/q*q</span><br>    <span class="hljs-built_in">gettimeofday</span>(&amp;timeend, <span class="hljs-literal">NULL</span>);<br>    timeuse = <span class="hljs-number">1000000</span> * (timeend.tv_sec - timestart.tv_sec) + timeend.tv_usec - timestart.tv_usec;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nmod time:%f ms\n&quot;</span>, timeuse / <span class="hljs-number">1000</span>);<br>    <span class="hljs-built_in">BN_CTX_end</span>(ctx);<br>    <span class="hljs-built_in">BN_CTX_free</span>(ctx);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="编译运行"><a href="#编译运行" class="headerlink" title="编译运行"></a>编译运行</h3><p>输入如下指令可以编译运行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc test.c -lcrypto<br>./a.out<br></code></pre></td></tr></table></figure><p>可以看到如下输出结果</p><img src="/2022/10/21/ubuntu%E5%AE%89%E8%A3%85openssl%E5%BA%93/%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.png" class="" title="测试结果">]]></content>
    
    
    <summary type="html">突然间，哈桑的声音在我脑海中响起：为你，千千万万遍。哈桑，那个兔唇的哈桑，那个追风筝的人</summary>
    
    
    
    <category term="密码学" scheme="http://example.com/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/"/>
    
    
    <category term="linux操作系统" scheme="http://example.com/tags/linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="环境配置" scheme="http://example.com/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
    <category term="c++" scheme="http://example.com/tags/c/"/>
    
  </entry>
  
  <entry>
    <title>分组密码小笔记</title>
    <link href="http://example.com/2022/10/18/%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E5%B0%8F%E7%AC%94%E8%AE%B0/"/>
    <id>http://example.com/2022/10/18/%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81%E5%B0%8F%E7%AC%94%E8%AE%B0/</id>
    <published>2022-10-18T06:16:14.000Z</published>
    <updated>2024-12-03T16:26:37.596Z</updated>
    
    <content type="html"><![CDATA[<h1 id="分组密码"><a href="#分组密码" class="headerlink" title="分组密码"></a>分组密码</h1><p>这学期学习现代密码学，密码的各种加密方式有很多细节，还有大体的框架，浅浅做个笔记记录一下，以后可以随时回顾。</p><p>参考博客：</p><ul><li><a href="https://blog.csdn.net/qq_28205153/article/details/55798628#commentBox">AES加密算法的详细介绍与实现</a></li><li><a href="https://www.cnblogs.com/starwolf/p/3365834.html">AES五种加密模式（CBC、ECB、CTR、OCF、CFB)</a></li></ul><h2 id="DES"><a href="#DES" class="headerlink" title="DES"></a>DES</h2><h2 id="AES"><a href="#AES" class="headerlink" title="AES"></a>AES</h2><h3 id="AES简介"><a href="#AES简介" class="headerlink" title="AES简介"></a>AES简介</h3><p>高级加密标准(AES,Advanced Encryption Standard)为最常见的对称<a href="https://so.csdn.net/so/search?q=%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95&spm=1001.2101.3001.7020">加密算法</a>(微信小程序加密传输就是用这个加密算法的)。对称加密算法也就是加密和解密用相同的密钥，具体的加密流程如下图：<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwMjE5MDgyOTA5Njg4?x-oss-process=image/format,png" alt="加密流程图"><br>下面简单介绍下各个部分的作用与意义：</p><ul><li>明文P</li></ul><blockquote><p>没有经过加密的数据。</p></blockquote><ul><li>密钥K</li></ul><blockquote><p>用来加密明文的密码，在对称加密算法中，加密与解密的<a href="https://so.csdn.net/so/search?q=%E5%AF%86%E9%92%A5&spm=1001.2101.3001.7020">密钥</a>是相同的。密钥为接收方与发送方协商产生，但不可以直接在网络上传输，否则会导致密钥泄漏，通常是通过非对称加密算法加密密钥，然后再通过网络传输给对方，或者直接面对面商量密钥。密钥是绝对不可以泄漏的，否则会被攻击者还原密文，窃取机密数据。</p></blockquote><ul><li>AES加密函数</li></ul><blockquote><p>设<a href="https://so.csdn.net/so/search?q=AES%E5%8A%A0%E5%AF%86&spm=1001.2101.3001.7020">AES加密</a>函数为E，则 C &#x3D; E(K, P),其中P为明文，K为密钥，C为密文。也就是说，把明文P和密钥K作为加密函数的参数输入，则加密函数E会输出密文C。</p></blockquote><ul><li>密文C</li></ul><blockquote><p>经加密函数处理后的数据</p></blockquote><ul><li>AES解密函数</li></ul><blockquote><p>设AES解密函数为D，则 P &#x3D; D(K, C),其中C为密文，K为密钥，P为明文。也就是说，把密文C和密钥K作为解密函数的参数输入，则解密函数会输出明文P。</p></blockquote><p>在这里简单介绍下对称加密算法与非对称加密算法的区别。</p><ul><li>对称加密算法</li></ul><blockquote><p>加密和解密用到的密钥是相同的，这种加密方式加密速度非常快，适合经常发送数据的场合。缺点是密钥的传输比较麻烦。</p></blockquote><ul><li>非对称加密算法</li></ul><blockquote><p>加密和解密用的密钥是不同的，这种加密方式是用数学上的难解问题构造的，通常加密解密的速度比较慢，适合偶尔发送数据的场合。优点是密钥传输方便。常见的非对称加密算法为RSA、ECC和EIGamal。</p></blockquote><p>实际中，一般是通过RSA<a href="https://so.csdn.net/so/search?q=%E5%8A%A0%E5%AF%86&spm=1001.2101.3001.7020">加密</a>AES的密钥，传输到接收方，接收方解密得到AES密钥，然后发送方和接收方用AES密钥来通信。</p><p>本文下面AES原理的介绍参考自《现代密码学教程》，AES的实现在介绍完原理后开始。</p><h3 id="AES的基本结构"><a href="#AES的基本结构" class="headerlink" title="AES的基本结构"></a>AES的基本结构</h3><p>AES为分组密码，分组密码也就是把明文分成一组一组的，每组长度相等，每次加密一组数据，直到加密完整个明文。在AES标准规范中，分组长度只能是128位，也就是说，每个分组为16个字节（每个字节8位）。密钥的长度可以使用128位、192位或256位。密钥的长度不同，推荐加密轮数也不同，如下表所示：</p><table><thead><tr><th align="center">AES</th><th align="center">密钥长度（单位byte)</th><th align="center">分组长度(单位byte)</th><th align="center">加密轮数</th></tr></thead><tbody><tr><td align="center">AES-128</td><td align="center">16</td><td align="center">16</td><td align="center">10</td></tr><tr><td align="center">AES-192</td><td align="center">24</td><td align="center">16</td><td align="center">12</td></tr><tr><td align="center">AES-256</td><td align="center">32</td><td align="center">16</td><td align="center">14</td></tr></tbody></table><p>轮数在下面介绍，这里实现的是AES-128，也就是密钥的长度为128位，加密轮数为10轮。<br>上面说到，AES的加密公式为C &#x3D; E(K,P)，在加密函数E中，会执行一个轮函数，并且执行10次这个轮函数，这个轮函数的前9次执行的操作是一样的，只有第10次有所不同。也就是说，一个明文分组会被加密10轮。AES的核心就是实现一轮中的所有操作。</p><p>AES的处理单位是字节，128位的输入明文分组P和输入密钥K都被分成16个字节，分别记为：</p><p>$P &#x3D; P0;P1 \dots P15$ </p><p>$K &#x3D; K0;K1 \dots K15$</p><p>如，明文分组为P &#x3D; abcdefghijklmnop,其中的字符a对应P0，p对应P15。一般地，明文分组用字节为单位的正方形矩阵描述，称为状态矩阵。在算法的每一轮中，状态矩阵的内容不断发生变化，最后的结果作为密文输出。该矩阵中字节的排列顺序为从上到下、从左至右依次排列，如下图所示：<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwMjE5MTMyNTQ4OTA2?x-oss-process=image/format,png" alt="state"></p><p>现在假设明文分组P为”abcdefghijklmnop”，则对应上面生成的状态矩阵图如下：<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwMjE5MTM0NzIyODEy?x-oss-process=image/format,png" alt="state2"><br>上图中，0x61为字符a的十六进制表示。可以看到，明文经过AES加密后，已经面目全非。</p><ul><li>128位密钥也是用字节为单位的矩阵表示，矩阵的每一列被称为1个32位比特字。</li><li>通过密钥编排函数该密钥矩阵被扩展成一个44个字组成的序列$W[0],W[1], … ,W[43]$,序列中每个元素的大小为32bit</li><li>该序列的前4个元素$W[0],W[1],W[2],W[3]$是原始密钥，用于加密运算中的初始密钥加（下面介绍）</li><li>后面40个字分为10组，每组4个字（128比特）分别用于10轮加密运算中的轮密钥加，如下图所示：<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwMjE5MTUyNjM4MzI0?x-oss-process=image/format,png" alt="keystate"><br>上图中，设K &#x3D; “abcdefghijklmnop”，则$K0 &#x3D; a, K15 &#x3D; p, W[0] &#x3D; K0 |K1| K2 |K3 &#x3D; “abcd”$。</li></ul><p>AES的整体结构如下图所示，其中的W[0,3]是指W[0]、W[1]、W[2]和W[3]串联组成的128位密钥。加密的第1轮到第9轮的轮函数一样，包括<font color="red">4个操作：字节代换、行位移、列混合和轮密钥加</font>。最后一轮迭代不执行列混合。另外，在第一轮迭代之前，先将明文和原始密钥进行一次异或加密操作。<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwMjE5MTYxMjAyNDg1?x-oss-process=image/format,png" alt="aes_struct"><br>上图也展示了AES解密过程，解密过程仍为10轮，每一轮的操作是加密操作的逆操作。由于AES的4个轮操作都是可逆的，因此，解密操作的一轮就是顺序执行逆行移位、逆字节代换、轮密钥加和逆列混合。同加密操作类似，最后一轮不执行逆列混合，在第1轮解密之前，要执行1次密钥加操作。</p><p>下面分别介绍AES中一轮的4个操作阶段，这4分操作阶段使输入位得到充分的混淆。</p><h3 id="AES加解密具体流程"><a href="#AES加解密具体流程" class="headerlink" title="AES加解密具体流程"></a>AES加解密具体流程</h3><h4 id="字节代换"><a href="#字节代换" class="headerlink" title="字节代换"></a>字节代换</h4><p>把该字节的高4位作为行值，低4位作为列值，取出S盒中对应的元素作为输出</p><h5 id="字节代换操作"><a href="#字节代换操作" class="headerlink" title="字节代换操作"></a>字节代换操作</h5><p>AES的字节代换其实就是一个简单的查表操作。AES定义了一个S盒和一个逆S盒。<br>AES的S盒：</p><table><thead><tr><th>行&#x2F;列</th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>A</th><th>B</th><th>C</th><th>D</th><th>E</th><th>F</th></tr></thead><tbody><tr><td>0</td><td>0x63</td><td>0x7c</td><td>0x77</td><td>0x7b</td><td>0xf2</td><td>0x6b</td><td>0x6f</td><td>0xc5</td><td>0x30</td><td>0x01</td><td>0x67</td><td>0x2b</td><td>0xfe</td><td>0xd7</td><td>0xab</td><td>0x76</td></tr><tr><td>1</td><td>0xca</td><td>0x82</td><td>0xc9</td><td>0x7d</td><td>0xfa</td><td>0x59</td><td>0x47</td><td>0xf0</td><td>0xad</td><td>0xd4</td><td>0xa2</td><td>0xaf</td><td>0x9c</td><td>0xa4</td><td>0x72</td><td>0xc0</td></tr><tr><td>2</td><td>0xb7</td><td>0xfd</td><td>0x93</td><td>0x26</td><td>0x36</td><td>0x3f</td><td>0xf7</td><td>0xcc</td><td>0x34</td><td>0xa5</td><td>0xe5</td><td>0xf1</td><td>0x71</td><td>0xd8</td><td>0x31</td><td>0x15</td></tr><tr><td>3</td><td>0x04</td><td>0xc7</td><td>0x23</td><td>0xc3</td><td>0x18</td><td>0x96</td><td>0x05</td><td>0x9a</td><td>0x07</td><td>0x12</td><td>0x80</td><td>0xe2</td><td>0xeb</td><td>0x27</td><td>0xb2</td><td>0x75</td></tr><tr><td>4</td><td>0x09</td><td>0x83</td><td>0x2c</td><td>0x1a</td><td>0x1b</td><td>0x6e</td><td>0x5a</td><td>0xa0</td><td>0x52</td><td>0x3b</td><td>0xd6</td><td>0xb3</td><td>0x29</td><td>0xe3</td><td>0x2f</td><td>0x84</td></tr><tr><td>5</td><td>0x53</td><td>0xd1</td><td>0x00</td><td>0xed</td><td>0x20</td><td>0xfc</td><td>0xb1</td><td>0x5b</td><td>0x6a</td><td>0xcb</td><td>0xbe</td><td>0x39</td><td>0x4a</td><td>0x4c</td><td>0x58</td><td>0xcf</td></tr><tr><td>6</td><td>0xd0</td><td>0xef</td><td>0xaa</td><td>0xfb</td><td>0x43</td><td>0x4d</td><td>0x33</td><td>0x85</td><td>0x45</td><td>0xf9</td><td>0x02</td><td>0x7f</td><td>0x50</td><td>0x3c</td><td>0x9f</td><td>0xa8</td></tr><tr><td>7</td><td>0x51</td><td>0xa3</td><td>0x40</td><td>0x8f</td><td>0x92</td><td>0x9d</td><td>0x38</td><td>0xf5</td><td>0xbc</td><td>0xb6</td><td>0xda</td><td>0x21</td><td>0x10</td><td>0xff</td><td>0xf3</td><td>0xd2</td></tr><tr><td>8</td><td>0xcd</td><td>0x0c</td><td>0x13</td><td>0xec</td><td>0x5f</td><td>0x97</td><td>0x44</td><td>0x17</td><td>0xc4</td><td>0xa7</td><td>0x7e</td><td>0x3d</td><td>0x64</td><td>0x5d</td><td>0x19</td><td>0x73</td></tr><tr><td>9</td><td>0x60</td><td>0x81</td><td>0x4f</td><td>0xdc</td><td>0x22</td><td>0x2a</td><td>0x90</td><td>0x88</td><td>0x46</td><td>0xee</td><td>0xb8</td><td>0x14</td><td>0xde</td><td>0x5e</td><td>0x0b</td><td>0xdb</td></tr><tr><td>A</td><td>0xe0</td><td>0x32</td><td>0x3a</td><td>0x0a</td><td>0x49</td><td>0x06</td><td>0x24</td><td>0x5c</td><td>0xc2</td><td>0xd3</td><td>0xac</td><td>0x62</td><td>0x91</td><td>0x95</td><td>0xe4</td><td>0x79</td></tr><tr><td>B</td><td>0xe7</td><td>0xc8</td><td>0x37</td><td>0x6d</td><td>0x8d</td><td>0xd5</td><td>0x4e</td><td>0xa9</td><td>0x6c</td><td>0x56</td><td>0xf4</td><td>0xea</td><td>0x65</td><td>0x7a</td><td>0xae</td><td>0x08</td></tr><tr><td>C</td><td>0xba</td><td>0x78</td><td>0x25</td><td>0x2e</td><td>0x1c</td><td>0xa6</td><td>0xb4</td><td>0xc6</td><td>0xe8</td><td>0xdd</td><td>0x74</td><td>0x1f</td><td>0x4b</td><td>0xbd</td><td>0x8b</td><td>0x8a</td></tr><tr><td>D</td><td>0x70</td><td>0x3e</td><td>0xb5</td><td>0x66</td><td>0x48</td><td>0x03</td><td>0xf6</td><td>0x0e</td><td>0x61</td><td>0x35</td><td>0x57</td><td>0xb9</td><td>0x86</td><td>0xc1</td><td>0x1d</td><td>0x9e</td></tr><tr><td>E</td><td>0xe1</td><td>0xf8</td><td>0x98</td><td>0x11</td><td>0x69</td><td>0xd9</td><td>0x8e</td><td>0x94</td><td>0x9b</td><td>0x1e</td><td>0x87</td><td>0xe9</td><td>0xce</td><td>0x55</td><td>0x28</td><td>0xdf</td></tr><tr><td>F</td><td>0x8c</td><td>0xa1</td><td>0x89</td><td>0x0d</td><td>0xbf</td><td>0xe6</td><td>0x42</td><td>0x68</td><td>0x41</td><td>0x99</td><td>0x2d</td><td>0x0f</td><td>0xb0</td><td>0x54</td><td>0xbb</td><td>0x16</td></tr></tbody></table><p>状态矩阵中的元素按照下面的方式映射为一个新的字节：把该字节的高4位作为行值，低4位作为列值，取出S盒或者逆S盒中对应的行的元素作为输出。例如，加密时，输出的字节S1为0x12,则查S盒的第0x01行和0x02列，得到值0xc9,然后替换S1原有的0x12为0xc9。状态矩阵经字节代换后的图如下：<br><img src="https://img-blog.csdnimg.cn/20181213112210707.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI4MjA1MTUz,size_16,color_FFFFFF,t_70" alt="字节变换"></p><h5 id="字节代换逆操作"><a href="#字节代换逆操作" class="headerlink" title="字节代换逆操作"></a>字节代换逆操作</h5><p>逆字节代换也就是查逆S盒来变换，逆S盒如下：</p><table><thead><tr><th>列 行</th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>A</th><th>B</th><th>C</th><th>D</th><th>E</th><th>F</th></tr></thead><tbody><tr><td>0</td><td>0x52</td><td>0x09</td><td>0x6a</td><td>0xd5</td><td>0x30</td><td>0x36</td><td>0xa5</td><td>0x38</td><td>0xbf</td><td>0x40</td><td>0xa3</td><td>0x9e</td><td>0x81</td><td>0xf3</td><td>0xd7</td><td>0xfb</td></tr><tr><td>1</td><td>0x7c</td><td>0xe3</td><td>0x39</td><td>0x82</td><td>0x9b</td><td>0x2f</td><td>0xff</td><td>0x87</td><td>0x34</td><td>0x8e</td><td>0x43</td><td>0x44</td><td>0xc4</td><td>0xde</td><td>0xe9</td><td>0xcb</td></tr><tr><td>2</td><td>0x54</td><td>0x7b</td><td>0x94</td><td>0x32</td><td>0xa6</td><td>0xc2</td><td>0x23</td><td>0x3d</td><td>0xee</td><td>0x4c</td><td>0x95</td><td>0x0b</td><td>0x42</td><td>0xfa</td><td>0xc3</td><td>0x4e</td></tr><tr><td>3</td><td>0x08</td><td>0x2e</td><td>0xa1</td><td>0x66</td><td>0x28</td><td>0xd9</td><td>0x24</td><td>0xb2</td><td>0x76</td><td>0x5b</td><td>0xa2</td><td>0x49</td><td>0x6d</td><td>0x8b</td><td>0xd1</td><td>0x25</td></tr><tr><td>4</td><td>0x72</td><td>0xf8</td><td>0xf6</td><td>0x64</td><td>0x86</td><td>0x68</td><td>0x98</td><td>0x16</td><td>0xd4</td><td>0xa4</td><td>0x5c</td><td>0xcc</td><td>0x5d</td><td>0x65</td><td>0xb6</td><td>0x92</td></tr><tr><td>5</td><td>0x6c</td><td>0x70</td><td>0x48</td><td>0x50</td><td>0xfd</td><td>0xed</td><td>0xb9</td><td>0xda</td><td>0x5e</td><td>0x15</td><td>0x46</td><td>0x57</td><td>0xa7</td><td>0x8d</td><td>0x9d</td><td>0x84</td></tr><tr><td>6</td><td>0x90</td><td>0xd8</td><td>0xab</td><td>0x00</td><td>0x8c</td><td>0xbc</td><td>0xd3</td><td>0x0a</td><td>0xf7</td><td>0xe4</td><td>0x58</td><td>0x05</td><td>0xb8</td><td>0xb3</td><td>0x45</td><td>0x06</td></tr><tr><td>7</td><td>0xd0</td><td>0x2c</td><td>0x1e</td><td>0x8f</td><td>0xca</td><td>0x3f</td><td>0x0f</td><td>0x02</td><td>0xc1</td><td>0xaf</td><td>0xbd</td><td>0x03</td><td>0x01</td><td>0x13</td><td>0x8a</td><td>0x6b</td></tr><tr><td>8</td><td>0x3a</td><td>0x91</td><td>0x11</td><td>0x41</td><td>0x4f</td><td>0x67</td><td>0xdc</td><td>0xea</td><td>0x97</td><td>0xf2</td><td>0xcf</td><td>0xce</td><td>0xf0</td><td>0xb4</td><td>0xe6</td><td>0x73</td></tr><tr><td>9</td><td>0x96</td><td>0xac</td><td>0x74</td><td>0x22</td><td>0xe7</td><td>0xad</td><td>0x35</td><td>0x85</td><td>0xe2</td><td>0xf9</td><td>0x37</td><td>0xe8</td><td>0x1c</td><td>0x75</td><td>0xdf</td><td>0x6e</td></tr><tr><td>A</td><td>0x47</td><td>0xf1</td><td>0x1a</td><td>0x71</td><td>0x1d</td><td>0x29</td><td>0xc5</td><td>0x89</td><td>0x6f</td><td>0xb7</td><td>0x62</td><td>0x0e</td><td>0xaa</td><td>0x18</td><td>0xbe</td><td>0x1b</td></tr><tr><td>B</td><td>0xfc</td><td>0x56</td><td>0x3e</td><td>0x4b</td><td>0xc6</td><td>0xd2</td><td>0x79</td><td>0x20</td><td>0x9a</td><td>0xdb</td><td>0xc0</td><td>0xfe</td><td>0x78</td><td>0xcd</td><td>0x5a</td><td>0xf4</td></tr><tr><td>C</td><td>0x1f</td><td>0xdd</td><td>0xa8</td><td>0x33</td><td>0x88</td><td>0x07</td><td>0xc7</td><td>0x31</td><td>0xb1</td><td>0x12</td><td>0x10</td><td>0x59</td><td>0x27</td><td>0x80</td><td>0xec</td><td>0x5f</td></tr><tr><td>D</td><td>0x60</td><td>0x51</td><td>0x7f</td><td>0xa9</td><td>0x19</td><td>0xb5</td><td>0x4a</td><td>0x0d</td><td>0x2d</td><td>0xe5</td><td>0x7a</td><td>0x9f</td><td>0x93</td><td>0xc9</td><td>0x9c</td><td>0xef</td></tr><tr><td>E</td><td>0xa0</td><td>0xe0</td><td>0x3b</td><td>0x4d</td><td>0xae</td><td>0x2a</td><td>0xf5</td><td>0xb0</td><td>0xc8</td><td>0xeb</td><td>0xbb</td><td>0x3c</td><td>0x83</td><td>0x53</td><td>0x99</td><td>0x61</td></tr><tr><td>F</td><td>0x17</td><td>0x2b</td><td>0x04</td><td>0x7e</td><td>0xba</td><td>0x77</td><td>0xd6</td><td>0x26</td><td>0xe1</td><td>0x69</td><td>0x14</td><td>0x63</td><td>0x55</td><td>0x21</td><td>0x0c</td><td>0x7d</td></tr></tbody></table><h4 id="行移位"><a href="#行移位" class="headerlink" title="行移位"></a>行移位</h4><h5 id="行移位操作"><a href="#行移位操作" class="headerlink" title="行移位操作"></a>行移位操作</h5><p>行移位是一个简单的左循环移位操作。当密钥长度为128比特时，状态矩阵的第0行左移0字节，第1行左移1字节，第2行左移2字节，第3行左移3字节，如下图所示：<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwMjE5MTc0MDE1MTY3?x-oss-process=image/format,png" alt="shiftRows"></p><h5 id="行移位的逆变换"><a href="#行移位的逆变换" class="headerlink" title="行移位的逆变换"></a>行移位的逆变换</h5><p>行移位的逆变换是将状态矩阵中的每一行执行相反的移位操作，例如AES-128中，状态矩阵的第0行右移0字节，第1行右移1字节，第2行右移2字节，第3行右移3字节。</p><h4 id="列混合"><a href="#列混合" class="headerlink" title="列混合"></a>列混合</h4><h5 id="列混合操作"><a href="#列混合操作" class="headerlink" title="列混合操作"></a>列混合操作</h5><p>列混合变换是通过矩阵相乘来实现的，经行移位后的状态矩阵与固定的矩阵相乘，得到混淆后的状态矩阵，如下图的公式所示：<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwMjE5MjAzMzQ2NDM2?x-oss-process=image/format,png" alt="col"></p><p>状态矩阵中的第j列(0 ≤j≤3)的列混合可以表示为下图所示：<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwMjE5MjAzNzQyNTE2?x-oss-process=image/format,png" alt="col2"></p><p>其中，矩阵元素的乘法和加法都是定义在基于$GF(2^8)$上的二元运算,并不是通常意义上的乘法和加法。这里涉及到一些信息安全上的数学知识，不过不懂这些知识也行。其实这种二元运算的加法等价于两个字节的异或，乘法则复杂一点。对于一个8位的二进制数来说，使用域上的乘法乘以(00000010)等价于左移1位(低位补0)后，再根据情况同(00011011)进行异或运算，设$S1 &#x3D; (a7 ,a6, a5, a4, a3, a2 ,a1,a0)$，刚$0x02 * S1$如下图所示：<br>$$<br>(00000010)* (a7 ,a6, a5, a4, a3, a2 ,a1,a0)&#x3D;<br>\begin{equation}<br>    \begin{cases}<br>       (a6, a5, a4, a3, a2 ,a1,a0) ,a_7 &#x3D; 0\<br>       (a6, a5, a4, a3, a2 ,a1,a0) \oplus (00011011),a_7 &#x3D; 1\</p><pre><code class="hljs"> \end&#123;cases&#125;</code></pre><p>\end{equation}<br>$$</p><p>也就是说，如果a7为1，则进行异或运算，否则不进行。<br>类似地，乘以(00000100)可以拆分成两次乘以(00000010)的运算：<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwMjE5MjA1NjAxNjgz?x-oss-process=image/format,png" alt="col4"><br>乘以(0000 0011)可以拆分成先分别乘以(0000 0001)和(0000 0010)，再将两个乘积异或：<br><img src="https://img-blog.csdnimg.cn/20210216120331436.png#pic_center" alt=" "></p><p>因此，我们只需要实现乘以2的函数，其他数值的乘法都可以通过组合来实现。<br>下面举个具体的例子,输入的状态矩阵如下：</p><table><thead><tr><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><td>C9</td><td>E5</td><td>FD</td><td>2B</td></tr><tr><td>7A</td><td>F2</td><td>78</td><td>6E</td></tr><tr><td>63</td><td>9C</td><td>26</td><td>67</td></tr><tr><td>B0</td><td>A7</td><td>82</td><td>E5</td></tr></tbody></table><p>下面，进行列混合运算：<br>以第一列的运算为例：<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwMjE5MjEzNzQ3OTY1?x-oss-process=image/format,png" alt="col7"><br>其它列的计算就不列举了，列混合后生成的新状态矩阵如下：</p><table><thead><tr><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><td>D4</td><td>E7</td><td>CD</td><td>66</td></tr><tr><td>28</td><td>02</td><td>E5</td><td>BB</td></tr><tr><td>BE</td><td>C6</td><td>D6</td><td>BF</td></tr><tr><td>22</td><td>0F</td><td>DF</td><td>A5</td></tr></tbody></table><h5 id="列混合逆运算"><a href="#列混合逆运算" class="headerlink" title="列混合逆运算"></a>列混合逆运算</h5><p>逆向列混合变换可由下图的矩阵乘法定义：<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwMjE5MjExMTM5NzUy?x-oss-process=image/format,png" alt="col6"><br>可以验证，逆变换矩阵同正变换矩阵的乘积恰好为单位矩阵。</p><h4 id="轮密钥加"><a href="#轮密钥加" class="headerlink" title="轮密钥加"></a>轮密钥加</h4><p>轮密钥加是将128位轮密钥Ki同状态矩阵中的数据进行逐位异或操作，如下图所示。其中，密钥Ki中每个字W[4i],W[4i+1],W[4i+2],W[4i+3]为32位比特字，包含4个字节，他们的生成算法下面在下面介绍。轮密钥加过程可以看成是字逐位异或的结果，也可以看成字节级别或者位级别的操作。也就是说，可以看成S0 S1 S2 S3 组成的32位字与W[4i]的异或运算。<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwMjIwMDgwNTEyMDg2?x-oss-process=image/format,png" alt="roundadd"><br>轮密钥加的逆运算同正向的轮密钥加运算完全一致，这是因为异或的逆操作是其自身。轮密钥加非常简单，但却能够影响S数组中的每一位。</p><h4 id="密钥扩展"><a href="#密钥扩展" class="headerlink" title="密钥扩展"></a>密钥扩展</h4><p>AES首先将初始密钥输入到一个4*4的状态矩阵中，如下图所示。<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwMjIwMDgyMzE2NzM2?x-oss-process=image/format,png" alt="keyextends"></p><ul><li><p>这个4*4矩阵的每一列的4个字节组成一个字，矩阵4列的4个字依次命名为W[0]、W[1]、W[2]和W[3]，它们构成一个以字为单位的数组W。例如，设密钥K为”abcdefghijklmnop”,则K0 &#x3D; ‘a’,K1 &#x3D; ‘b’, K2 &#x3D; ‘c’,K3 &#x3D; ‘d’,W[0] &#x3D; “abcd”。</p></li><li><p>接着，对W数组扩充40个新列，构成总共44列的扩展密钥数组。新列以如下的递归方式产生：</p><ul><li><p>1.如果i不是4的倍数，那么第i列由如下等式确定：<br>$W[i]&#x3D;W[i-4]⨁W[i-1]$</p></li><li><p>2.如果i是4的倍数，那么第i列由如下等式确定：<br>$W[i]&#x3D;W[i-4]⨁T(W[i-1])$<br>其中，T是一个有点复杂的函数。<br>函数T由3部分组成：字循环、字节代换和轮常量异或，这3部分的作用分别如下。</p><ul><li>a.字循环：将1个字中的4个字节循环左移1个字节。即将输入字[b0, b1, b2, b3]变换成[b1,b2,b3,b0]。</li><li>b.字节代换：对字循环的结果使用S盒进行字节代换。</li><li>c.轮常量异或：将前两步的结果同轮常量$Rcon[j]$进行异或，其中$j$表示轮数。轮常量$Rcon[j]$是一个字，其值见下表。</li></ul></li></ul></li></ul><table><thead><tr><th>j</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th></tr></thead><tbody><tr><td>Rcon[j]</td><td>01 00 00 00</td><td>02 00 00 00</td><td>04 00 00 00</td><td>08 00 00 00</td><td>10 00 00 00</td></tr><tr><td>j</td><td>6</td><td>7</td><td>8</td><td>9</td><td>10</td></tr><tr><td>Rcon[j]</td><td>20 00 00 00</td><td>40 00 00 00</td><td>80 00 00 00</td><td>1B 00 00 00</td><td>36 00 00 00</td></tr></tbody></table><p>下面举个例子：</p><blockquote><p>设初始的128位密钥为：<br>3C A1 0B 21 57 F0 19 16 90 2E 13 80 AC C1 07 BD<br>那么4个初始值为：<br>W[0] &#x3D; 3C A1 0B 21<br>W[1] &#x3D; 57 F0 19 16<br>W[2] &#x3D; 90 2E 13 80<br>W[3] &#x3D; AC C1 07 BD</p><p>下面求扩展的第1轮的子密钥(W[4],W[5],W[6],W[7])。<br>由于4是4的倍数，所以：<br>W[4] &#x3D; W[0] ⨁ T(W[3])</p><p>T(W[3])的计算步骤如下：</p><ul><li>循环地将W[3]的元素移位：AC C1 07 BD变成C1 07 BD AC;</li><li>将 C1 07 BD AC 作为S盒的输入，输出为78 C5 7A 91;</li><li>将78 C5 7A 91与第一轮轮常量Rcon[1]进行异或运算，将得到79 C5 7A 91，因此，T(W[3])&#x3D;79 C5 7A 91，故<br>W[4] &#x3D; 3C A1 0B 21 ⨁ 79 C5 7A 91 &#x3D; 45 64 71 B0<br>其余的3个子密钥段的计算如下：<br>W[5] &#x3D; W[1] ⨁ W[4] &#x3D; 57 F0 19 16 ⨁ 45 64 71 B0 &#x3D; 12 94 68 A6<br>W[6] &#x3D; W[2] ⨁ W[5] &#x3D;90 2E 13 80 ⨁ 12 94 68 A6 &#x3D; 82 BA 7B 26<br>W[7] &#x3D; W[3] ⨁ W[6] &#x3D; AC C1 07 BD ⨁ 82 BA 7B 26 &#x3D; 2E 7B 7C 9B<br>所以，第一轮的密钥为 45 64 71 B0 12 94 68 A6 82 BA 7B 26 2E 7B 7C 9B。</li></ul></blockquote><h3 id="AES解密"><a href="#AES解密" class="headerlink" title="AES解密"></a>AES解密</h3><p>在文章开始的图中，有AES解密的流程图，可以对应那个流程图来进行解密。下面介绍的是另一种等价的解密模式，流程图如下图所示。这种等价的解密模式使得解密过程各个变换的使用顺序同加密过程的顺序一致，只是用逆变换取代原来的变换。<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwMjIwMDk0ODUzNjIw?x-oss-process=image/format,png" alt="deaes"></p><h3 id="AES四种加密模式"><a href="#AES四种加密模式" class="headerlink" title="AES四种加密模式"></a>AES四种加密模式</h3><p>分组密码有五种工作体制：1.电码本模式（Electronic Codebook Book (ECB)）；2.密码分组链接模式（Cipher Block Chaining (CBC)）；3.计算器模式（Counter (CTR)）；4.输出反馈模式（Output FeedBack (OFB)）。</p><h4 id="电码本模式（ECB）"><a href="#电码本模式（ECB）" class="headerlink" title="电码本模式（ECB）"></a><strong>电码本模式</strong>（ECB）</h4><p>将整个明文分成若干段相同的小段，然后对每一小段进行加密</p><p>优点：</p><ul><li>操作简单，易于实现；分组独立，易于并行；误差不会被传送。——简单，可并行，不传送误差。</li></ul><p>缺点：</p><ul><li>掩盖不了明文结构信息，难以抵抗统计分析攻击。——可对明文进行主动攻击。</li></ul><p><img src="https://images0.cnblogs.com/blog/480062/201310/12232452-d3e3ba87a6b24b49b6f57d41b341ea96.png" alt="img"></p><p><img src="https://blog.mimvp.com/wp-content/uploads/2018/06/aes-jia-mi-suan-fa-de-wu-zhong-jia-mi-mo-shi-011-700x418.jpg" alt="img"></p><h4 id="密码分组链模式（CBC）"><a href="#密码分组链模式（CBC）" class="headerlink" title="密码分组链模式（CBC）"></a><strong>密码分组链模式</strong>（CBC）</h4><p>先将明文切分成若干小段，然后每一小段与初始块或者上一段的密文段进行异或运算后，再与密钥进行加密</p><p><strong>优点</strong>：</p><ul><li>能掩盖明文结构信息，保证相同密文可得不同明文，所以不容易主动攻击，安全性好于ECB，适合传输长度长的报文，是SSL和IPSec的标准。</li></ul><p><strong>缺点</strong>：</p><ul><li>不利于并行计算；</li><li>传递误差——前一个出错则后续全错；</li><li>第一个明文块需要与一个初始化向量IV进行抑或，初始化向量IV的选取比较复杂。</li></ul><p><strong>初始化IV的选取方式</strong>：固定IV，计数器IV，随机IV（只能得到伪随机数，用的最多），瞬时IV（难以得到瞬时值）</p><p><img src="https://blog.mimvp.com/wp-content/uploads/2018/06/aes-jia-mi-suan-fa-de-wu-zhong-jia-mi-mo-shi-02.png" alt="img"></p><p><strong>IV是做什么用的呢？</strong></p><p>初始向量IV（Initialization Vector）它的作用和MD5的“加盐”有些类似，目的是防止同样的明文块始终加密成同样的密文块。</p><h4 id="输出反馈模式（OFB）"><a href="#输出反馈模式（OFB）" class="headerlink" title="输出反馈模式（OFB）"></a><strong>输出反馈模式</strong>（OFB）</h4><p>密码算法的输出（指密码key而不是密文）会反馈到密码算法的输入中，OFB模式并不是通过密码算法对明文直接加密，而是通过将明文分组和密码算法的输出进行XOR来产生密文分组。</p><p><strong>优点</strong>：</p><ul><li>隐藏了明文模式；结合了分组加密和流密码（分组密码转化为流模式）；可以及时加密传送小于分组的数据。</li></ul><p><strong>缺点</strong>：</p><ul><li>不利于并行计算；需要生成秘钥流；对明文的主动攻击是可能的。</li></ul><p><img src="https://blog.mimvp.com/wp-content/uploads/2018/06/aes-jia-mi-suan-fa-de-wu-zhong-jia-mi-mo-shi-03.png" alt="img"></p><h4 id="计数器模式（CTR）"><a href="#计数器模式（CTR）" class="headerlink" title="计数器模式（CTR）"></a>计数器模式（CTR）</h4><p>完全的流模式，将瞬时值与计数器连接起来，然后对此进行加密产生密钥流的一个密钥块，再进行XOR操作 </p><p>优点：</p><ul><li>不泄露明文；仅需实现加密函数；无需填充；可并行计算。</li></ul><p>缺点：</p><ul><li>需要瞬时值IV，难以保证IV的唯一性。</li></ul><p><img src="https://blog.mimvp.com/wp-content/uploads/2018/06/aes-jia-mi-suan-fa-de-wu-zhong-jia-mi-mo-shi-04.jpg" alt="img"></p><p><strong>对比CBC和CTR</strong></p><p>1）CBC需要填充；CTR不用填充。</p><p>2）CBC不可并行；CTR可并行速度快。</p><p>3）CBC需要实现加密和解密函数；CTR实现简单，仅需实现加密函数。</p><p>4）鲁棒性：CBC强于CTR——使用重复瞬时值，CBC会泄露初始明文块，CTR会泄露所有信息。</p><p>如果有好的瞬时值选择策略，采用CTR，否则采用CBC。</p><p>如加密成绩单，可选用CTR，因为学号唯一，可作为瞬时值。</p>]]></content>
    
    
    <summary type="html">永远不要试图尝试自己设计密码--Dan Boneh</summary>
    
    
    
    <category term="笔记" scheme="http://example.com/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="分组密码" scheme="http://example.com/tags/%E5%88%86%E7%BB%84%E5%AF%86%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>编译配置SGX-SSL</title>
    <link href="http://example.com/2022/10/11/Ubuntu18.04%E7%BC%96%E8%AF%91%E9%85%8D%E7%BD%AESGX-SSL%EF%BC%88SGX%E6%94%AF%E6%8C%81%E7%9A%84openssl%E5%87%BD%E6%95%B0%E5%BA%93%EF%BC%89/"/>
    <id>http://example.com/2022/10/11/Ubuntu18.04%E7%BC%96%E8%AF%91%E9%85%8D%E7%BD%AESGX-SSL%EF%BC%88SGX%E6%94%AF%E6%8C%81%E7%9A%84openssl%E5%87%BD%E6%95%B0%E5%BA%93%EF%BC%89/</id>
    <published>2022-10-11T12:34:51.000Z</published>
    <updated>2022-10-25T04:01:28.322Z</updated>
    
    <content type="html"><![CDATA[<h1 id="编译配置SGX-SSL（SGX支持的openssl函数库）"><a href="#编译配置SGX-SSL（SGX支持的openssl函数库）" class="headerlink" title="编译配置SGX-SSL（SGX支持的openssl函数库）"></a>编译配置SGX-SSL（SGX支持的openssl函数库）</h1><p>由于在sgx中需要对超级大的整数进行操作，于是引入openssl库，下面是一些安装步骤，主要参考的了官方github给出的教程：</p><ul><li><a href="https://github.com/intel/intel-sgx-ssl">intel&#x2F;intel-sgx-ssl: Intel® Software Guard Extensions SSL (github.com)</a></li></ul><h2 id="所用的电脑配置"><a href="#所用的电脑配置" class="headerlink" title="所用的电脑配置"></a>所用的电脑配置</h2><blockquote><ul><li><p>电脑：联想Thinkpad E14</p></li><li><p>操作系统：ubuntu18.04</p></li><li><p>处理器：i5-10210U</p></li><li><p>内存：8G</p></li><li><p>硬盘：1TB</p></li><li><p>在电脑BIOS中<strong>启用</strong>Intel SGX。重装系统不会更改BIOS中的设置，所以即使重装系统，Intel SGX也会一直保持启用状态。</p></li><li><p>安装如下工具：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get install gcc git cpuid<br></code></pre></td></tr></table></figure></li></ul></blockquote><h2 id="正式开始配置"><a href="#正式开始配置" class="headerlink" title="正式开始配置"></a>正式开始配置</h2><h3 id="预备"><a href="#预备" class="headerlink" title="预备"></a>预备</h3><ul><li>Perl</li><li>Toolchain（需要的工具，参照我的上一个博客<a href="https://harper.city/2022/10/04/intel-sgx%E9%85%8D%E7%BD%AE/">安装sgxsdk</a>，执行下面的指令之后可以看到这些工具的路径）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo <span class="hljs-built_in">cp</span> external/toolset/&#123;current_distr&#125;/&#123;as,ld,ld.gold,objdump&#125; /usr/local/bin<br><span class="hljs-built_in">which</span> as ld ld.gold objdump<br></code></pre></td></tr></table></figure><ul><li>Intel SGX driver、SDK和PSW</li><li>准备好OpenSSL源码压缩包openssl-${version}.tar.gz。本博客使用的是openssl-1.1.1q版本，之前计划使用openssl-1.1.1p版本，<font color = "red">但是编译的时候报错让我使用openssl-1.1.1q版本</font>，随着时间的推移官方的更新可能之后还需要其他版本，大家自行辨别。</li></ul><h3 id="下载sgx-ssl项目"><a href="#下载sgx-ssl项目" class="headerlink" title="下载sgx-ssl项目"></a>下载sgx-ssl项目</h3><p>从GitHub拉取intel-sgx-ssl项目，这个网站也是可以访问的</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/intel/intel-sgx-ssl<br></code></pre></td></tr></table></figure><h3 id="下载openssl压缩包"><a href="#下载openssl压缩包" class="headerlink" title="下载openssl压缩包"></a>下载openssl压缩包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> intel-sgx-ssl/openssl_source<br>wget https://openssl.org/source/openssl-1.1.1q.tar.gz<br></code></pre></td></tr></table></figure><p>这样openssl-1.1.1q.tar.gz压缩包就到了&#x2F;intel-sgx-ssl&#x2F;openssl_source&#x2F;目录下</p><h3 id="编译并安装"><a href="#编译并安装" class="headerlink" title="编译并安装"></a>编译并安装</h3><p>我们现在在openssl_source目录，下面进入linux目录Linux&#x2F;directory</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> ../Linux<br><span class="hljs-built_in">source</span> /opt/intel/sgxsdk/environment  //这里应填写sgx的安装路径，我的是/opt/intel/sgxsdk/<br></code></pre></td></tr></table></figure><p>使得sgx开发环境生效。<br>无脑编译安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">make all <span class="hljs-built_in">test</span><br>sudo make install<br></code></pre></td></tr></table></figure><p>安装完毕，可以在&#x2F;opt&#x2F;intel&#x2F;sgxssl&#x2F;找到编译好的库函数。</p>]]></content>
    
    
    <summary type="html">Hope is a dangerous thing. Hope can drive a man insane.       ——《肖申克的救赎》</summary>
    
    
    
    <category term="环境配置" scheme="http://example.com/categories/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
    
    <category term="sgx" scheme="http://example.com/tags/sgx/"/>
    
    <category term="linux操作系统" scheme="http://example.com/tags/linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>hexo配置博客心路历程</title>
    <link href="http://example.com/2022/10/07/trash/hexo%E9%85%8D%E7%BD%AE%E5%8D%9A%E5%AE%A2%E5%BF%83%E8%B7%AF%E5%8E%86%E7%A8%8B/"/>
    <id>http://example.com/2022/10/07/trash/hexo%E9%85%8D%E7%BD%AE%E5%8D%9A%E5%AE%A2%E5%BF%83%E8%B7%AF%E5%8E%86%E7%A8%8B/</id>
    <published>2022-10-07T15:09:12.000Z</published>
    <updated>2022-10-11T13:44:24.042Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://linzeen.me/2022/07/24/mac%E6%A0%B7%E5%BC%8F%E4%BB%A3%E7%A0%81%E5%9D%97%E6%95%99%E7%A8%8B/">Hexo-Fluid实现mac-panel风格代码块 - LINZEEN’s Gossip Blog</a></p><p><a href="https://forsure.live/customize-some-effects-for-hexofluid/#Mac%E9%A3%8E%E6%A0%BC%E4%BB%A3%E7%A0%81%E5%9D%974">为Hexo-Fluid自定义一些效果 - ForSure’s Blog</a></p><p><a href="https://blog.yleao.com/2018/0902/hexo%E4%B8%8A%E7%9A%84aplayer%E5%BA%94%E7%94%A8.html">hexo上的aplayer应用 | Y’s BLOG (yleao.com)</a></p><p><a href="https://blog.csdn.net/qq_41380292/article/details/121886741">(25条消息) hexo博客fluid主题添加aplayer组件_ccjoffrey的博客-CSDN博客_fluid主题</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://linzeen.me/2022/07/24/mac%E6%A0%B7%E5%BC%8F%E4%BB%A3%E7%A0%81%E5%9D%97%E6%95%99%E7%A8%8B/&quot;&gt;Hexo-Fluid实现mac-panel风格代码块 - </summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>现代密码学作业10.7</title>
    <link href="http://example.com/2022/10/06/%E7%8E%B0%E4%BB%A3%E5%AF%86%E7%A0%81%E5%AD%A6%E4%BD%9C%E4%B8%9A10-7/"/>
    <id>http://example.com/2022/10/06/%E7%8E%B0%E4%BB%A3%E5%AF%86%E7%A0%81%E5%AD%A6%E4%BD%9C%E4%B8%9A10-7/</id>
    <published>2022-10-06T14:16:35.000Z</published>
    <updated>2022-10-29T07:04:42.617Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="9e7f3f2126422551faaed4624ed609b0b7823e505c2736be42621d30147d7f2e">e7de803e7160295f95749b4342f9c4f199704f8dc0becdf40f3554da5420de4572db7b1bbb0efd0782e89b61f880b558d4e9acb391cd0ccfb2894860387eb2d817548b9ba250680f7292fd1ab4e5999e67588b598e8646536ddcd48b6f9255bb061e306529ce1ee434fb82c90dff30905ebfbc0b80c96367d267b8b68b31d354f6621ee1610df07d0207b3e7a69d61d1ad45829fd439d7143c0bc47921d173315cbcec09b70f028302356b320caae3d3cc6155ce5a01a16d9ff000e1e38f39278f6fdd55e5f57d20c2122838c083e39cf30cca66119044ad09daa47474721cc23be9fe0ff6d25d30a0122de5b3646cae742ba2260998d5159e9824c741a13753b93928097f54ea57339abdb6b774e88b7602c7c4a2b4ac580e122d465ebb1bc27ff23b49c229f066b00f02f6e69ee26b1ca847e149dd26e858391d7da53746ae4d39c4ff90bea99edb8abfa16f4bdf1266ae2336c79b11c44198846a16056bf195a1704ca2c400476e5e7afeaab1f22d1fd112386ed9c88d883917d0c27482c0987481903ea63072160058ea3af09a7ea02c6c361cd432b2df7c9a261ce1e8c8f0c1151cc66cfdbea09bc8493483b486d191d4377b058a448da61a21e04031017f54f029519c0e847d6cc8bb4f828f874ef92c3ca2b61ace6c97d9de533be44b61cc4eec2d869571d3622a766f7b79b9d63032f4a53dd0a4fba24a9a26d9b1add6e95a40894c1d0d6536541cda859308c5dbeecf4bb05103adfd7dc474b12d1e6f3ae5cebf38fe3de205ded7b4bc0b73e518844319f0291f7327a2f72a5f558614ee50c4417f7655fa0fe11b0a8d8b59f674fb6e03a140033bd6ea0624fec3053e66537aa11b8a992f69cf2155233ce2f30a40dbddc73e34a7d701ea22380f07125b1bed4ee6db8c5afa9bc4de9f05960c3a1c9e08785122947710b790215f8f2d626bc04b001f370e1ddc853d21cee95ee22658bd893974ac3df37dc9f45a269f802b94bf23e93874d94297133b9bb66574b81501b30caf06a332d76da72728ece6c00ea138404a017192602b26bead272b43f74d69c214df7929d4f5a385eddea12774dcb7a39c5742be57c9b25c5cc28df8821b2a1219688fd05d9e9d8d444bb2c4aa43b8c2f721034f32478005882fd39ba676f7ef077b5570bb306843e8b4401d55366d9b9bc75f0af82aaf30f05744b0f6162c81a388701b2f9cd75c0564001c461681a56f266ee0706068589f3d77158482ff14ec57cc37523fe6cd0e9f07768a33d36f6eed385f257786a0815a5fbbdb48871215da4972334db686b022beb0a1d51c0570786145332733a3430293fe49595800b9e1f8157401ff4a2019b40ae29044afa4b90a2aa8cf16ef126d524146d3115a5cbe244b34589db594aa643c1aa5634f7448019f16d0ae41e57342b4f464931e359bfbfdf0c862e9f05266edaaa88dec5be23dbe8f23946987b4dd49f085c22c24dd4e4819e2030419723e7ea61f7ec9bca16f34bc8ee533d82d4a6f6f866eed5490079a67403f5aa4e1bfe90690889709d68821060b612edaf604e95b4fbd7625edf357e109dd50b42146df4932a3bc36d5430c13ed54c6afb56831869546c86aaad3e649d58375a79462937ae92120c205c04ab7860e0e8e5fa9e4facbc414836944696827623845d00abff07d8d256895bdedc3eb0dd5364cbdeca453e47706e1531c3850c1f896035f4fb3534dd8bd5c3224e4605d262060c67e9320f97641eefdf1a2c9be55549ac508372e49983548d81050b0216cc1531c4067a595245dd965e558b4ced31186634aee31a9afb5238a656a51d549f865b6f70330e2ffdc5535b2b7738cf67ae351e67d2811b9c9d0569834341387101cf8bb1b4ef5f866bd83da97f5dfeabf55a904f0b5337e64d1d4c180c7857b574cafc73f4f58e4422049aa807d12f559c87ab9008722ff553592d2436eb6750261871c7257e2fae4bb1b5b5125a7d137ec623c40d3da40a72182cf1787efeb566e7bd398576f86b21dbc5cb4b53e9734eb451edf860c6a2f22d8680844bc61725ddb7793a0c3a56ffc6ae5061c643c5bb315adb7de3dddeac5fedeebc7f2c316e641372c70ec7ff653c7a3e25005b1e6a05315fecc95e0cc9635737aecd4e9bb7ad7811272ea9aa76e031f15fc4b0a28c655fb8be85783d0171df5d4a8f9daa5f6875b1a67f55d4dc3de0c0d307c3be02540fa19bb53e339d847e028c9bcb0bc9838ea72fd191b682e58f1f8b8daee32aa3b7373b8a610451f856166b14158f5c8ed0e5f3358f6ff70f8fdf8b39a4090f00bb1f77b275b409367880cbc3dace0d930dce57785fbd2caa1557ba8e1bf241e6ba836707a8d52cf6d0b6f00237ceeb94467a1e4befff12b79ec9bf8a9c5fe90d311169b5d34621e2d789b1ad666e8de03491f56c0a464858530f7508891002034cfc3908a1381dae8a16c452e3d5348ab641d33d344b55dc9b9002f140e0d2ff9d8ee5576b7e0f9ebce156e75edd8dd553a12e9f5ed7593291bcd2e4362735bfc38d37a643e0f5649f75f2275caade20921d271977d16d5977c2121053984c6b6d51630decc3f22bb145c135c414bb76dbe3e27701add299d3fce96da2d0d24459e3864cd22748120e6e0dea00cc2229d5acff9e6e2ee0aa224a5670d58e7e2fac79bdb6bd2d54780110a710e1080b5cb3b9f551fc2c94eb91cae0b09da337f77760cfce610b320a24beb5dac7c838e01459b0bd9293e2ad8bdb3dc601a02c277800d3cce8aa7d0222fd2f368690f75aeb1f9fbe8d7500401abd8ac1f427a424903e90815f02eb2d3955b57d6fe96d28d6750e217e866adbb03cca2e1de2d9231965c765167578d5412ff89c7bbed120cfedf4739a892011039d8097eeb330cabdd4bf44a1c70d9cad51eef5fcda3ec1faa84b5e551c9f5d6c88ab6bfa0165b1e0e8a4d501ff248986eecbcf2d02c0ee4bc8b9cbbd2be9557a3eb2a0fd60d20a1b3ba3b229134561d7597f96a005846417bb4e1ee8e7fafa526c9d46776664a0bdab90ade868c4f927c0274311f087dbdc55289949665e0e371231ce00d424fae4d3b70e4a915c83e4a0052202bf56e7fd8dcb84245bc5fb6743787f52ee0d249e0e31ed6ebd62037f36d8ad8f3e1f5be988d973e79097cdb726464efef2738e5f52e384dd34e0221c124da339cd10d3718c70d5a2cd369bc16d76915e29a25da2ce5f0411c11ce6995989b590250b8c8bacc09a233bfda88c033eeb75b895102d6bf23d9c966fca1a0f001d665f73f0a79ada9a10128219e04ee5b273086a886143a701d457ac4d53965f5bf4828627e01331aebad63f6d4ea59aacabfaa7f6ee758fe64dfb611c87ffca46f2e9e8c77444950f42d32046123a2f6ccedaa0eefa7f38d7affb0db84f2724f81807f1dafbe0b68804b971288e76c0c1b88c832af3a63850bdd57c7ad150b7727f8cc283b30c57532930da1bd6f3f7e3e1f99b6561409da80b84eb1008d8729387c3f988f15822ac8f6030c8347791a150dbee82ed0e2f430f63b1ac6334cf723e2a9ba55e667449a086c28dd43173d7b71c049243f8cdd74d44c44170423c01b0727970ec60f4d26cb238bc574ff77c8e03c6b0b11aa41bef16fc90591813c5d47fb55df94ea63c61396e638b28c24e1253e492ff4babc4731b715aefe0c1ca5735061735ddae9035aaa1c33c5b04c804ce49a69c5983ee4254d0a5aaa1ef5973d1bba06e4940fd8da6b33ae6af4019d3f94e0ca061d682b8ad6c234af725dcc400d7a9f359c0834493c793796d503e1875b63f5dbf116edd4b4bf525762b38e79c81d98667cdd91257e7bf34d67d50b355fcbcba5cbb130fb5707f6568896957de0004e0f5faecfa10fe437fe05e8c547a6256495dc04e5c350a18c2f48649030d5eaa16f5bcd1a77dd899def91e1dd73041464ec0c2d473f8a46b0d598acb95ad043554a0aaf75f74d11aa9432d69f5d1522a78983e3641849ac05bccf4fa60782068048c71ee59da2888e4ebd5e81e6e80a7c35334cb6f1ce2bcd15faefa0aaac874c4b4866ed7b7ae505d475739492a3c9494a66bb6218954eaef7291e80eddb3f59401ea13d7737df3c263e7ab66399e1c70bb63f78da38ba69364452c81f560c13b1e6a7580f05415b44e36ff4af8d97eafafb99a0355a6805cb35d241f0e605f6e3a96ec920f17d412a42e6b622373f0a3e450d53f0295025f7f82712bb9936daa44e3f5032426fc87316005dfb8a72e0750e91d1b1f6efa5c907927bba80411bd3d93c193776a4165cbe878fc82c0c711a1c190b23f138df41b3e51947b4ac767d10ffc868189e4dcd9a8927fb75288aebbadc1170003b679986d77b8bc3d3d0de41ebf16850cbffb09fd13d7f0d7ec80ab640346e9d24d6807f574b53d44adcf489d6ae2410467b249dc77390baab1c59d93fe8c192740e9d4c36c0f6da32147aa12d4172c8572149daa7d8952876b187cc53bd320aa2a1ed72854ee19e76a3d9dbc49f42448e6c4759f1e604d27d41039061318ce772f8e4bc62238543db35cdac762cf7ac270a1137fa162d6587cb56d5575e5e7a1687ed5500a7b236afee83b43178d204102cb87fb4c311f1a4e7006cbb5c11c42bdfba440e248b2cb495bc564d9cf46b2cdfcf51e1b589caecd8403a43da5ab6c53297e22568f090534729c52ee422fde6eb91ce24328ffc72268fdce00eb0285842f5717e2e93d2e5a8ffad6026eee019239344b6e12815532e9556cd1a7a2fa266dc2ea776ea6f8cb6ba51412fda215a198a017eb245568f2020216e969c02aa81c735584f94d9976c60d9f9d6aa9e69a3a4e57dfe4e5eec889476d542b18a947497b1109f03ad49799d960f932ec4ac5877829b8d85ac32491295b44ced82512b4c3caa6ca566b9ff522082cb446cb830ea5739e2a85c92375ec023db58dbc60828eaf9626c499b2dbd219b6e9f9ec327a739e70668c7e2ba330c2c3866b549151761f61089a74c69f408f247db4a7239ccf8a08b66a404d51db3637e7501c2eb8a26172f9533f85ee90d0276655b30810deedf5eff0105aad20374dc29c11974e80ee44e212ca356de56055665e54097b0414edfa53a1d389db18493d9d0fc7c6d5021d78cf7b055f05a65468ab03694e66d68b963aadfcf041ba11885f02e3b713514945ee08001d27773b5a836b3901fb0017e586041e5c027b8c4e7c466e5aac316f19b60a468c39188b2d7b2efc92ec478f2f86aae32dc0a7b691d1a6eb7dcd90bfa2cd72d0dadef06b0e5042343903212ece18d2475c55e2eff3a2e22e864109b4b7dd335f5e9ce6c14048e30d89c1ecb7839eb4b028b285975b46b7fef1efbeb6313d8d6cbf7c9dc470677cac926321cbec9c7eaae860a4c9b8d4eab0df807c37a2515cd2e5d9bc00f29335c11782fae42f74956c3e266fc9d273211833822cf070753a390cc5c1f6f22806732b436a6b041bc57a709b37c5864c5c67c41aa5a633d9e8aa0b3d35d7da8cec33c71d5af5d54856b31cfa4953c66eff643d4b7d66372a394fd0504c8f50c66498d1531a8250a64f886ec8bf1f7502ab37c60d2bf296c1e8fa1c12f78fb01de29653cbcf292f420046e3b45621476c299b10a893d04e8c37f851fe4acf5ebadfcebfd0b1e52bf3708d4f1a2d1bd3c604a48d902daef7827751e8934e590b745e0773cc121c68a3df323eab3adf37fb0a62eba52040edee2bd4c31a65fe45d8dd778a4e5504c3d0e3ea47c38f5f9691273d65ef0ed2d0ee4af7026eab9dc5ec06766f41750077039a099efd1976a67facfe9395ff433c331d7a4acd5fffd6fe3a1aee70e8d019242821b83c3583248e861e155580d9e23ca2186716d97f76219cbe7c48cf988a2811e2833f17508b8a45a7119ff983b940bb6e9508d8473f8af85732f37028402e03de929a6f2a2bd4a3637c50d6a0aea7f5c33543a626329e6cedfd233134a2204c168542ce47b9284a0cb68f850560fe1c77196ddd67a8524ce2521c7fb094549f0acaa90a3378953e90c84cd03f8d31054d51a2189078242f7f65a5cce07895cd249a7a162e875fd5ae997a73e50adb647c37dee49041978dfdf414b7c33970eb13761405fe5de6ec95f1a27030f271fd61e9405fbb36998d6bce57f959ed8b66e6f9e5a27085c0fbf6188999af7bccc1e30b5c236290ae19fcadf56e79da2e56ec876c5b77d8159ad3e29f34ece7bcae9f613dbafa79a2f21d190aef7fd28c4bec10e94f1b14274aaae02c8758878e6a02076c0fc66ac628d425e005a8b559747102842bf4a0e6498bae1da99f17a8a3382d215d1b7c20661076864503f1600cc47075fda3c33f40c61f55d0129c8bb2c4b489d941f7a6c091641fe2fb2c0e77f4439482ad0bdeeb348b574a71ec04b2466096d7a779a6fc02a721a33a689be9f82ecc644aeef519bb427a9075b8436aaad97723e85b60b8e5cff4266ad050780804b62aa7200bccfc1393b855f4741dceeded9fe15616ff95ff53b49a638c509f26bcd3201ac6be8b8226ef2df844a5fe5184ba180750dd2b4e780e4b751e11ac410785e3c11e26a62af937462b7f8e23c8b6db3620f525acab259a41aba77aeeb52d63e4aa78194ae537b9e51eeb7272993331d789042509adf522ca51ee84b31b58a50dce893e248beb5851f86148bc0ca2170ac388cbea48d6a4dc66da52ace0127c8df2b77a910f38bcbb75d91dddb38255f4859fbd5b1482d9036f54765198107c0b1d16c08dae71dc14bc9947341fd1815aed322fd0a23d22107cee54c619f3364fac2f20d7640be0b989d4c3067242d62460c2450154aeb45622ceb8c0082714836b0aea83fd4b4fc27dd8e2838556a8df888ae31dd259e68ab2f3b384e0779c5746ae82d19a93c054c65cb3a94d93d48dc24124573c9c0b001621ada059152afaba5fba170b544667b9e2f1da95fc622878feb1f73fe411a91b9590feae1308e510f64f5a16c80fccee1b3051f4498c00a74eeb5e6d1d42aaad303fa37e404fe72271b852dead37c40af05354d5b313cdf4671aa809de7b1ad206c222a02c02e88fed3ee7aa49418fdf8ae6135cfd1f83a429d9e7c414478067a416914231788aec34563b9666820d2f911bf0548b6c7736588a6ac359319f45fd0fd3884c9df56f4dd10e45985fdbf310db292c2ea602522cd1a505a91b2c1b6f9c2ffed2e72f0b183db9795c4e82304bc5271e1a0729cd93061266adf829d845a5cfc87fbbfa994761385c4beb1bbf41ce28f9ce177b43e61d641301c91003796db74811f512079e0ae97bc32bc1859cea5fd4edb1a7d54b4ebaa19583bfb09eeeca5d975bf1e11df462acda25c586593fd51de7a8124253a17cf67e6d24a5f2a758821d5dd34bee6d6221b82d67d8ffadf56a36f5fc8577e509b70b0cf9f820e35bce898918de640bfd236dde6edacded0882a43ccf0315aa74e8718763e83966c5d2f5f18935e20780662bd30ba41959d380afadab938301c9330dfb3ee776cc7b9470022262d07def628f22e26f7dde3f373c3eb43441cd6a9015d2882da619354bb4f2f35680f1eee858ff30f4800f4666d969f4fcdec5045a4f7a0a28d34dfa2a2efc1db0c419f0c37ec512731019329a3aaf2fc2363b1887f004052a46c2138d27cbab7ab8f8c74585dc85ffe7aee202902bdce5f6cd5cce8c68df21730aec6f0aa3dbf394f0c4df7842152c0cb9e9c98bc606ee737cf64f1a7b0b129288fd87298e10a3e18e4fd9080d077e6e15ad28067b4d2b90e78afc8b4669c635403debed6f432473b495159f889dd6385e4087c402928a80d0be4e6ac040b56af2a568589e6b385c484469d780e43e146deaa23f841c9f013003e387252880337a1bc939a00d30af6c240a65069934db09d0f65217bd63977159c806e50dfdb4d03ad1b0cd35e31f4cad718c3bfdb890d876944d7f51a8dc56af373933a513e3ff4325cc6acdf56bf84ed87afdc77ec0024243ccc7f37c14869104fb8b5fca94546e2f862cfbfa5e090fcd8dca6d88e931e0ed86df24786d62cc6156642f80ea1caeae791b87a5b7f6498bb93d30cbb8f684626a5f199fc4ab39cc88283e94ffc7136f7abdce53bb9478aae25dbf50c6b12949448f6b3b6cf904968b3b14ea3d8326244c3d7929b567f5fff7cb876f51eb727907821337679122bc537cf9f36fc98772bc1e039d2ac5500f981553b574d895b3c408be1c7415905bd5df1704a9630cec9df5f039eaf5344278e693b787ad4266c47db3762f41ec9023da69c1c386cda78d1f3af169b995ff5c087adf6facfba22e442fc9f79eb8774d5b8a8bb1c6d9fd504634bf8fb20fde4fa86f3169cc1a2048ec4f066b6b3db081c583a572f3519f63794bf7e24cf65b5a04be772082d9dc76b3eeabda847bae2471a523611492c905f1f79b8b43a60d8a0cc61d8d6f4e7c5a644fd1bcced18376ae62f6df27b1c777a47a614f24ab5f20f4ddf6a42619f4df8366daf6386638fe904300d9c3a5a3f86e94e27fec953b42be65e1553b774b2f10f519b1c682d3d266fde5fffa8b0f75f7ed7ed18377061c2e39aa29a907ff942121b5953149d726da30d328b439b6de21d99c28d2a69572c09b072180b420a4620b4da73402e8fb069ce331b16c328dd0982b81593b8048d97ccc6ddfe4907fd0144c0672917fed52ff423b6ca68a470e838ddcb3c53263bd848c02d3df4c5317370a043f60d8585819f1b24f9e442d4cfd9c290b297783b4d4d4b5bb78bb4e45eb9cfa004a77d21725e4a517d8f843b310df280492757d9783d3cb111d08e8698267f3c189de7188be3e12a73b10570c06ce6a62743fbf1d1ffbe887fe31e70e4d08515dbbd8eb74eb00a236bb852ddb79ee1535effdef71660353eb266c261ba287c4fb226afa55f001fccd27d2e7660acb8a2fc430ce704cf27d2335b972a516d72d2346a110230505f56e5bad1c7c5f5bf780990283f6176959272df9b8050fe286fcbc5494291b4a95c09ba5827a4227c365d2791f4d101118b6479c8ffca1df985b438f8b2dd7b5eadc71ebface3e4b9536a48fb5ab7645de1cfbca5b2397ad79eaaaa6f989df2799916f30ba20359ecbbdef9bcdabeb688b0a32f84f64512477ae1b0131c54ff4624c2a878e6139108bc5a5b1a2351a61b0b0d449a29082a431b033a2cb39026d903baad6ecbd6dde8a62efa345780732a34fa9fc6b850c6ba9e1c26216e073ff7168e202a54e9ec4c0f675f19534a32f4eb94eb561bb59b62152fe4e9bd4c6302787422fd9a6f2bbc75ed8da6d4d9c944856acbbcbca18ea170b79dc9938153de50b500a3c3a2da33b7c4fb535218509e2860fae16ad033ada496fdf298486f2135a0c9afe5b8a3805fc054b280816dfc5bb5b94c61583a392594149de9dd76849d3e551281a5de847992f36500af9e39ea8bc6a1d2b94144751e7e51b8201a47946436298c1a4857c7f7fbc152fd2a9d3bca9ad14a75defaf4b98a63c362ef107f305cad04c19dd2f87ad853b4a8be4348639c672ac26d38f175cf69827fa681c4ce2625fdfe82668563268fe2cd620fff227bbff4549704f822641706656556e5d5f05253cee92d430a74387806bc8b023e629c3dcfc6b329f9842d27d676bc8abffff97a1d34c5d09ec72ee1474e0e1b281017258b4f28917a52ff6c83e491ff26fbd06dff96d7a11c34c6d44620e95c1935d8cfe16de279c820832c9ad164da66923a316dcb9900dad374204683d65f64a7dd9edb9b8662bf8edd9ab8ecf66a65ece6597921bf9b1538b6dbcf8974f94e812d39195c25d21263491e23c33794b20f3ccbd2c9c54e5802ea2d0b812c72d2f8dce96567c61fa7760d74f5f4c64f4f64a8a394278844bdb5e524bccc0039957525c0e0efe28b810eac0e48aa7e9dfe2b7b5f20780a1f7a991c944061d4993f6442e78a2c2d22dd684f1ab8b8ae2c80abd349df4beba3ff7665feb31eb955266763a49ce679f10fc043900bc3953888533b92dff3bb8a51e9ae8eb8deab89957d079b40c2c9c8bd329bd9b9921bdf5fbf62d34539f175664ad1237a5685cd88950302f1b9fe2b065c85f02932bcecc3d7a83ae6ebb31e27e41fb7da161f0c6624b3176286cf8378c469b0b752436f450f20447c3ae0351e0fb9d5e20b16894d44e37b9b4b794d1bdc5174e66a22acf45308c1fa8a4b4eca260e506c3ba504d52db7312631289f504352ed1510f3bd8a8c4815ca0d9ea8a860ce756ba909aef2b40db14e8bf15220faf498bc2f2735d740d6350a0092d7a499953042b771323acdaad57b949b7c5d636711cb96909c1a391f87fadaa1b4eaf360ce4ebc9305ca1b55d183b9711a04b7052fd13e2eaec048a6aaf037df62a9889ff85e2a2eb2726fdd43807495d96eb96d3798f481e2709876caacc7be3c1c21f873a31724826d94ed88c9da7e2087441d57f884c802239cb5a82aad859721a5d071d330a7543380579d6d5f1f17c93e584faf85bc97af51012c0a2c8e95acf72d4508cb89770be37ca51dd1c7d3bb8654393fc913d5ae793e683f0cb5ca1ef3786d7a09882566100d572a202185eca5e9720d910d2c70b2fadd29d842bb1dbed0a9f8f7fa987f248db686246c27e69dc7d50bfbc4bf86eb387e6cbc2f2e7ff98646a9282ac58eee597e4d0a69df96e3808fef89f2b513738cbb2ba5fdd0d239095e023a7181195f35039cede43e7d01b9be750f1185d95c26803431d1d0b2e3cd77bed226372f890f8ed9f4551a6abc272fb982988f56edcc6cd59450e0eedbbfc4db936cbfbe7341091520da912c6b7a9b38e4315a346d0eb2f1b9dc2a5959ff9bc39aa5a00804f0a7481ca083d27474fa890bfb8669352679e3c531812b9dfe0d59487b412d42b7d797cd46ba1e2fceebbeec77fa4292930195f5297b2bae3875f37b567e184de5feff55f4cb4d81f19738a3a811c459da5a0ad14693854817e346986018be252f5023b5e93494cb7d94851d5037dfef5e623943b16f825c84a19e6e69e3c0e912a78534e88fd8d264e65750f071a8c6acc5fbfb8c2b5c88162ac76c6b9d7ba5e858a6049a2f3a67c2585ff57ef8d3410c5181f2ada4d438d0b1542d47d3588766798eec079a8ec878cb7634683ce599ce378d03318924df2da7776c63065275c5f696036ab9b4db4a3b4d07901d7b691ceb50729e8a74064f1e25e5da7958717901ae39e98733ff581957e2d08749c4c6fb21273a6407beecdcecd07d86f44ec0e39f4b38ac5160c134831794b030af59a1c3806d3a1582c1a5f13e9f807ae6c838e8d39ee05b8e182e1ced6853982578ff383b8ade4eec2ed6da079e51848a170455bf35cc655686e8314272e120291deb91f83a7b29a5b24b9ad5cf01a29cf083223a6797547a42eb30a1a8baeadc315359af5a194cab076eff47c053cd175064877fc52eb17972d8dbf506e9c26b1a750eced917d7bf73f3bb43b714224a016abc8b7968c4603f3a646ba05004f3b0a436fd39446747e5a6cc566cdc24b280d125247384a86bb07298a2b3e712f8e3e381b7d9b33c1e74e0f59942d96d611efa1bb50dfd6cbd3708092f1ed9ba0cfc84dcb3d9133c66cf39350b580db4dfd4ffc57aa24b371352821d897a1be018978a477397bb257d9dbb1014f3da3ebc53cf09d649eb276991be0e7c60431acb018619e8e2a0a4549c50c53c588c4e996db8b8cde97bc8675ed0a55cba9a0110f0bd98cb384815e98358cfc7de0272dabe4d363ea1440abbaad9f6af62f101fb645a9f1abdc7796367b0e84a77e365ce1f42045e2127defec0571355d54bf150ac96224ad463c663ff95f24f69e74b995b7cbac43f7e94896d40d296d6a56215f8148863bea60250d9f6e8e0d00cffe3607de2c29af69e8a666feecbf914e231d9cb915220d6f9b010410df9b605fe748e2383b57ad504239e5292c60d36a040d25090d47b34583a5c3867004b0ad9d5f75c404598f634e18cd40e768a70386a74c5d3692f1aeaa7c610b4a4690590333a7e59bde1eaab003ca269bbf085facfc5d9d37c9d5b8cf34dfc655321755d91022413cb4d089807cfff0d4a7eb5175db72cadad5a858e6f06d33e4d3b93fb0516791eab3d4dae4f16a9402f4aefe939a41368a471d7b7595101cd434c384e8205081896ecfbb3607ae929da7c17c3f752081b348e53b80e3f9d9f972c1c84d589d0253b5e7cb2c03c262b747db185bc94a75ed19902f1470be2d51c7b128eed2e8df85f7a979096d6c7491093b8cd94f1f2f9420a11c67f5d1fd14a55507ee126b4232d23629950bb89ac613a3667f83012f7740058cc039d425b6241cfad4dbb49e01cc19b566dea05eb522d26ab613b0e8fe948d5bb51771ed2e48326a0f7e88d50481f2a741aaeac62f7910c74b6ddfc237649d06a69019acf965192f973b8db14ce5bd2e85afa2b3fcdc330f807fb51982e04505a3500ebfb51453e1b266aa36ca5544f4d75b23876de889d996474683f27af50615f6e60f8559b9c5b640cd0d5e72fba9b0d19cd9ab418c7face84315cf21c59a1f4a36234385841c91f94722ed3141194a5a030ca266c64d99c342ccf097b81dcc703f41f6f36413502ff94387846410b04111635418146429c2f7f98346c13da3c1cc16d0e04a7eae651621313f7f3f722f0b42b1dc207b2912d4d8422bc328c26e7c66465bd8d7499f0a531ffec9f5ff52015e7cd92c8fdd17895a06d3c0ffd974b619461884b449bdfdae34d43ca3b4fff94bbe930afbe1541dbc84e2ea8a0ef4e09a53fc5ef61d098d2dab5e4857342599f309cf295c9cd9b32fbb39af2bdc0df57734114abf4aa5c78ae6191db5c61e041693d09c28b6141ab4b1e0e19ac3ea32f3e5fe2a25e6a805bccf3b3fa2e907f98154d517fdaf9d0b76892f5813c2fe1fe1d0f826080ba73ed726e1818843dcea9d9a6e1f681b6025c1394ad4c8fa87a0a5ff19684dd798dbb964e981fbf1e0ae5f970af7f283281532bc5aa7f3aded6517a6e39c7608cc6dc16bcb90139b0a6ab9567904f12872d31d7bc2e9e6e90278293ca4ec7b85811c70d90c5f4ee5b20172dbd2bb88ee1ad38cf58d05a352ed22de925ce783d14b4640c27d7d812d8a49a23b40a61cb4936f6398b91636f8700284416b0cd7928ba65fa9625af7171cb8b0e4e5c164ebb3cf4fedb324434c492b385ab32bb1a5d96a8726199ee968cf4d8dc00380549c951d64b9d375aff0bb9a588d78db17459cba77fa3aeb5d3b9ad594ed7ebc028de137398cff69bfcb03934ea0f7fed8533d1c55cbc71fb64e2340a409adee75a42c873de29a0d92fad1914e43ff5c0828d6dea1adee36977cf4970e379f5914e032a6efd40c35271480e9149c3c8686396b7892933e76503dca8ee06be34a8a63a3d82a0bcb4375d2b507b6906457c1ff4a5a31653cb65060dba06642bc0c2f13556f00700f0cb5e0e10437cba08dbe5726147f3797e990792f417b84f16f327d4dd0c948cd94b93e159e2a0dbd6aee2b30d918833a1ab4b94f78dc30fff8451ad2b79c45b76f8340209dbfb99c74c1724ec99477b12d07eec1002b1738e1fae14a26ddd37a3b783e35da8bd5e1a286f75096284829e13a64d4de33c3b6dd8594078a3b9e79b2e865f2550377d97fe10c1b5115f94898f29b958577da59325655d555a2d45708e046e51fd1143773a6f7c7c29fa2ccfc4fb3d8277bfc3c570697819796a1085ae0a8acbad9e77e4a79e6dfb7aaf3e1dd5462da6d8d51a4eff9b1936cd2aa85c4c9e7f3b9e00b138e1dfdbbc39e61e8db75f19c7eec4e934fd7c98a03b5d1bc944dbb4508c57d32ddb28bfe1b763ba36c43f0b462cbecb7151c13ce3f8480a6c810d5626bcdef8697d256edbfec1c4896aea50cbebcf8f9783d73ac19da80444b22fb52d05440a7b2cf2d3fc8cac887edeb2222358064c297edb81153edfa98ab37a9723ad408aefb0b1e83d760a847146dd3615b078b2aeab2cc8d581f3b40ec12f8e93a877dbc0fb1c626367286eabf6f4671e7cdb862be6baf8060ab03ca788dec1e95dc329a627fde7b9b8b7bb3a531174b682b4ed0a68359f88ae985dc3b6d3b2c61ddf4ba8adafa2f626ec0eb5b6bef1b18e57933cc33e7b22ba2a30d4ad258836299c342d30765a454451dac88e4f2e874712420a800f1fa3b7d3d298d781193b49a4decb72cf28be15a28247f6ec21b5cdc38a48c7c1904e7cec421472b512ad996d1b646ccb0687bdae8ffbcb95e9807d94dc772abd6401139c1b731fa374df1489e0311e4ff65960f0e03ac9e8eb8578d97bcd909958f435112673ac7e17f54d44962b921f13e789b3ce667812524779a620fbac66a3f72de65b083b672262eda61b0896e144e8e1c1cb437ee692f1b22d28c3ecc627d40369e2a4b72a428c70a8740849681b1bde8fb50b13c6941e4954cebf80ed51a6e2239860ea53f8538f3146cbbbf374278bb02eef2f0f374907e28514811bcab09f6f7aa4cdad2e8f3105733cea7511c6d175a26466974c17084ff21dead5b315fcd475a9be8b408b4096b9dcfd1b195aadd33dbc14855b7bf639ea50cbee92ad0bccbda8222fe64dc0e638f56487887e5aaca6ffe1fb9042f5f5b01f743ceb773c4c9d76037036d0e060255e8b4ac2bd0187e6bfd24dc22eead94d0f6b57cd3cce50162ba83a1acbeace647fa4a866f8cd564bf875e9d8ae7f5dd22e5a126cb63dd50b093aa7e49defacfb7869e91553cea9b42e6c3a34b9fdaaef54706ff06c829e94d7fb3694d37569806c853c7b96f7b2a66b4f5cb1fe30376d10092790be5771b0b082919a8616d83c3e1d24064be2231b0a214fdf610532be024d1cc127f57d1a6fcaddd6e1e5bfd223e211afa17da6db124309a6c17dd943d1d3566daae2962e5bcd5df2835991779ae1f7b8379c6234046d22faab99dd89b45db525483ddb81492c48cad64e5196a318e4d53028391643306fbd841a50c54ddbd4590382058e041f6194f564002cf6d10242b8a22c4c33bbcb072bc5c7c6439e588cb50848405dab13a4a6096ad8362863044abddf172b47b86e6d52ae4353f62ce3f2db8f88c2208dcd4f22690234ad7bf9ccca333f2895bbd1f24ebec191569b652a2249d2f66b58e795e10a1c28a389b74ab3feab777647e03cf96bd3f180dbc01cf9316b5ad9fce3ab827d302d0cc3d0a8a595dd1cfcaa46f51ae41d7c64aeb98076cc0cea1550bbcdbfee48593a9dea47efd4b40ba44f065ed0f14d1cfc41f3c6cc1e436668acaabb365fe962638f8eee04d0cc497d08277324f726255970fe548b7cd8aa17ca6e6e23334a4ca0e951c5dbf217894694aa68d3dcebd4943678481e951d2fdf8759eea486d4c5945759bfbc112cfe9807fc2a3bb7cb917f2b8735f7e07370ee10783303664b3b6f11567b0b0c1749e492cddec0587a0f7188236f28c0df553f3c7c88975c34976a49a4da0450c471228415d3e8255c13e9131662e65a1b6dadd51023bf1b1cbeb93a0c37aef29b2c26ffa9003655aa53edf949a8eb0babb23926bc0c49b4ae6a73c7b38f9b153d0d5448cb3181f81821549ab5b009cb598d3fdf563ed0de86a3375ef7f54f487f8b6558dc0ff337df820bc3f4cc06b124da34c9de5d8e78d7febe6517d02c6df8c3acae7e09fe786e70a637ae6ce2841699711db5055c0ddba03413f4b562f7ee84fc8310d93bde6078030599dd702d2fd392093d2e90b35f40b6313407b8a0d2aa2e2a8df110b057da873af5f4ca023966d5b409e7c85edad95ebe0377800400d63991901d79e3da674ea0f5bbefeaaef30b382767a6a9d8f419455e0b7adbc3084015764d0ebf8010ab49fec2c604551eae1d4c80eb68c9da8bdcf6f27f538e32e28e3f1afca3c11ebfa34780ae6effb7d15d6e99fb97260aee05eef90ef93e180d9ad2aaead2ca20789aaaa9467edd908e796c76a75a0463ef65a6cd3bd9a38cfbd2458b70e8b364e028c5dd9448df93ca38bb9ea8fdedfb065d67d362591a219e22751b385f73aedfcf646bb2778df8bb162891e9df2f2cd7beec4c424a13be72dd2d18b3201a4686b22dbf09c341db1fc1f0dff06c4b5af7611c9f8447b1cfb6727efb1ce243c7f8652eeaec39cf7433d876b319e3e6de76b6a69864b373a5949aeee85f4577a50a106e5827a1997121579a1fa2203095e98ca6da30e0ad85072a2ec60f1b63a01555ec9a5cd83bb28f79e108bbfa611b64b87566280e9b2745c85b3cb1ef21b3ae9af092633d24b53e3cefd0e7aeb76a191e1127465eceb3480c10921b854df91c34f1ef20703651d3ce3ee2a6cdb60be53d858afb270b0e4d5492ad4ce5d7fcef0a150d4485d67fc31aaad5c6fcd18cf7a8ec3bd8b111143ac89fd98873fa3fce44724ca790cd95713e3565ee3a1c97750cac722dfee98f8357ae02cc7361bee0f25596d789b6c6fdfe8f6734d702422582f196410aee5638348a420d990ef920699d1090d3c3cd89c925df27f27fe2e2a77a6920fe5402456b1321d923d09849a4bb55a8d3aaa264bdcec48a5563edf7aeea0464a885c4c14446878971df9405bc508c7f2a3c68dd6c103cada3da4ef8be6f2c05fa946fa732c2d3d7c88b0967ed50b007be0a99b01011db37c5e0133e73df5eab26228bc48457f500cfc54691b41899a70e29bb82d6a3d6637fca2de9f2d686ed5a822e97fd6215a21c19aa33f84871139af50b3e025a464b1c05826cb527a3b08d748db7326a0d6c64a5df0748c27abc05ffb8cd02ae7f0bee0d20b95d6e4fdf415e7a90faa6e802f67155fce294d2857be9f122df30c68ad663b35c774db6d9fb1c6cf2088a284fe467927a99c9c993ce46a55932f4654ec0d4272067836ee07a4308cb9dc58156205ff068a3f20e8589319e797d8b13e76980df8cafb87dc8e59ca9dc80a7fe380a1d1cb1</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">您好, 这里需要密码.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">有东西被加密了, 请输入密码查看.</summary>
    
    
    
    <category term="作业" scheme="http://example.com/categories/%E4%BD%9C%E4%B8%9A/"/>
    
    
  </entry>
  
  <entry>
    <title>intel sgx开发环境配置</title>
    <link href="http://example.com/2022/10/04/intel-sgx%E9%85%8D%E7%BD%AE/"/>
    <id>http://example.com/2022/10/04/intel-sgx%E9%85%8D%E7%BD%AE/</id>
    <published>2022-10-04T14:50:03.000Z</published>
    <updated>2022-10-25T04:01:07.841Z</updated>
    
    <content type="html"><![CDATA[<h1 id="sgx的开发环境配置"><a href="#sgx的开发环境配置" class="headerlink" title="sgx的开发环境配置"></a>sgx的开发环境配置</h1><h2 id="参考的文献-amp-博客"><a href="#参考的文献-amp-博客" class="headerlink" title="参考的文献&amp;博客"></a>参考的文献&amp;博客</h2><ul><li><p><a href="https://flxdu.cn/2022/04/08/Intel-R-SGX%E7%8E%AF%E5%A2%83%E5%9C%A8Ubuntu-18-04%E7%9A%84%E5%AE%89%E8%A3%85/">Intel(R) SGX环境在Ubuntu 18.04的安装 | 小木槌 (flxdu.cn)</a></p></li><li><p><a href="https://blog.csdn.net/cyLee_/article/details/90245344">Ubuntu 18.04安装Intel SGX 2.3.1</a></p></li><li><p><a href="https://blog.csdn.net/cyLee_/article/details/90200470">Ubuntu 16.04下Intel SGX SDK环境搭建（硬件不支持情况）</a></p></li><li><p><a href="https://github.com/intel/linux-sgx">github上非常非常详细的英语教程</a></p></li></ul><p>主要参考了第一个博客，但是最最详细的是第四个github上的教程，只不过是全英文的有很多linux和sgx方面的专业名词对小白不是很友好。本人主要引用了第一个博客的内容，第一个博客的博主写的很详细，但是本人自己配置的时候还是出现了很多很多意想不到的问题，本博客针对可能出现的问题进行补充和说明。</p><h2 id="本人所用的配置"><a href="#本人所用的配置" class="headerlink" title="本人所用的配置"></a>本人所用的配置</h2><h3 id="电脑环境"><a href="#电脑环境" class="headerlink" title="电脑环境"></a>电脑环境</h3><p>由于现在用的电脑是锐龙处理器，而且没有trustzone，所以使用很久没用的、尘封已久的老、但是跟了我一年的老电脑。操作系统用的是ubuntu（鬼知道重装系统用了多久的时间），装完之后开机要很久，也不知道是不是坏了。</p><blockquote><ul><li><p>电脑：联想Thinkpad E14</p></li><li><p>操作系统：ubuntu18.04</p></li><li><p>处理器：i5-10210U</p></li><li><p>内存：8G</p></li><li><p>硬盘：1TB</p></li><li><p>在电脑BIOS中<strong>启用</strong>Intel SGX。重装系统不会更改BIOS中的设置，所以即使重装系统，Intel SGX也会一直保持启用状态。</p></li><li><p>安装如下工具：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get install gcc git cpuid<br></code></pre></td></tr></table></figure></li></ul></blockquote><h3 id="检查硬件情况"><a href="#检查硬件情况" class="headerlink" title="检查硬件情况"></a>检查硬件情况</h3><p>这是Intel官方给出来的方法：<a href="https://www.intel.cn/content/www/cn/zh/support/articles/000057420/software/intel-security-products.html">如何确定英特尔® Software Guard Extensions （英特尔® SGX） 处理器是否支持 DCAP 和 FLC</a></p><p>在终端执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">cpuid | grep -i sgx<br></code></pre></td></tr></table></figure><p>如果看到</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">SGX: Software Guard Extensions supported = <span class="hljs-literal">true</span><br>SGX_LC: SGX launch config supported = <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p>说明本博客安装方法适合你硬件情况。</p><h2 id="安装Intel-R-SGX环境"><a href="#安装Intel-R-SGX环境" class="headerlink" title="安装Intel(R) SGX环境"></a>安装Intel(R) SGX环境</h2><p>安装共有3大步，分别是：</p><ul><li>安装Intel(R) SGX Driver</li><li>安装Intel(R) SGX SDK</li><li>安装Intel(R) SGX PSW</li></ul><h3 id="安装Intel-R-SGX-Driver"><a href="#安装Intel-R-SGX-Driver" class="headerlink" title="安装Intel(R) SGX Driver"></a>安装Intel(R) SGX Driver</h3><p>安装一些工具</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get install make<br></code></pre></td></tr></table></figure><p>检查系统内核头文件是否与现有内核匹配：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dpkg-query -s linux-headers-$(<span class="hljs-built_in">uname</span> -r)<br></code></pre></td></tr></table></figure><p>如果看到<code>Status: install ok installed</code>说明没有问题</p><p>否则要安装匹配的内核头文件：<code>sudo apt-get install linux-headers-$(uname -r)</code></p><p>克隆仓库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/intel/linux-sgx-driver.git<br></code></pre></td></tr></table></figure><p>编译Intel(R) SGX Driver</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> linux-sgx-driver &amp;&amp; make<br></code></pre></td></tr></table></figure><p>编译完后，依次执行如下命令进行安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo <span class="hljs-built_in">mkdir</span> -p <span class="hljs-string">&quot;/lib/modules/&quot;</span>`<span class="hljs-built_in">uname</span> -r`<span class="hljs-string">&quot;/kernel/drivers/intel/sgx&quot;</span>    <br>sudo <span class="hljs-built_in">cp</span> isgx.ko <span class="hljs-string">&quot;/lib/modules/&quot;</span>`<span class="hljs-built_in">uname</span> -r`<span class="hljs-string">&quot;/kernel/drivers/intel/sgx&quot;</span>    <br>sudo sh -c <span class="hljs-string">&quot;cat /etc/modules | grep -Fxq isgx || echo isgx &gt;&gt; /etc/modules&quot;</span>    <br>sudo /sbin/depmod<br>sudo /sbin/modprobe isgx<br></code></pre></td></tr></table></figure><p>至此Intel(R) SGX Driver安装完成。</p><h3 id="安装Intel-R-SGX-SDK"><a href="#安装Intel-R-SGX-SDK" class="headerlink" title="安装Intel(R) SGX SDK"></a>安装Intel(R) SGX SDK</h3><p>安装一些工具</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get install build-essential python ocaml ocamlbuild automake autoconf libtool wget python libssl-dev git cmake perl libcurl4-openssl-dev protobuf-compiler libprotobuf-dev debhelper reprepro unzip<br></code></pre></td></tr></table></figure><p>注意这里安装工具可能报错如下</p><img src="/2022/10/04/intel-sgx%E9%85%8D%E7%BD%AE/debhelper%E6%8A%A5%E9%94%99.png" class="" title="安装工具报错"><p><font color="red">这是因为某些软件包需要保持现状，安装可能会破坏原有的软件包依赖关系，所以要安装这个软件包，必须调节软件包之间的相关关系</font>,给个解决的<a href="https://blog.csdn.net/weixin_45348389/article/details/122913923">方法链接</a>,简单来说就是用aptitude来代替apt安装，aptitude能解决软件中的依赖关系。</p><p>克隆仓库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/intel/linux-sgx.git<br></code></pre></td></tr></table></figure><h4 id="预编译"><a href="#预编译" class="headerlink" title="预编译"></a>预编译</h4><p>此步会克隆几个GitHub，请走代理（不走代理针的好慢好慢）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> linux-sgx &amp;&amp; make preparation<br></code></pre></td></tr></table></figure><p>将预编译出的文件拷贝至系统路径下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo <span class="hljs-built_in">cp</span> ~/linux-sgx/external/toolset/ubuntu18.04/* /usr/local/bin<br></code></pre></td></tr></table></figure><p>执行如下命令检查是否拷贝成功，如果成功会输出路径：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">which</span> ar as ld objcopy objdump ranlib<br></code></pre></td></tr></table></figure><h4 id="编译Intel-R-SGX-SDK"><a href="#编译Intel-R-SGX-SDK" class="headerlink" title="编译Intel(R) SGX SDK"></a>编译Intel(R) SGX SDK</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make sdk<br></code></pre></td></tr></table></figure><p>此步会输出大约五万行内容（真的时间巨长，等吧），请耐心等待。</p><p>最后没有报错，说明编译成功。</p><h4 id="编译Intel-R-SGX-SDK安装器"><a href="#编译Intel-R-SGX-SDK安装器" class="headerlink" title="编译Intel(R) SGX SDK安装器"></a>编译Intel(R) SGX SDK安装器</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make sdk_install_pkg<br></code></pre></td></tr></table></figure><p>此步会输出大约五万行内容（这个时间也很长啊，都看了好多视频了），请耐心等待。</p><p>编译完成后会输出<code>Generated sdk installer: ./linux/installer/bin/sgx_linux_x64_sdk_xxx.bin</code>。</p><h4 id="安装Intel-R-SGX-SDK-1"><a href="#安装Intel-R-SGX-SDK-1" class="headerlink" title="安装Intel(R) SGX SDK"></a>安装Intel(R) SGX SDK</h4><p>首先我们先创建一个目录，作为SDK的安装目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> -p ~/linux-sgx-install-path<br></code></pre></td></tr></table></figure><p>此步xxx要改为编译Intel(R) SGX SDK安装器最后的输出，在目录<code>linux-sgx/linux/installer/bin</code>下可以看到此文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> linux/installer/bin &amp;&amp; ./sgx_linux_x64_sdk_xxx.bin --prefix ~/linux-sgx-install-path<br></code></pre></td></tr></table></figure><p>根据安装最后的提示输出刷新环境变量</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> ~/linux-sgx-install-path/sgxsdk/environment<br></code></pre></td></tr></table></figure><p>SDK安装完成。</p><p>此时进入<code>linux-sgx-install-path/SampleCode</code>下尝试样例代码是不会成功的，需要安装PSW之后才可运行样例。</p><h3 id="安装Intel-R-SGX-PSW"><a href="#安装Intel-R-SGX-PSW" class="headerlink" title="安装Intel(R) SGX PSW"></a>安装Intel(R) SGX PSW</h3><h4 id="编译Intel-R-SGX-PSW"><a href="#编译Intel-R-SGX-PSW" class="headerlink" title="编译Intel(R) SGX PSW"></a>编译Intel(R) SGX PSW</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> ~/linux-sgx &amp;&amp; make psw<br></code></pre></td></tr></table></figure><p>注意把linux-sgx-install-path下的sgxsdk文件夹移动到根目录下的&#x2F;opt&#x2F;intel目录里，再执行上面的这一条指令。此步会输出大约一千行内容，请耐心等待。</p><h4 id="编译Intel-R-SGX-SDK安装器-1"><a href="#编译Intel-R-SGX-SDK安装器-1" class="headerlink" title="编译Intel(R) SGX SDK安装器"></a>编译Intel(R) SGX SDK安装器</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> ~/linux-sgx &amp;&amp; make deb_psw_pkg<br></code></pre></td></tr></table></figure><p>此步会输出大约八千行内容，请耐心等待。</p><h4 id="添加本地软件源"><a href="#添加本地软件源" class="headerlink" title="添加本地软件源"></a>添加本地软件源</h4><p>按照github上的英文教程，需要先生成sgx_debian_local_repo文件夹，最后在~&#x2F;linux-sgx&#x2F;linux&#x2F;installer&#x2F;deb目录下可以看见这个文件夹，输入如下指令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make deb_local_repo<br></code></pre></td></tr></table></figure><p>需要将本地路径追加到软件源文件中，使用<code>sudo vi /etc/apt/sources.list</code>编辑文件，将下面内容添加到文件末尾，<font color = "red">注意：你需要把PATH_TO_LOCAL_REPO替换成<code>~/linux-sgx/linux/installer/deb/sgx_debian_local_repo</code>的绝对路径</font>，注意这里的路径需要自己根据自己的位置设置，建议改成绝对路径，我的添加方式如下，大家自己添加的时候注意改成自己的路径哦！</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">deb [trusted=<span class="hljs-built_in">yes</span> <span class="hljs-built_in">arch</span>=amd64] file:/home/harper/inux-sgx/linux/installer/deb/sgx_debian_local_repo bionic main<br></code></pre></td></tr></table></figure><p>添加完之后，刷新软件源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get update<br></code></pre></td></tr></table></figure><h4 id="安装Intel-R-SGX-PSW-1"><a href="#安装Intel-R-SGX-PSW-1" class="headerlink" title="安装Intel(R) SGX PSW"></a>安装Intel(R) SGX PSW</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get install libsgx-launch libsgx-urts libsgx-epid libsgx-quote-ex libsgx-dcap-ql<br></code></pre></td></tr></table></figure><p>如果现在去测试样例，会报错<code>failed to load enclave</code>，Intel给出<a href="https://www.intel.com/content/www/us/en/support/articles/000057836/software/intel-security-products.html">解决方案</a>，要启动aesmd服务。</p><h3 id="启动aesmd服务"><a href="#启动aesmd服务" class="headerlink" title="启动aesmd服务"></a>启动aesmd服务</h3><p>启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo systemctl start aesmd<br></code></pre></td></tr></table></figure><p>查看aesmd服务启动状态</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> /var/log/syslog | grep -i aesm<br></code></pre></td></tr></table></figure><p>设置aesmd服务开机启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo systemctl <span class="hljs-built_in">enable</span> aesmd<br></code></pre></td></tr></table></figure><h2 id="安装测试"><a href="#安装测试" class="headerlink" title="安装测试"></a>安装测试</h2><h3 id="测试本地认证"><a href="#测试本地认证" class="headerlink" title="测试本地认证"></a>测试本地认证</h3><p>我们使用SDK给出的样例代码<code>LocalAttestation</code>对安装情况进行测试</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> ~/linux-sgx-install-path/sgxsdk/SampleCode/LocalAttestation <br></code></pre></td></tr></table></figure><p>编译样例代码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make<br></code></pre></td></tr></table></figure><p>执行样例</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./bin/app<br></code></pre></td></tr></table></figure><p>如果看到如下输出，说明安装成功</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">succeed to load enclaves.<br>succeed to establish secure channel.<br>Succeed to exchange secure message...<br>Succeed to close Session...<br></code></pre></td></tr></table></figure><p>我自己跑出来是显示没有成功（狗头），应该是aesmd服务出了点问题，大家可以测试下面的enclave样例</p><h3 id="测试enclave样例"><a href="#测试enclave样例" class="headerlink" title="测试enclave样例"></a>测试enclave样例</h3><p>我们运行enclave代码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /opt/intel/sgxsdk/SampleCode/SampleEnclave<br></code></pre></td></tr></table></figure><p> 编译代码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo make<br></code></pre></td></tr></table></figure><p>执行代码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./app<br></code></pre></td></tr></table></figure><p>看到如下输出证明安装成功</p><img src="/2022/10/04/intel-sgx%E9%85%8D%E7%BD%AE/%E8%BF%90%E8%A1%8C%E6%88%90%E5%8A%9F.png" class="" title=".&#x2F;app运行结果">]]></content>
    
    
    <summary type="html">一个合格的程序员，敢于配置各种各样复杂的环境</summary>
    
    
    
    <category term="环境配置" scheme="http://example.com/categories/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
    
    <category term="sgx" scheme="http://example.com/tags/sgx/"/>
    
    <category term="linux操作系统" scheme="http://example.com/tags/linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>数据库笔记</title>
    <link href="http://example.com/2022/10/03/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0/"/>
    <id>http://example.com/2022/10/03/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0/</id>
    <published>2022-10-03T08:00:23.000Z</published>
    <updated>2022-10-25T08:17:08.023Z</updated>
    
    <content type="html"><![CDATA[<h2 id="数据库的安装和使用"><a href="#数据库的安装和使用" class="headerlink" title="数据库的安装和使用"></a>数据库的安装和使用</h2><h3 id="安装教程"><a href="#安装教程" class="headerlink" title="安装教程"></a>安装教程</h3><ul><li><a href="https://zhuanlan.zhihu.com/p/37152572">知乎教程</a></li></ul><h3 id="使用教程"><a href="#使用教程" class="headerlink" title="使用教程"></a>使用教程</h3><ul><li><a href="https://www.bilibili.com/video/BV1Kr4y1i7ru?p=4&spm_id_from=pageDriver">mysql软件的使用</a></li></ul><h2 id="数据库基本语法"><a href="#数据库基本语法" class="headerlink" title="数据库基本语法"></a>数据库基本语法</h2><h3 id="数据库层次结构"><a href="#数据库层次结构" class="headerlink" title="数据库层次结构"></a>数据库层次结构</h3><img src="/2022/10/03/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0/1.png" class="" title="数据库层次结构"><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql <span class="hljs-operator">-</span>u root <span class="hljs-operator">-</span>p<br></code></pre></td></tr></table></figure><h3 id="数据库的创建"><a href="#数据库的创建" class="headerlink" title="数据库的创建"></a>数据库的创建</h3><p>创建基本的一个学生-课程数据库</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">CREAT DATABASE student_course;<br>USE student_course;<br></code></pre></td></tr></table></figure><h3 id="表操作"><a href="#表操作" class="headerlink" title="表操作"></a>表操作</h3><h4 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h4><p><strong>数值类型</strong></p><table><thead><tr><th>TINYINT</th><th>1 Bytes</th><th>(-128，127)</th><th>(0，255)</th><th>小整数值</th></tr></thead><tbody><tr><td>SMALLINT</td><td>2 Bytes</td><td>(-32 768，32 767)</td><td>(0，65 535)</td><td>大整数值</td></tr><tr><td>MEDIUMINT</td><td>3 Bytes</td><td>(-8 388 608，8 388 607)</td><td>(0，16 777 215)</td><td>大整数值</td></tr><tr><td>INT或INTEGER</td><td>4 Bytes</td><td>(-2 147 483 648，2 147 483 647)</td><td>(0，4 294 967 295)</td><td>大整数值</td></tr><tr><td>BIGINT</td><td>8 Bytes</td><td>(-9,223,372,036,854,775,808，9 223 372 036 854 775 807)</td><td>(0，18 446 744 073 709 551 615)</td><td>极大整数值</td></tr><tr><td>FLOAT</td><td>4 Bytes</td><td>(-3.402 823 466 E+38，-1.175 494 351 E-38)，0，(1.175 494 351 E-38，3.402 823 466 351 E+38)</td><td>0，(1.175 494 351 E-38，3.402 823 466 E+38)</td><td>单精度 浮点数值</td></tr><tr><td>DOUBLE</td><td>8 Bytes</td><td>(-1.797 693 134 862 315 7 E+308，-2.225 073 858 507 201 4 E-308)，0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)</td><td>0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)</td><td>双精度 浮点数值</td></tr><tr><td>DECIMAL</td><td>对DECIMAL(M,D) ，如果M&gt;D，为M+2否则为D+2</td><td>依赖于M和D的值</td><td>依赖于M和D的值</td><td>小数值</td></tr></tbody></table><p><strong>日期和时间类型</strong></p><p>表示时间值的日期和时间类型为DATETIME、DATE、TIMESTAMP、TIME和YEAR。</p><p>每个时间类型有一个有效值范围和一个”零”值，当指定不合法的MySQL不能表示的值时使用”零”值。</p><p>TIMESTAMP类型有专有的自动更新特性，将在后面描述。</p><table><thead><tr><th align="left">类型</th><th align="left">大小 ( bytes)</th><th align="left">范围</th><th align="left">格式</th><th align="left">用途</th></tr></thead><tbody><tr><td align="left">DATE</td><td align="left">3</td><td align="left">1000-01-01&#x2F;9999-12-31</td><td align="left">YYYY-MM-DD</td><td align="left">日期值</td></tr><tr><td align="left">TIME</td><td align="left">3</td><td align="left">‘-838:59:59’&#x2F;‘838:59:59’</td><td align="left">HH:MM:SS</td><td align="left">时间值或持续时间</td></tr><tr><td align="left">YEAR</td><td align="left">1</td><td align="left">1901&#x2F;2155</td><td align="left">YYYY</td><td align="left">年份值</td></tr><tr><td align="left">DATETIME</td><td align="left">8</td><td align="left">1000-01-01 00:00:00&#x2F;9999-12-31 23:59:59</td><td align="left">YYYY-MM-DD HH:MM:SS</td><td align="left">混合日期和时间值</td></tr><tr><td align="left">TIMESTAMP</td><td align="left">4</td><td align="left">1970-01-01 00:00:00&#x2F;2038结束时间是第 <strong>2147483647</strong> 秒，北京时间 <strong>2038-1-19 11:14:07</strong>，格林尼治时间 2038年1月19日 凌晨 03:14:07</td><td align="left">YYYYMMDD HHMMSS</td><td align="left">混合日期和时间值，时间戳</td></tr></tbody></table><p><strong>字符串类型</strong></p><p>字符串类型指CHAR、VARCHAR、BINARY、VARBINARY、BLOB、TEXT、ENUM和SET。该节描述了这些类型如何工作以及如何在查询中使用这些类型。</p><table><thead><tr><th align="left">类型</th><th align="left">大小</th><th align="left">用途</th></tr></thead><tbody><tr><td align="left">CHAR</td><td align="left">0-255 bytes</td><td align="left">定长字符串</td></tr><tr><td align="left">VARCHAR</td><td align="left">0-65535 bytes</td><td align="left">变长字符串</td></tr><tr><td align="left">TINYBLOB</td><td align="left">0-255 bytes</td><td align="left">不超过 255 个字符的二进制字符串</td></tr><tr><td align="left">TINYTEXT</td><td align="left">0-255 bytes</td><td align="left">短文本字符串</td></tr><tr><td align="left">BLOB</td><td align="left">0-65 535 bytes</td><td align="left">二进制形式的长文本数据</td></tr><tr><td align="left">TEXT</td><td align="left">0-65 535 bytes</td><td align="left">长文本数据</td></tr><tr><td align="left">MEDIUMBLOB</td><td align="left">0-16 777 215 bytes</td><td align="left">二进制形式的中等长度文本数据</td></tr><tr><td align="left">MEDIUMTEXT</td><td align="left">0-16 777 215 bytes</td><td align="left">中等长度文本数据</td></tr><tr><td align="left">LONGBLOB</td><td align="left">0-4 294 967 295 bytes</td><td align="left">二进制形式的极大文本数据</td></tr><tr><td align="left">LONGTEXT</td><td align="left">0-4 294 967 295 bytes</td><td align="left">极大文本数据</td></tr></tbody></table><p> <strong>注意</strong>：char(n) 和 varchar(n) 中括号中 n 代表字符的个数，并不代表字节个数，比如 CHAR(30) 就可以存储 30 个字符。</p><p>CHAR 和 VARCHAR 类型类似，但它们保存和检索的方式不同。它们的最大长度和是否尾部空格被保留等方面也不同。在存储或检索过程中不进行大小写转换。</p><p>BINARY 和 VARBINARY 类似于 CHAR 和 VARCHAR，不同的是它们包含二进制字符串而不要非二进制字符串。也就是说，它们包含字节字符串而不是字符字符串。这说明它们没有字符集，并且排序和比较基于列值字节的数值值。</p><p>BLOB 是一个二进制大对象，可以容纳可变数量的数据。有 4 种 BLOB 类型：TINYBLOB、BLOB、MEDIUMBLOB 和 LONGBLOB。它们区别在于可容纳存储范围不同。</p><p>有 4 种 TEXT 类型：TINYTEXT、TEXT、MEDIUMTEXT 和 LONGTEXT。对应的这 4 种 BLOB 类型，可存储的最大长度不同，可根据实际情况选择。</p><h4 id="创建一个表和删除一个表"><a href="#创建一个表和删除一个表" class="headerlink" title="创建一个表和删除一个表"></a>创建一个表和删除一个表</h4><p>创建</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> student<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> (Sno <span class="hljs-type">CHAR</span>(<span class="hljs-number">9</span>) <span class="hljs-keyword">PRIMARY</span> KEY,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> Sname <span class="hljs-type">CHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">UNIQUE</span>,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> Ssex <span class="hljs-type">CHAR</span>(<span class="hljs-number">2</span>),<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> Sage <span class="hljs-type">SMALLINT</span>,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> Sdept <span class="hljs-type">CHAR</span>(<span class="hljs-number">20</span>)<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> );<br></code></pre></td></tr></table></figure><p>删除</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> student;<br></code></pre></td></tr></table></figure><p>修改表名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> student RENAME stu;<br></code></pre></td></tr></table></figure><p>修改列名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> SC<br>CHANGE Crade Grade <span class="hljs-type">SMALLINT</span>;<br></code></pre></td></tr></table></figure><h4 id="表——增删改查"><a href="#表——增删改查" class="headerlink" title="表——增删改查"></a>表——增删改查</h4><h5 id="增"><a href="#增" class="headerlink" title="增"></a>增</h5><p>可以用两种方式编写INSERT INTO语句。</p><p>第一种方法指定列名和要插入的值：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> table_name (column1, column2, column3, ...)<br><span class="hljs-keyword">VALUES</span> (value1, value2, value3, ...); <br></code></pre></td></tr></table></figure><p>如果要为表的所有列添加值，则无需在SQL查询中指定列名。但是，请确保值的顺序与表中的列的顺序相同。INSERT INTO语法如下：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> table_name<br><span class="hljs-keyword">VALUES</span> (value1, value2, value3, ...); <br></code></pre></td></tr></table></figure><p>代码举例(一定注意：字符型数据需要加引号)：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> student (Sno,Sname,Ssex,Sage,Sdept)     <span class="hljs-keyword">values</span>     (&quot;201215121&quot;,&quot;李勇&quot;,&quot;男&quot;,<span class="hljs-number">20</span>,&quot;CS&quot;);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> student (Sno,Sname,Ssex,Sage,Sdept)     <span class="hljs-keyword">values</span>     (&quot;201215122&quot;,&quot;刘晨&quot;,&quot;女&quot;,<span class="hljs-number">19</span>,&quot;CS&quot;);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> student (Sno,Sname,Ssex,Sage,Sdept)     <span class="hljs-keyword">values</span>     (&quot;201215123&quot;,&quot;王敏&quot;,&quot;女&quot;,<span class="hljs-number">18</span>,&quot;MA&quot;);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> student (Sno,Sname,Ssex,Sage,Sdept)     <span class="hljs-keyword">values</span>     (&quot;201215125&quot;,&quot;张立&quot;,&quot;男&quot;,<span class="hljs-number">19</span>,&quot;IS&quot;);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> SC      <span class="hljs-keyword">values</span>     (&quot;201215121&quot;,&quot;1&quot;,<span class="hljs-number">92</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> SC      <span class="hljs-keyword">values</span>     (&quot;201215121&quot;,&quot;2&quot;,<span class="hljs-number">85</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> SC      <span class="hljs-keyword">values</span>     (&quot;201215121&quot;,&quot;3&quot;,<span class="hljs-number">88</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> SC      <span class="hljs-keyword">values</span>     (&quot;201215122&quot;,&quot;2&quot;,<span class="hljs-number">90</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> SC      <span class="hljs-keyword">values</span>     (&quot;201215122&quot;,&quot;3&quot;,<span class="hljs-number">80</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> course      <span class="hljs-keyword">values</span>     (&quot;1&quot;,&quot;数据库&quot;,&quot;5&quot;,<span class="hljs-number">4</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> course      <span class="hljs-keyword">values</span>     (&quot;2&quot;,&quot;数学&quot;,&quot;NULL&quot;,<span class="hljs-number">2</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> course      <span class="hljs-keyword">values</span>     (&quot;3&quot;,&quot;信息系统&quot;,&quot;1&quot;,<span class="hljs-number">4</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> course      <span class="hljs-keyword">values</span>     (&quot;4&quot;,&quot;操作系统&quot;,&quot;6&quot;,<span class="hljs-number">3</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> course      <span class="hljs-keyword">values</span>     (&quot;5&quot;,&quot;数据结构&quot;,&quot;7&quot;,<span class="hljs-number">4</span>);<br></code></pre></td></tr></table></figure><p>最后得到如下几个表：</p><div align = center>student</div><table><thead><tr><th align="center">Sno</th><th align="center">Sname</th><th align="center">Ssex</th><th align="center">Sage</th><th align="center">Sdept</th></tr></thead><tbody><tr><td align="center">201215121</td><td align="center">李勇</td><td align="center">男</td><td align="center">20</td><td align="center">CS</td></tr><tr><td align="center">201215122</td><td align="center">刘晨</td><td align="center">女</td><td align="center">19</td><td align="center">CS</td></tr><tr><td align="center">201215123</td><td align="center">王敏</td><td align="center">女</td><td align="center">18</td><td align="center">MA</td></tr><tr><td align="center">201215125</td><td align="center">张立</td><td align="center">男</td><td align="center">19</td><td align="center">IS</td></tr></tbody></table><div align = center>course</div><table><thead><tr><th align="center">Cno</th><th align="center">Cname</th><th align="center">Cpno</th><th align="center">Ccredit</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">数据库</td><td align="center">5</td><td align="center">4</td></tr><tr><td align="center">2</td><td align="center">数学</td><td align="center">NULL</td><td align="center">2</td></tr><tr><td align="center">3</td><td align="center">信息系统</td><td align="center">1</td><td align="center">4</td></tr><tr><td align="center">4</td><td align="center">操作系统</td><td align="center">6</td><td align="center">3</td></tr><tr><td align="center">5</td><td align="center">数据结构</td><td align="center">7</td><td align="center">4</td></tr></tbody></table><table><thead><tr><th align="center">Sno</th><th align="center">Cno</th><th align="center">Grade</th></tr></thead><tbody><tr><td align="center">201215121</td><td align="center">1</td><td align="center">92</td></tr><tr><td align="center">201215121</td><td align="center">2</td><td align="center">85</td></tr><tr><td align="center">201215121</td><td align="center">3</td><td align="center">88</td></tr><tr><td align="center">201215122</td><td align="center">2</td><td align="center">90</td></tr><tr><td align="center">201215122</td><td align="center">3</td><td align="center">80</td></tr></tbody></table><p>还有一种插入方式，需要学习select语句，直接把语句放到下面</p><p>对于每一个系，求学生的平均年龄，并把结果放到数据库里</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> Dept_age<br>(<br>sdept <span class="hljs-type">char</span>(<span class="hljs-number">15</span>)<br>avg_age <span class="hljs-type">smallint</span><br>);<br><span class="hljs-keyword">insert</span> <br><span class="hljs-keyword">into</span> dept_age(sdept,avg_age)<br><span class="hljs-keyword">select</span> sdept , <span class="hljs-built_in">avg</span>(sage)<br><span class="hljs-keyword">from</span> student <br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> sdept;<br></code></pre></td></tr></table></figure><h5 id="删"><a href="#删" class="headerlink" title="删"></a>删</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> course <span class="hljs-keyword">WHERE</span> Cno <span class="hljs-operator">=</span> <span class="hljs-number">22</span>;<br></code></pre></td></tr></table></figure><p>这里的where子句可以配合一些列其他句子使用，如exists,in等等</p><h5 id="改"><a href="#改" class="headerlink" title="改"></a>改</h5><p>让我们先想想有什么需要修改？</p><p>对于列来说：</p><ul><li>增加新的一列</li></ul><p>增加入学时间</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> Student <span class="hljs-keyword">ADD</span> S_entrance <span class="hljs-type">DATE</span>;<br></code></pre></td></tr></table></figure><ul><li>修改原有列的数据类型(使用MODIFY或者CHANGE)或者增加约束条件</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> Student MODIFY S_entrance <span class="hljs-type">INT</span>;<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> Student <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">UNIQUE</span>(S_entrance);<br></code></pre></td></tr></table></figure><ul><li>删除列和[删除约束条件](<a href="https://blog.csdn.net/weixin_35731579/article/details/113116120">mysql 删除约束_MySQL中的约束,添加约束,删除约束,以及其他修饰_衣锦夜行的李公子的博客-CSDN博客</a>)</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> Student <span class="hljs-keyword">DROP</span> INDEX S_entrance;<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> Student <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">COLUMN</span> S_entrance;<br></code></pre></td></tr></table></figure><p>对于行来说：</p><ul><li>修改一行中已有的数据(使用SET语句)</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">UPDATE</span> course <span class="hljs-keyword">SET</span> Cno <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;100&#x27;</span> <span class="hljs-keyword">where</span> Cno <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;1&#x27;</span>;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> course;<br></code></pre></td></tr></table></figure><p>这里的where子句可以配合一些列其他句子使用，如exists,in等等</p><h5 id="查"><a href="#查" class="headerlink" title="查"></a>查</h5><p>使用where子句和列名可以实现查找(查找是一个大块，内容很复杂，后面再介绍)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Sno,Ssex <span class="hljs-keyword">from</span> student;<br><span class="hljs-keyword">SELECT</span> Sno 学号,Ssex 性别 <span class="hljs-keyword">from</span> student;<br></code></pre></td></tr></table></figure><table><thead><tr><th>学号</th><th>性别</th></tr></thead><tbody><tr><td>201215122</td><td>女</td></tr><tr><td>201215123</td><td>女</td></tr><tr><td>201215125</td><td>男</td></tr></tbody></table><p>如果这样查输出奇怪的东西（sql注入可能用到）</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span> <span class="hljs-keyword">from</span> student;<br></code></pre></td></tr></table></figure><table><thead><tr><th>1</th><th>2</th><th>3</th></tr></thead><tbody><tr><td>1</td><td>2</td><td>3</td></tr><tr><td>1</td><td>2</td><td>3</td></tr><tr><td>1</td><td>2</td><td>3</td></tr></tbody></table><h4 id="索引的创建"><a href="#索引的创建" class="headerlink" title="索引的创建"></a>索引的创建</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">use student_course;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">UNIQUE</span> INDEX stusno <span class="hljs-keyword">ON</span> student(Sno);<br></code></pre></td></tr></table></figure><h3 id="数据查询-cry"><a href="#数据查询-cry" class="headerlink" title="数据查询:cry:"></a>数据查询:cry:</h3><h4 id="单表查询"><a href="#单表查询" class="headerlink" title="单表查询"></a>单表查询</h4><p><span id = "jump4"><strong>例1：</strong>查询全体学生的姓名、出生年份和所在院系，要求用小写字母表示系名</span></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Sname NAME,&quot;Year of Birth:&quot; , <span class="hljs-number">2022</span> <span class="hljs-operator">-</span> Sage BIRTHDAY ,  <span class="hljs-built_in">LOWER</span>(Sdept) <span class="hljs-keyword">FROM</span> student;<br></code></pre></td></tr></table></figure><p>可以看到这里的可以制定别名，同时想要查找的列可以用一个表达式表示 2022 - Sage</p><p><strong>例2：</strong>查询选修了课程的学生学号（去掉重复项）</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> Sno <span class="hljs-keyword">FROM</span> SC;<br></code></pre></td></tr></table></figure><p>使用distinct子句来保证结果唯一</p><p><strong>例3：</strong>查询计算机系的全体学生</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> Sname <span class="hljs-keyword">FROM</span>  student<br><span class="hljs-keyword">WHERE</span> Sdept <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;CS&#x27;</span>;<br></code></pre></td></tr></table></figure><p>这里使用了where子句，这是一个很强大的功能：</p><div align = "center">WHERE子句常用查询条件表</div><table><thead><tr><th align="center">查询条件</th><th align="center">谓词</th></tr></thead><tbody><tr><td align="center">比较</td><td align="center">&#x3D; , &gt; , &lt; , &gt;&#x3D; , &lt;&#x3D; , !&#x3D; , &lt;&gt; , !&gt; , !&lt; , ; NOT + 上述比较符</td></tr><tr><td align="center">确定范围</td><td align="center">BETWEEN AND , NOT BETWEEN AND</td></tr><tr><td align="center">确定集合</td><td align="center">IN , NOT ,IN</td></tr><tr><td align="center">字符匹配</td><td align="center">LIKE , NOT LIKE</td></tr><tr><td align="center">空值</td><td align="center">IS NULL , IS NOT NULL</td></tr><tr><td align="center">多重条件（逻辑运算）</td><td align="center">AND , OR , NOT</td></tr></tbody></table><p><strong>例4：</strong>查询计算机系(CS)和数学(MA)系中年龄在19~20之间的学生姓名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Sname <span class="hljs-keyword">FROM</span> student <br><span class="hljs-keyword">where</span> Sdept <span class="hljs-keyword">IN</span> (<span class="hljs-string">&#x27;CS&#x27;</span>,<span class="hljs-string">&#x27;MA&#x27;</span>) <span class="hljs-keyword">AND</span> Sage <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">19</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">20</span>;<br></code></pre></td></tr></table></figure><p>这里between and也可以用&#x3D;&lt;20 AND &gt;&#x3D;19代替</p><p><strong>例5：</strong>查询名字中课程名中含有下划线的课程</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> course      <span class="hljs-keyword">values</span>     (&quot;9&quot;,&quot;DB_course&quot;,&quot;7&quot;,<span class="hljs-number">4</span>);<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> course<br><span class="hljs-keyword">where</span> Cname <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;%\_%&#x27;</span> ;<br></code></pre></td></tr></table></figure><p>这里使用了LIKE进行字符匹配：</p><ul><li>%（百分号）代表任意长度（可以为0）的字符串</li><li>_(下划线)代表任意单个字符</li></ul><p><font color = red> 注意：字符集为ASCII时，一个汉字需要两个_；当字符集为GBK时只需要一个_</font></p><p><strong>例6：</strong>查询全体学生情况，查询结果按照系号升序，同一系中的学生按照年龄降序</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> student<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> Sdept , Sage <span class="hljs-keyword">DESC</span>;<br></code></pre></td></tr></table></figure><p>用DESC来进行降序</p><p><strong>例7：</strong>查询选修了课程的学生人数</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> Sno)<br><span class="hljs-keyword">FROM</span> SC;<br></code></pre></td></tr></table></figure><p>返回一个表只有一个值：</p><table><thead><tr><th align="center">COUNT(DISTINCT Sno)</th></tr></thead><tbody><tr><td align="center">2</td></tr></tbody></table><p>注意这里必须使用distinct语句，默认是all即全部行都要统计</p><p><strong>例8：</strong>查询各个课程号及相应的选课人数</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Cno , <span class="hljs-built_in">COUNT</span>(Sno)<br><span class="hljs-keyword">FROM</span> SC<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> Cno;<br></code></pre></td></tr></table></figure><p>GROUP把课程号相同的学生分到一组，然后COUNT函数统计每一组的Sno结果，输出如下结果：</p><table><thead><tr><th align="center">Cno</th><th align="center">COUNT(Sno)</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">1</td></tr><tr><td align="center">2</td><td align="center">2</td></tr><tr><td align="center">3</td><td align="center">2</td></tr></tbody></table><p>如果GROUP不配合COUNT,AVG（这些函数对于一个表只返回一个值）使用，那么返回这样的结果：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">FROM</span> SC<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> Cno;<br></code></pre></td></tr></table></figure><p>输出的结果只有不同Cno的第一个行</p><table><thead><tr><th align="center">Sno</th><th align="center">Cno</th><th align="center">Grade</th></tr></thead><tbody><tr><td align="center">201215121</td><td align="center">1</td><td align="center">92</td></tr><tr><td align="center">201215121</td><td align="center">2</td><td align="center">85</td></tr><tr><td align="center">201215121</td><td align="center">3</td><td align="center">88</td></tr></tbody></table><p><strong>例9：</strong>查询选修了三门及以上课程的学生学号</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Sno ,<span class="hljs-built_in">count</span>(Cno) <span class="hljs-keyword">from</span> sc<br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> Sno<br><span class="hljs-keyword">having</span> <span class="hljs-built_in">count</span>(Cno)<span class="hljs-operator">&gt;=</span><span class="hljs-number">3</span>;<br></code></pre></td></tr></table></figure><p>注意这里不能用where子句，where子句作用于基本表或者视图；</p><p>而having短语作用于组，从中选择满足条件的组；</p><h4 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h4><h5 id="等值连接与非等值连接"><a href="#等值连接与非等值连接" class="headerlink" title="等值连接与非等值连接"></a><span id = "jump1">等值连接与非等值连接</span></h5><p><strong>例1：</strong>查询每个学生及其选修课程的情况</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> student.<span class="hljs-operator">*</span> , sc.<span class="hljs-operator">*</span> <br><span class="hljs-keyword">FROM</span> student,sc<br><span class="hljs-keyword">where</span> student.sno <span class="hljs-operator">=</span> sc.sno;<br></code></pre></td></tr></table></figure><p>这里是一个等值连接，如果建立了索引这里的速度会更快</p><p><strong>例2：</strong>查询选修了2号课程且成绩在90分及以上的所有学生的学号和姓名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> student.Sno ,student.sname <br><span class="hljs-keyword">from</span> student , sc<br><span class="hljs-keyword">where</span> student.Sno <span class="hljs-operator">=</span> sc.sno <br><span class="hljs-keyword">and</span> sc.cno <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;2&#x27;</span><br><span class="hljs-keyword">and</span> sc.grade<span class="hljs-operator">&gt;=</span><span class="hljs-number">90</span>;<br></code></pre></td></tr></table></figure><p>为什么要用student.sno而不是直接用sno，因为SELECT student.* , sc.* 返回的值是两个表的笛卡尔积，包括两个sno分别是student.sno和sc.sno，这里只需要提取student.sno</p><h5 id="自身连接"><a href="#自身连接" class="headerlink" title="自身连接"></a>自身连接</h5><p><strong>例1：</strong>查询每一门课的间接先修课(先修课的先修课)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> a.cno 课程号, b.cpno 该课程先修课的先修课<br><span class="hljs-keyword">from</span> course a,course b<br><span class="hljs-keyword">where</span> a.cpno <span class="hljs-operator">=</span> b.cno;<br></code></pre></td></tr></table></figure><h5 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h5><p><strong>例1：</strong>查询每个学生及其选修课程的情况</p><p>类比<a href="#jump1">2.5.2.1</a>中,会发现返回的结果里面没有学号为201215123的同学，因为他们被开除了没有选课，但是我们又希望显示他们的选课结果，用NULL表示，这里就需要用到外连接，而且是左外连接</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <br><span class="hljs-keyword">from</span> student <span class="hljs-keyword">left</span> <span class="hljs-keyword">outer</span> <span class="hljs-keyword">join</span> sc <span class="hljs-keyword">on</span> (student.sno <span class="hljs-operator">=</span> sc.sno);<br></code></pre></td></tr></table></figure><p>这样就能显示啦！:happy:</p><ul><li>左外连接列出左边关系中的所有元组</li><li>右外连接列出右边关系中的所有元组</li></ul><h5 id="多表连接"><a href="#多表连接" class="headerlink" title="多表连接"></a>多表连接</h5><p><strong>例1：</strong>查询每个学生的学号，姓名，选修的课程名及名称</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> student.sno , student.sname , course.cname<br><span class="hljs-keyword">from</span> student , sc, course<br><span class="hljs-keyword">where</span> student.sno <span class="hljs-operator">=</span> sc.sno<br><span class="hljs-keyword">and</span> sc.cno <span class="hljs-operator">=</span> course.cno;<br></code></pre></td></tr></table></figure><p>这样还是显示不了没选课的人，需要用到外连接才能实现，我们暂时先不讨论</p><h4 id="嵌套查询"><a href="#嵌套查询" class="headerlink" title="嵌套查询"></a>嵌套查询</h4><p>sql语句中，一个SELECT-FROM-WHERE语句为一个<code>查询块</code>。将一个查询块嵌入到另一个查询块的where子句中或者having短语中的查询成为嵌套</p><h5 id="带有IN谓词子查询"><a href="#带有IN谓词子查询" class="headerlink" title="带有IN谓词子查询"></a>带有IN谓词子查询</h5><p><strong>例1：</strong>查询与“刘晨”在同一个系学习的学生的名字</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> sname<br><span class="hljs-keyword">from</span> student<br><span class="hljs-keyword">where</span> sdept <span class="hljs-keyword">in</span><br>(<span class="hljs-keyword">select</span> sdept <br><span class="hljs-keyword">from</span> student <br><span class="hljs-keyword">where</span> sname <span class="hljs-operator">=</span> &quot;刘晨&quot;);<br></code></pre></td></tr></table></figure><p><strong>例2：</strong>查询选修了课程名为“信息系统”的学生学号和姓名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> sname <br><span class="hljs-keyword">from</span> student<br><span class="hljs-keyword">where</span> sno <span class="hljs-keyword">in</span><br>(<br><span class="hljs-keyword">select</span> sno<br><span class="hljs-keyword">from</span> sc<br><span class="hljs-keyword">where</span> cno <span class="hljs-keyword">in</span><br>(<br><span class="hljs-keyword">select</span> cno <br><span class="hljs-keyword">from</span> course<br><span class="hljs-keyword">where</span> cname <span class="hljs-operator">=</span> &quot;信息系统&quot;<br>)<br>    );<br></code></pre></td></tr></table></figure><h5 id="带有比较运算符的子查询"><a href="#带有比较运算符的子查询" class="headerlink" title="带有比较运算符的子查询"></a>带有比较运算符的子查询</h5><p>父子查询之间用比较运算符连接</p><p><span id = "jump3"><strong>例1：</strong>找出每个学生超过他自己选修课程平均成绩的课程号 </span></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> cno<br><span class="hljs-keyword">from</span> sc x<br><span class="hljs-keyword">where</span> grade <span class="hljs-operator">&gt;</span><br>(<br>    <span class="hljs-keyword">select</span> <span class="hljs-built_in">avg</span>(grade)<br>    <span class="hljs-keyword">from</span> sc y<br><span class="hljs-keyword">where</span> y.sno <span class="hljs-operator">=</span> x.sno<br>);<br></code></pre></td></tr></table></figure><p>可能有点难理解，我们把语句的底层实现过程拆分成下面三个步骤：</p><blockquote><p>1.从外层查询中取出sc的一个元组x，将元组x的Sno值(201215121)传给内层查询</p><p>select avg(grade)</p><p>from sc y</p><p>where y.sno &#x3D; ‘201215121’;</p><p>2.执行内层查询，得到88(近似值)，用该值代替内层查询，得到外层查询</p><p>3.遍历所有元组，把重复的值去掉</p></blockquote><p>需要注意，这里的子查询为<font color = red><code >相关子查询</code></font>，和之前的例子不一样，内层查询和外层是相关的，所以在实现上内层查询不是一次返回多个值，而是返回一个值（88），这一个值只对应sc的第一行，第二行依旧按照如此进行查询。</p><h5 id="带有ANY-SOME-或者ALL谓词的子查询"><a href="#带有ANY-SOME-或者ALL谓词的子查询" class="headerlink" title="带有ANY(SOME)或者ALL谓词的子查询"></a>带有ANY(SOME)或者ALL谓词的子查询</h5><p>望文生义，如果内层查询返回一组数，那么使用any或者all来修饰，同时配合运算比较符号来查询，例如</p><p>&gt;any 表示大于子查询结果中的某个值</p><p><strong>例1：</strong>查询非计算机科学系中比计算机系<font color = red>任意</font>一个学生年龄小的学生姓名和年龄</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> sname,sage<br><span class="hljs-keyword">from</span> student <br><span class="hljs-keyword">where</span> sdept <span class="hljs-operator">!=</span> &quot;CS&quot;<br><span class="hljs-keyword">and</span> sage<span class="hljs-operator">&lt;</span><span class="hljs-keyword">any</span><br>(<br><span class="hljs-keyword">select</span> sage <br><span class="hljs-keyword">from</span> student<br><span class="hljs-keyword">where</span> sdept <span class="hljs-operator">=</span> &quot;CS&quot;<br>);<br></code></pre></td></tr></table></figure><p><strong>例2：</strong>查询非计算机科学系中比计算机系<font color = red>所有</font>一个学生年龄小的学生姓名和年龄</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> sname,sage<br><span class="hljs-keyword">from</span> student <br><span class="hljs-keyword">where</span> sdept <span class="hljs-operator">!=</span> &quot;CS&quot;<br><span class="hljs-keyword">and</span> sage<span class="hljs-operator">&lt;</span><span class="hljs-keyword">all</span><br>(<br><span class="hljs-keyword">select</span> sage <br><span class="hljs-keyword">from</span> student<br><span class="hljs-keyword">where</span> sdept <span class="hljs-operator">=</span> &quot;CS&quot;<br>);<br></code></pre></td></tr></table></figure><h5 id="带有EXISTS谓词的子查询"><a href="#带有EXISTS谓词的子查询" class="headerlink" title="带有EXISTS谓词的子查询"></a>带有EXISTS谓词的子查询</h5><p>exists代表存在量词$$\exists$$。带有exists谓词的子查询不返回任何数据，只产生逻辑值true和false</p><p><strong>例1：</strong>查询选修了1号课程的学生姓名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> sname<br><span class="hljs-keyword">from</span> student<br><span class="hljs-keyword">where</span> <span class="hljs-keyword">exists</span><br>(<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br>    <span class="hljs-keyword">from</span> sc<br>    <span class="hljs-keyword">where</span> sc.sno <span class="hljs-operator">=</span> student.sno<br>    <span class="hljs-keyword">and</span> sc.cno <span class="hljs-operator">=</span> &quot;1&quot;<br>);<br></code></pre></td></tr></table></figure><p>这也是一个相关子查询，第一次只传一个元组进入内层（这时学号为201215121），然后在sc表中找出学号为201215121的人选择的1号课程，返回如果有值，那么返回true，如果是空值，返回false。直至外层元组全部检索完。</p><p>[**EXISTS执行顺序**](<a href="https://zhuanlan.zhihu.com/p/351922940">MySQL中的EXISTS用法 - 知乎 (zhihu.com)</a>)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> A <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">EXISTS</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FROM</span> B <span class="hljs-keyword">WHERE</span> B.id <span class="hljs-operator">=</span> A.id); <br></code></pre></td></tr></table></figure><p>1、首先执行一次外部查询，并缓存结果集，如 SELECT * FROM A</p><p>2、遍历外部查询结果集的每一行记录R，代入子查询中作为条件进行查询，如 SELECT 1 FROM B WHERE B.id &#x3D; A.id</p><p>3、如果子查询有返回结果，则EXISTS子句返回TRUE，这一行R可作为外部查询的结果行，否则不能作为结果</p><p><strong>例2</strong>：<span id = "jump2">查询选修了全部课程的学生姓名</span>&gt;</p><p>注意mysql里面没有全程量词$$\forall$$，但是可以用存在量词和非来等价替换</p><p>​<br>$$<br>(\forall x)P\equiv \neg(\exists x (\neg P))<br>$$</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> sname<br><span class="hljs-keyword">from</span> student<br><span class="hljs-keyword">where</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">exists</span><br><span class="hljs-comment">/*遍历student的每一行，看是否这一行满足下面存在语句，如代入第一行的学生201215121*/</span><br>(<span class="hljs-comment">/*查找学生201215121所有的没有选的课程，从course表中查找*/</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <br>    <span class="hljs-keyword">from</span> course<br>    <span class="hljs-keyword">where</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">exists</span> <br>    <span class="hljs-comment">/*遍历每一个课程，看这个课程是否没有被选，如代入第一行的课程“数据库”，其cno = 1*/</span><br>    (<br>        <span class="hljs-comment">/*现在学生和课程名都确定了，在sc表中看这个课程学生选择了没有*/</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br>        <span class="hljs-keyword">from</span> sc<br>        <span class="hljs-keyword">where</span> student.sno <span class="hljs-operator">=</span> sc.sno<span class="hljs-comment">/*这里的student.sno可以替换为201215121*/</span><br>        <span class="hljs-keyword">and</span> course.cno <span class="hljs-operator">=</span> sc.cno<span class="hljs-comment">/*这里的course.cno可以替换为1*/</span><br>    )<br>);<br></code></pre></td></tr></table></figure><p><strong>例3：</strong>查询至少选修了学生201215122选修的全部课程的学生号码</p><p>本查询可以用逻辑蕴涵来表达:对于学号为x的学生，对于所有的课程y，只要201215122学生选修了课程y，那么就有学生x选修了课程y</p><p>形式化如下：</p><p>用p表示谓词：学生201215122选修了课程y</p><p>用q表示谓词：学生x选修了课程y</p><p>则上述查询为 ：<br>$$<br>(\forall y)p \rightarrow q<br>$$<br>SQL语言中没有蕴涵的逻辑运算，但是可以通过$\exists$和$\neg$来等价替换<br>$$<br>p \rightarrow q \equiv \neg p \vee q<br>$$<br>加上前置的条件完成的转换为：<br>$$<br>(\forall y)p \rightarrow q \equiv \neg (\exists y)(\neg(\neg p \vee q)) \equiv<br> \neg (\exists y)(p \wedge \neg q)<br>$$<br>表达的意思为：不存在这样的课程y，学生201215122选修了y，而学生x没有选</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">distinct</span> sno<br><span class="hljs-keyword">from</span> sc scx<br><span class="hljs-keyword">where</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">exists</span><br><span class="hljs-comment">/*遍历sc的每一个学生，如代入第一行的学生201215121*/</span><br>(<br><span class="hljs-comment">/*学生已经确定了，看是否存在这样的课程y，学生201215122选修了y，而学生x没有选*/</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <br><span class="hljs-keyword">from</span> sc scy<br><span class="hljs-keyword">where</span> scy.sno <span class="hljs-operator">=</span> &quot;201215122&quot;<br><span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">exists</span><br><span class="hljs-comment">/*遍历学生201215122的每一个课程，看是否还有学生x没有选的*/</span><br>(<br><span class="hljs-comment">/*学生确定了，课程确定了，看这个学生选了这个课程没有，用not exists实现，不能用!=*/</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">from</span> sc scz<br><span class="hljs-keyword">where</span> scz.sno <span class="hljs-operator">=</span> scx.sno<br><span class="hljs-keyword">and</span> scy.cno <span class="hljs-operator">=</span> scz.cno<br>)<br>);<br></code></pre></td></tr></table></figure><p>仿造<a href="#jump2"><strong>例2</strong></a>的另一种解法，</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> sno<br><span class="hljs-keyword">from</span> student <br><span class="hljs-keyword">where</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">exists</span><br>(<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">from</span> sc<br><span class="hljs-keyword">where</span> sc.sno <span class="hljs-operator">=</span> &quot;201215122&quot;<br><span class="hljs-keyword">and</span> sc.cno <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> <br>(<br><span class="hljs-keyword">select</span> cno<br><span class="hljs-keyword">from</span> sc<br><span class="hljs-keyword">where</span> sc.sno <span class="hljs-operator">=</span> student.sno<br>)<br>);<br></code></pre></td></tr></table></figure><h4 id="集合查询"><a href="#集合查询" class="headerlink" title="集合查询"></a>集合查询</h4><p>select语句的查询结果是元组的集合，所以多个select语句的结果可以进行结合操作。集合操作主要包括并操作union、交操作intersect和差操作except。</p><p><font color = red>注意：参加集合操作的各查询结果的列数必须相同；对应的数据类型也必须相同</font></p><p><strong>例1：</strong>查询计算机科学系的学生及年龄不大于19岁的学生</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">from</span> student<br><span class="hljs-keyword">where</span> sdept <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;CS&#x27;</span><br><span class="hljs-keyword">union</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">from</span> student<br><span class="hljs-keyword">where</span> sage<span class="hljs-operator">&lt;=</span><span class="hljs-number">19</span>;<br></code></pre></td></tr></table></figure><p>实际上使用union将多个查询结果合并起来，系统会自动去掉重复的元组。如果要保留，使用union all操作符。</p><p><strong>例2：</strong>查询选修了课程1或者选修了课程2的学生的姓名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> sname<br><span class="hljs-keyword">from</span> student<br><span class="hljs-keyword">where</span> <span class="hljs-keyword">exists</span><br>(<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">from</span> sc<br><span class="hljs-keyword">where</span> student.sno <span class="hljs-operator">=</span> sc.sno<br><span class="hljs-keyword">and</span> sc.cno <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;1&#x27;</span><br><span class="hljs-keyword">union</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">from</span> sc<br><span class="hljs-keyword">where</span> student.sno <span class="hljs-operator">=</span> sc.sno<br><span class="hljs-keyword">and</span> sc.cno <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;2&#x27;</span><br>);<br></code></pre></td></tr></table></figure><p>实际上这个union等价于下面的语句</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> sname<br><span class="hljs-keyword">from</span> student<br><span class="hljs-keyword">where</span> <span class="hljs-keyword">exists</span><br>(<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">from</span> sc<br><span class="hljs-keyword">where</span> student.sno <span class="hljs-operator">=</span> sc.sno<br><span class="hljs-keyword">and</span> (sc.cno <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;1&#x27;</span> <span class="hljs-keyword">or</span> sc.cno <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;2&#x27;</span>)<br>);<br></code></pre></td></tr></table></figure><p><strong>例3：</strong>查询计算机科学系的学生与年龄不大于19岁的学生的交集</p><p>有些数据库语言是没有intersect交集的操作，可以使用in语句来等价替换，如下面的例子</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">from</span> student<br><span class="hljs-keyword">where</span> sdept <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;CS&#x27;</span><br><span class="hljs-keyword">and</span> sno <span class="hljs-keyword">in</span><br>(<br><span class="hljs-keyword">select</span> sno <br><span class="hljs-keyword">from</span> student<br><span class="hljs-keyword">where</span> sage <span class="hljs-operator">&lt;</span> <span class="hljs-number">19</span><br>);<br></code></pre></td></tr></table></figure><p>解释一下这个语句：一个元组即满足属性sdept &#x3D; ‘cs’又满足in中的条件，年龄不大于19</p><p>如果不能理解，还可以用and语句来实现</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">from</span> student<br><span class="hljs-keyword">where</span> sdept <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;CS&#x27;</span><br><span class="hljs-keyword">and</span> sage<span class="hljs-operator">&lt;=</span><span class="hljs-number">19</span>;<br></code></pre></td></tr></table></figure><p><strong>例4：</strong>查询计算机科学系的学生与年龄不大于19岁的学生的差集</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">from</span> student<br><span class="hljs-keyword">where</span> sdept <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;CS&#x27;</span><br><span class="hljs-keyword">and</span> sno <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span><br>(<br><span class="hljs-keyword">select</span> sno <br><span class="hljs-keyword">from</span> student<br><span class="hljs-keyword">where</span> sage <span class="hljs-operator">&lt;</span> <span class="hljs-number">19</span><br>);<br></code></pre></td></tr></table></figure><h4 id="基于派生词的查询"><a href="#基于派生词的查询" class="headerlink" title="基于派生词的查询"></a>基于派生词的查询</h4><p>子查询不仅可以出现在where子句中，<strong>还可以出现在from子句中</strong>，这是子查询生成的临时派生表成为主查询的查询对象。</p><p><strong>例1：</strong><a href="#jump3">找出每个学生超过他自己选修课程平均成绩的课程号</a></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> sno , cno<br><span class="hljs-keyword">from</span> sc , <br>(<br><span class="hljs-keyword">select</span> sno , <span class="hljs-built_in">avg</span>(grade)<br><span class="hljs-keyword">from</span> sc <br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> sno<br>) <br><span class="hljs-keyword">as</span> avg_sc(avg_sno , avg_grade)<br><span class="hljs-keyword">where</span> sc.grade<span class="hljs-operator">&gt;</span>avg_sc.avg_grade<br><span class="hljs-keyword">and</span> sc.sno <span class="hljs-operator">=</span> avg_sc.avg_sno;<br></code></pre></td></tr></table></figure><p>这种派生的方法实际上是把两个表连接了起来，如果原有的两个表的行列数分别为(m1,n1)和(m2,n2),则得到的规模为(m1*m2,n1+n2)</p><h4 id="select语句的一般格式"><a href="#select语句的一般格式" class="headerlink" title="select语句的一般格式"></a>select语句的一般格式</h4><p>select语句是mysql的核心语句，一般有如下格式：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> [<span class="hljs-keyword">all</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">distinct</span>] <span class="hljs-operator">&lt;</span>目标列表达式<span class="hljs-operator">&gt;</span> [别名] , ……<br><span class="hljs-keyword">from</span> <span class="hljs-operator">&lt;</span>表名或者视图名<span class="hljs-operator">&gt;</span> [别名] , […… <span class="hljs-operator">|</span> (<span class="hljs-operator">&lt;</span><span class="hljs-keyword">select</span>派生<span class="hljs-operator">&gt;</span> [<span class="hljs-keyword">as</span>] <span class="hljs-operator">&lt;</span>别名<span class="hljs-operator">&gt;</span>)<br>[<span class="hljs-keyword">where</span> <span class="hljs-operator">&lt;</span>条件表达式<span class="hljs-operator">&gt;</span>]<br>[<span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> <span class="hljs-operator">&lt;</span>列名<span class="hljs-operator">&gt;</span> [<span class="hljs-keyword">having</span> <span class="hljs-operator">&lt;</span>条件表达式<span class="hljs-operator">&gt;</span>]]<br>[<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> <span class="hljs-operator">&lt;&gt;</span>列名 [<span class="hljs-keyword">ASC</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">DESC</span>]]<br></code></pre></td></tr></table></figure><h5 id="目标列表达式的可选格式"><a href="#目标列表达式的可选格式" class="headerlink" title="目标列表达式的可选格式"></a>目标列表达式的可选格式</h5><ul><li><ul><li></li></ul></li><li>&lt;表名&gt;.*</li><li>count([distinct | all] *)</li><li>[&lt;表名&gt;.]&lt;属性列表达式&gt;</li></ul><p>其中属性列表达式可以由属性列、作用于属性列的聚集函数和常量的任意算数运算(+，-，*，&#x2F;)组成的运算公式，<a href="#jump4">见例题</a></p><h5 id="聚集函数的一般形式"><a href="#聚集函数的一般形式" class="headerlink" title="聚集函数的一般形式"></a>聚集函数的一般形式</h5><p>$$<br>\begin{Bmatrix}<br> count\<br> sum\<br> avg\<br> max\<br> min<br>\end{Bmatrix}<br>&#x3D;<br>({,} [{,}distinct {,} | {,} all{,}] {,}  *)<br>$$</p><h5 id="where子句的条件表达式的可选格式"><a href="#where子句的条件表达式的可选格式" class="headerlink" title="where子句的条件表达式的可选格式"></a>where子句的条件表达式的可选格式</h5><p>(1)其中 $\theta$ 为比较符号<br>$$<br>&lt;属性列名&gt; \theta<br>\begin{Bmatrix}<br>&lt;属性列名&gt;\<br>&lt;常量&gt;\<br>{,} [{,}distinct {,} | {,} all{,}] {,} (select语句)<br>\end{Bmatrix}<br>$$</p><p>(2)<br>$$<br>&lt;属性列名&gt; [NOT]{,} between<br>\begin{Bmatrix}<br>&lt;属性列名&gt;\<br>&lt;常量&gt;\<br>{,} [{,}distinct {,} | {,} all{,}] {,} (select语句)<br>\end{Bmatrix}<br>{,}and{,}<br>\begin{Bmatrix}<br>&lt;属性列名&gt;\<br>&lt;常量&gt;\<br>{,} [{,}distinct {,} | {,} all{,}] {,} (select语句)<br>\end{Bmatrix}<br>$$</p><p>(3)<br>$$<br>&lt;属性列名&gt; [NOT]{,} in<br>\begin{Bmatrix}<br>(&lt;值1&gt;[{,},{,}[值2]{,}]\cdots)\<br>(select语句)<br>\end{Bmatrix}<br>$$</p><p>(4)<br>$$<br>&lt;属性列名&gt; [not] {,}{,} like &lt;匹配串&gt;<br>$$<br>(5)<br>$$<br>&lt;属性列名&gt; is {,}{,}[not] {,}{,} null<br>$$</p><p>(6)<br>$$<br>not {\quad} exists{\quad} (select语句)<br>$$</p><p>(7)<br>$$<br>&lt;条件表达式&gt;<br>\begin{Bmatrix}<br>AND\<br>\<br>OR<br>\end{Bmatrix}<br>{,}and{,}<br>\begin{bmatrix}<br>\begin{Bmatrix}<br>AND\<br>\<br>OR<br>\end{Bmatrix}&amp; &lt;条件表达式&gt;<br>\end{bmatrix}<br>$$</p><h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><h4 id="定义视图"><a href="#定义视图" class="headerlink" title="定义视图"></a>定义视图</h4><h5 id="建立视图"><a href="#建立视图" class="headerlink" title="建立视图"></a>建立视图</h5><p>使用create view 命令建立视图，一般的格式为:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span><span class="hljs-operator">&lt;</span>视图名<span class="hljs-operator">&gt;</span> [(列名)...]<br><span class="hljs-keyword">as</span> <span class="hljs-operator">&lt;</span>子查询<span class="hljs-operator">&gt;</span><br>[<span class="hljs-keyword">with</span> <span class="hljs-keyword">check</span> option];<br></code></pre></td></tr></table></figure><p>with check option表示对视图进行update、insert和delete操作时要保证更新、插入或删除的行满足视图定义中的谓词条件。</p><p><strong>例1：</strong>建立信息系学生的视图，并要求进行修改和插入操作时仍需保证该视图只有信息系的学生</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> IS_Student<br><span class="hljs-keyword">as</span><br><span class="hljs-keyword">select</span> sno , sname , sage<br><span class="hljs-keyword">from</span> student<br><span class="hljs-keyword">where</span> sdept <span class="hljs-operator">=</span> &quot;IS&quot;<br><span class="hljs-keyword">with</span> <span class="hljs-keyword">check</span> option;<br></code></pre></td></tr></table></figure><p>执行create view语句的结果<code>只是把视图的定义存入数据字典，并不执行其中的select语句</code>。只是在对视图查询的时候，才按视图的定义从基本表中将数据查出。所以，如果基本表的结构被破坏，视图可能不会正常工作。</p><p><strong>例2：</strong>建立信息系选修了一号课程的学生的视图(包括学生、姓名、成绩)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> is_s1(sno,sname,grade)<br><span class="hljs-keyword">as</span> <br><span class="hljs-keyword">select</span> student.sno , sname , grade<br><span class="hljs-keyword">from</span> student , sc<br><span class="hljs-keyword">where</span> student.sdept <span class="hljs-operator">=</span> &quot;IS&quot;<br><span class="hljs-keyword">and</span> student.sno <span class="hljs-operator">=</span> sc.sno<br><span class="hljs-keyword">and</span> sc.cno  <span class="hljs-operator">=</span> &quot;1&quot;<br><span class="hljs-keyword">with</span> <span class="hljs-keyword">check</span> option;<br></code></pre></td></tr></table></figure><p><strong>例3：</strong>将学生的学号以及平均成绩定义为一个视图</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> s_g(sno ,gavg)<br><span class="hljs-keyword">as</span> <br><span class="hljs-keyword">select</span> sno ,<span class="hljs-built_in">avg</span>(grade)<br><span class="hljs-keyword">from</span> sc<br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> sno;<br></code></pre></td></tr></table></figure><h5 id="删除视图"><a href="#删除视图" class="headerlink" title="删除视图"></a>删除视图</h5><p><strong>例1：</strong>删除视图is_s1</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">view</span> is_s1;<br></code></pre></td></tr></table></figure><p>如果在is_s1视图的基础上建立了其他视图，那么这里是不能删除成功的，在后方插入cascade指令可以把和is_s1级联的视图同时删除</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">view</span> is_s1 cascade;<br></code></pre></td></tr></table></figure><h4 id="查询视图"><a href="#查询视图" class="headerlink" title="查询视图"></a>查询视图</h4><p><strong>例1：</strong>在s_g视图中查询平均成绩在90分以上的学生学号和平均成绩</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">from</span> s_g<br><span class="hljs-keyword">where</span> <span class="hljs-built_in">avg</span>(gavg)<span class="hljs-operator">&gt;=</span><span class="hljs-number">90</span>;<br></code></pre></td></tr></table></figure><p>但是会报错，invalid use of group function，因为s_g底层是group聚集函数组成的，不能使用where语句</p>]]></content>
    
    
    <summary type="html">harper的数据库小笔记，参考的书籍《数据库系统概论》——王珊</summary>
    
    
    
    <category term="笔记" scheme="http://example.com/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="mysql" scheme="http://example.com/tags/mysql/"/>
    
  </entry>
  
</feed>
