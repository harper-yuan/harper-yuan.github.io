<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>现代密码学作业10.7</title>
      <link href="/2022/10/07/%E7%8E%B0%E4%BB%A3%E5%AF%86%E7%A0%81%E5%AD%A6%E4%BD%9C%E4%B8%9A10-7/"/>
      <url>/2022/10/07/%E7%8E%B0%E4%BB%A3%E5%AF%86%E7%A0%81%E5%AD%A6%E4%BD%9C%E4%B8%9A10-7/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="95d8e0a1986bd2a38af107cdf3a47415dee0ff2a75aa6ca8026abd6e662dfd2e">e7de803e7160295f95749b4342f9c4f199704f8dc0becdf40f3554da5420de4572db7b1bbb0efd0782e89b61f880b558d4e9acb391cd0ccfb2894860387eb2d817548b9ba250680f7292fd1ab4e5999e67588b598e8646536ddcd48b6f9255bb061e306529ce1ee434fb82c90dff30905ebfbc0b80c96367d267b8b68b31d354f6621ee1610df07d0207b3e7a69d61d1ad45829fd439d7143c0bc47921d173315cbcec09b70f028302356b320caae3d3cc6155ce5a01a16d9ff000e1e38f39278f6fdd55e5f57d20c2122838c083e39cf30cca66119044ad09daa47474721cc23be9fe0ff6d25d30a0122de5b3646cae742ba2260998d5159e9824c741a13753b93928097f54ea57339abdb6b774e88b7602c7c4a2b4ac580e122d465ebb1bc27ff23b49c229f066b00f02f6e69ee26b1ca847e149dd26e858391d7da53746ae4d39c4ff90bea99edb8abfa16f4bdf1266ae2336c79b11c44198846a16056bf195a1704ca2c400476e5e7afeaab1f22d1fd112386ed9c88d883917d0c27482c0987481903ea63072160058ea3af09a7ea02c6c361cd432b2df7c9a261ce1e8c8f0c1151cc66cfdbea09bc8493483b486d191d4377b058a448da61a21e04031017f54f029519c0e847d6cc8bb4f828f874ef92c3ca2b61ace6c97d9de533be44b61cc4eec2d869571d3622a766f7b79b9d63032f4a53dd0a4fba24a9a26d9b1add6e95a40894c1d0d6536541cda859308c5dbeecf4bb05103adfd7dc474b12d1e6f3ae5cebf38fe3de205ded7b4bc0b73e518844319f0291f7327a2f72a5f558614ee50c4417f7655fa0fe11b0a8d8b59f674fb6e03a140033bd6ea0624fec3053e66537aa11b8a992f69cf2155233ce2f30a40dbddc73e34a7d701ea22380f07125b1bed4ee6db8c5afa9bc4de9f05960c3a1c9e08785122947710b790215f8f2d626bc04b001f370e1ddc853d21cee95ee22658bd893974ac3df37dc9f45a269f802b94bf23e93874d94297133b9bb66574b81501b30caf06a332d76da72728ece6c00ea138404a017192602b26bead272b43f74d69c214df7929d4f5a385eddea12774dcb7a39c5742be57c9b25c5cc28df8821b2a1219688fd05d9e9d8d444bb2c4aa43b8c2f721034f32478005882fd39ba676f7ef077b5570bb306843e8b4401d55366d9b9bc75f0af82aaf30f05744b0f6162c81a388701b2f9cd75c0564001c461681a56f266ee0706068589f3d77158482ff14ec57cc37523fe6cd0e9f07768a33d36f6eed385f257786a0815a5fbbdb48871215da4972334db686b022beb0a1d51c0570786145332733a3430293fe49595800b9e1f8157401ff4a2019b40ae29044afa4b90a2aa8cf16ef126d524146d3115a5cbe244b34589db594aa643c1aa5634f7448019f16d0ae41e57342b4f464931e359bfbfdf0c862e9f05266edaaa88dec5be23dbe8f23946987b4dd49f085c22c24dd4e4819e2030419723e7ea61f7ec9bca16f34bc8ee533d82d4a6f6f866eed5490079a67403f5aa4e1bfe90690889709d68821060b612edaf604e95b4fbd7625edf357e109dd50b42146df4932a3bc36d5430c13ed54c6af4d15ffed9ae9a523843e470107ab97c6b60fcce6df6671481081505ae07e95976623dccae2e3f226984e1f1c368e67100549dc9e41e8093651abde1826fdc35c9dc54bb85e9ee9c49d28e066067ef741ee414625864b7ce619b226702d6c6c1a5420e89194b2c299a2b11c8cbe84b05c4728ffe2fe345d8ecb1732ba6e53c1a0c4c9b1d23d3f185aa170e5e9710f4ec971278b6cfcf5935e581e057c467f307cd176fc510239ddcda11a91e228ceef3549e4de47adabf6138d43927a3fecd3e6addfdb258cbc81a1ae49bc314d0bd6521734195968b14937765aee2c31fd3806e3343d18954fa52e2db0674b6654606112a69b3437a0b4a2069233a2e0cade4119cdba051a93d859c545f3ab3e68a2eb3dbc8ea23abb0b2ee5274579f8ff7e43392cc39ecaaa8b45f700f4bdc475868f671a4557f6ae33c80832a38b54e7ee39e29c3eed699a5c6d430789a53b2afd71b95bf95d10620422fcbd0753fe316fd11f8039adb1192db3eb0119995c6fc9dcd6ecc46cb718a2048515bb87b3c988f449da03ac5903d63db4b0620d2e2747770e229580b9f7d31aacfb58322f72a17bbce991b326c954b12d59f6edcb16a2f72948021cfd47b43eb3080774bd4639b783010ec627280f5e577afa3d1f0008685157af3a7d7f019922537ca5ef444537d3dba70201e8dc3ccbc6aa126f7585de1e5ec8c003a6bfbb86e4d7016409be4d272cb584df05502598dd494d85a943b7387321f494d9de39a99c97b209eba9a4015401ec5728b5ae26988d51e45fe284d67c3d179bf95e1f6c7e510f1c016cee6c13c55c3ac8c986ed22b660c8ed69c5d643cee79655b771917d2b1fe9df1be0af2615de66f80a09344d7e750916b96d48035a6354d7fe34a97f573caa8ff46086c37bff2a84ffb27636c04459c0e66fc4ad51815d787b8d10f65e727367266d7a38369292536bcfcadf01172602285fedec26f96a0f927406bebed6f9e4dd2033b93d982489ed943f8c9684a370b598f049366caf4fbc5bbd6f38188d2fc934470dc7d69e3e7c150f735b63b58d56c38bdb67545237ca558ed82f88be8dcd9c56484bffe236c033ccbd7757f1d900b7a5e69c5d099920c9a8b9eb8035dca4a8d7352182e72fe436dd5db5a4a2a9db41c05ef4364c00811d0be71b420ca7044ac1ed6f2c0333fd504d45fab8ac0001e94d07e9a2da0826984eb1b2d7de7a0054deb931352eaf575ee482b546737431e992fbbc243f5925c2165160ae73ddd257086fba4dfbfccec9e8dc509b194b9845efcd1dd7e876b0b054a6f0844551a3afecccd16c49592c833e8708cf07f2ce8498523fcb5b6e441e50ece6004d5c53bcbf450b31e441df94690fcd26d8109b7a4dbd5c57d5ddd6782a81b4c04ad02467ff6a3a13cb02fb8b72f8a13020d40f8cae5a2c6918741670cefe61eac287c53a8655ada449795f54ef750def9deba0d63f0a06efbbab4a39c7d21779162e371a23feaa6d60d900bf8bdf9701b3c4f53c99e3d06fc875cde3b353066e58639b6480b284030497a1de5e95a6f10d63cbf48d7c916ad1582610d97556dbfecf18b17e86f8d21e0c7eb00b2df8e3b5fab8905381285c182818742f968bf142b257822947069142b01d22e433c51daca87e213617bdfd30b16ff777392c0281cb0c1c107ecddf4df893be92e15303e0aedce86cf6bff6dfe1443e2ef1ae31b26fd8cbfe0af244044d8eac645b43c7302f4f171c5ca9f9476ad57a83f0d8f8d0dc5782632d8d064dd567cbed987ed53d1c4dc2143f45f9be5e1bc9132f6fc37348514be2d4231b61d675a8343032ddc9bd29680c57ac5d58164bc2df1f061af339d6ea4f80922b8478df57be02868dadab9954fdf30e93601f8e2d80d2650c0c6916c1556f38291a49f51312ac23125aa0c7507ed5326e451d3646550588eec043c380e368341972734946401532c1301cf931f00fa768ff4bc34d5e1ad907e569a039c16cda171536a5fcecb0a9a49c8afc3abc90c6e39f805d23d98ff69ca724a10dc11f2f01156ddbdea827baafde1f7e0b97692a3a0d058ec82b1d2b7686d8f1d065130307ea65cec8e8f8dce328eac962eb06c996c63daedf6aef9ae2d9acf7ab9289a0a1865b3b17bce5cb8b0f49911e5b31d290f215221cbb9eb38408dd2af85b963440963c6578efee9686455e944d469480a0123bec2a287349017ab1beca026e3f680f7e589fed741137173e7d013faf2082330d4b6f8be327a911ebc8c2fdb7331138a377c0f6d01c069a3c53d3cc4f4168cfdefaa673826160721c6ee841d5014edd8195244a0e4101dae386dd37004398a4b222c292680a13dd1493f4b3ee72a902a43af01543ee97ec1c7ee3d94917d9dc27af3b514547e57159268a05faa9707ebd25174aa155a55f3cd10d3c22d48bce29068c1e1366f89b23cd4aedddaa6174df4fb83841e7eee54612bdd16f117d1508d655f1f0a007d5f3653f814150db071dfe858dc244273f819f2dbf3708c0efdb535d6bcb05af844a1b8f267130c74c35bffca4a1197a5f0c0f4e163c4ad226f10d27bce89093927e1a17c90cf58ed9043d56be9ff14eaf44bd88588c0137def5597ae54cc5d7b3be6ec425313d047094c00c07ecc6e4802a47402638347beffa4ee7d4d0d2358796397ebb96980a9e50101392f94a4f07ea18f0c9d2c12c62f645ca13e8c1684012c54c1590bef82734e038d610dfc0a55a0fd495c96bd8f9c0b23ce18e5375c62bc4c0aeed27ad4ab764202626707fa8876c27235b125d3791356de6fc1b2be2161c1533a39e713b13c0d2b3c53ab7de1a17ffe39831c1a260f98e37122e062c252d5f39716f462afcb9808cb056bb84611cb87a82d5d0717a1aa30f1aa95ae6dd4af0fa8708f6d639db1ad992cadb64691402e31da097fb561719a36091b08edd930d65bc97eae1076ed748da6ab2dae472e08906578a688f0bb4fa2848b5344d4568bfdb573f819b745809ea5a7ed8c57a0615b5e0366d66badc556482a796f997683b31dac663bccfb29a1d1ae79619d73b342edc1236b7f479f009c84e8af69b908741d53f56fbaa58ec014518ecbbc8e5cf00b2fdd32cdd6086bbd649fa00a9e768bd605feb7b61566286ae4e8bfe71f881d9b16389f63adf51fe16113ba6c39c115309f7ccf0eec53b996e9fc1753d081de8594f452aa84b3a31c1d60f916fbc6d46dcec6c86e687f16f153eb4da07dc219c5885949bf3bcac4f97f60e7e624405fc7e60ce4efdc9ebaa522e6678c1595c483a2334a7ff205fc9a64e2060e0f18e286b44a0ba187f059f82f16f33382c3d46d95dc03ff85197529df47d69add6ad288175b27a87f142c1c2c17f62c4d6c4a7bf8ced80c09b9f543fafe13d25a11732795ad8885ad3df62bac42fb0b6e879512d33c63158471f8e878d96ff960ee4aef2c1768b3357bbc8c9331bbcef0323ba55bdba210b502fcebb04905bcdaf2f388bdb6639fc1fd4959c41a97299a33c149bf06222c93f5bbd23f67ded7449c638cbfc97809f88f541a63a9a06e14eaa382e262c7ed94e1c39b607c372c58671c143ce35ccb3be2188ce35643ed56013d13afc2d4b7faceaa911e7a456b3e8955eaf8652c4a94705daaa22a93166699cc1a30a017b960d762da93b319dbd85ae594245527df33fd020c67ff9d5649ecff21eda5e5a19a0e18db5e2a2d15598339ad1a2497d159630b6e0c0aa908a1866d3abd7e3597faff770660847b34613f52297d3f16f5586abdc35694f68ecfb3a095cc57bc3e7edbf84ec061d7eca96bd55207e835c0aca9c70e2350928a76b857f24f8f83e8118e67cc1cfafefb14d55e19e594dfec5a92a2fb184c7094029f5683a7e36366aa7ea6c40e4cf50fccde8e6c0ae81c28ff661b05081b45fb4c4b11fee80dfa4ff5df9aaf3009705b3b49bf5b3ecaf97c491859529a015c9b777b8dd00c5b653ffa4d36f930884358ae7241090d9850baf8d3cfc11e804c86dd71c24a3cf6c5c32dbbb90c289e553bd6fb2c1229c56d4a008f0c69b52fadeed704862ea451d0bcc9bf2c9b94a8dc1851b7606c99508af0805827ffc8883ca3f95e40991163a41f10ea91abba56e27bd1537c485cfda043c7cc237cc24e9801dbaa8aaad012d1b626be1dde2c237ba686c42ea6acc8aa9b888cbd446523f8e19e1755a177741556f04dea36c09596712c55ad3b76b0ff2077cb714ffb05a209e142e7059d19d913be3f270c60673c8a05461a3904ae72f94f9d5bc0f568c9cb96e36f5c4c557c580732ad864596617a2d50e852cbe5a4af356258396620db30bd15a5ff07a0e39f7620dafda0f845fbd5451bf2cf926a58c354509b2fe3d813125b4ca8001c6b5b94e0cfbde290530f2e283121705b92c18e7531cd921c62683a2ff5ee38dbaa11d3e23626eda2e7b7fc8ac0a7bd69e3b6716bf0c73627fe8e3ba5fbe6937cd99a5a126d490c8c4445b2d77be00f040f6e4fc7ed386db0a8971b69ceac401b915378246feaf093d2a400f873173a03b5efb0f687177f9d1c9cd178257a7bf056e305c1cb2ff5ab29eb964201552ca2095001f80b65f0a46cf3313fa73f660baadb36e458ccaa8c9d22216ab378d128d58ded07ee6962dd10b1bf1b15308eaef49d5745d6a77850769ed2b8ed1fdd95f2cdc733eccf809a0ad9c21dca089311c6b6297ee16d74e9c05e388d7349f9ec28871e1e738d26580e8922cbe40f953c10292a35f6f956e32d6ac885550f897757b41589dd94414a1b7b6e702bde706c86d452a157149d20dae17bbf813e40442cbfe9aa42c117c3f268ee2b2fab46b20b2cdc27f4284af4f4139e843624802010c16e202244739d37bb02264e33c9b2c637723a627ad50f0e5c15c7d6ef159c2d898b233fda39c5c1caf04c748806ddc1ef067748905c855abe9e4fec7fd01c0c76bf5d2aead4eedd9929c16f1633bbf7ef99594cfb42d3a93616346682d3255a51847dd6dd275cfae19c41625dc1889de9dd41a84d3001730d812e5f54f36668a96646a88ab15f3ed691746708aacfde3a0dc8c815d84e22a9e7e5ca0316c1ef483b4fc83493fead803fecb2f789dbbe12842520ef998e9a7ea96d8c8dcca737a016f0897eb6f32ca5fe66aecd72161d39ad444dbfd87297ed0b57f8664e77c40f7fa997e857c002456402693fe0551fc02deb785eb5fd82deb7a789a768ab50f6772c0a503484643e9823ef3716e3814081f4624e4c0c360949fe10053334b308b6c72e907cc297f9fa38072182adfe027a7db9987934df6b3d67522edc570881a4689ac078ba9585ed4c783c7704e994b949d0dc23f6b65566d6279ff6f1bb255064252086c8932bb61c099e374a7b2fe2abea9f09ae44cea1397eb36c36a7463219210b1c5443487b700e87d5f65b67a844bc5d5c7617100b8a5f942ad58b2c574c97c8f17230b1a85de9c29e2a1aef54ee0242ed8024aa671159c816227ef96e2a2f970a6f463c4b0510f654d88bb69cbb06aec47e10bdb4572e0dae4b04e2e44792a0f44a604266c63dc6935aa4de9d24caa40134babc1010e12febd2dbc657c65575fd775c29213ca39f8795392d0724ad74be5b0b9589a2b7b57432a04b952b7f6d0247088d07802aa6d2825c518d4ac32d050b8106234718506848ae611ae4acfbc4b662803811d6d0fd3f5076daa4eddc1ebcf3b38d0bc2962e5439ff982ff2ac0df8dfc8b49bd03a050f3bd728d2f356652e390f0aedc2cd10f10fc985babac72555a0b9af82c68ae8138baef5c41b9c1d75fdf3de7c187089974e455af75dc431e3b66633f031d8cd7889b025abcf16fc27745593d5debb3c30725237e6239531dd18c7be665f0fe3e6bc666a74ed99b390d7b5624f75bc55f026f4ee2fa4682bffeb5d27af4a160d56711054db8275cb94a879cd1e01c9ec5b31e1ce712b6f72ae6945798dbd047a00f6718230957610700c9bda21f53a07c12f856ad08000fbc7e2211c055b46ad66596413543a3e6ebea6a7cd5236afd0b33203f295bb57401da3aecd54ac709dfcbf7b2493428e294db1b7e32d0dfac75755f9144a9df63fe234018b0834f18adccc8c210c7169b4eddf98db5524bf393bc3549cfebc85496e7f24c57dcb1337d027a981d1fadf2412e653ebde1ed49dca3b5f30b5cf564301e02b2576d70eda0d362d28e88311b884494084160115fc80514df570aa99719108ed06025e6601f56c8a3846e6139dbbf6d4f3bf3fc8d7a7a92c4b4fc4fe66b8734a2fd3d55036047b0a67cded010c31ae961e74ec75af6419f575cdb180586bad6c9741314b8e8c114aa26c0cfea169795623726d95af61519bded1fdd32dc96f58d60cb0161120940fc8b973d8a3287355241c31f82a5760ed7a4d914565998cbcf50546587ab372b5600fe791df3e61675ebc04f75a6988e860a139b96b49cc441dc20e438f2135423518b21556efd180938ec28c8a280273b72857f5fe75667a9871293b085af68601051f2fb35915d577a6248f39c4e10ab23d584d96c84b994e18c1543a41b4d93f7e01f6b293de1097b7233b7dfa6bf8545ba2eee70f2bef969687a1f23cc8217d324f0ad5381a965bcfccc56350b4e84ea118f84e47b26c366e637df4927bf867d80fc9b981bf95fa4013d43a0dd5581d81a1fb95f0786c88ba63eb3743ec6a6787de87c2448ab45867eba4eee011b8fe28c70c8c7bbdb405538ca5bd1a27f9f0355710d7bc167c83aef182e4ef7beb40c345dc54c647daed7ef442fa2889809155f6ccc0c9b4814ee5d4f3e722825bfe3ef5714cafe77ad875231fa4736d4f5226834869f5fa56a90cdbde7aeeac0e7945257792149029e3e99c286a9d5234b7f81f5f195bd8e676609cc7825af9b4eedf628b7f6cf052e78677457fd26d5febb5d092848b8e07cb3f33c58f2a5d9a7511798e78297a1f952fdab144618989489f1e319c96a777bc4fe8342bc230abe055260531ce39a9a833a189bed6e6a1f26d8184c85ce516566301987d559eca770062a859fa3b2c1cc7f848fefca382c3c840e8a8a450097c140b63cb3400fb8225bcbc14b1b828f5ebaeaaf32e13c39244683efd2643498d4c25e4694ac10aae95508735b697f68395368940c4d7c82e215ddadbd4013683d06e8c624f0b7df61d565fce61abc55c361d664e04f7cb5e86c17b74c6d9c61b22c134df6543e7d8db279933f0ef211729b80f1d6433c29f0d7735a429d1f4b659ac5917555af47f362f1f3fa813019bc0da709661af24527bf07d8bab276db79c581982b83cca5863d92e7876b1536ec330e142259129ac6598f76da822d786c09993771bef1351db9f785b0f1a50db6f1ae278f38df76feb431bc56d2a090a3055bb8d5cd8c6a901d2a289978b4bdd8a07971ae5fd2effa5f7fde44e8e30a7d85151448b5fa7468b95c5c9e86240c7b59b607db7aa7b4f85b4ee95ab97156c7c1f9cccc325c909d8bd8a2e2deda2bd52ea27040190e39796955c428af621d064fd1088b12f71da17a410afb5fcdcb92d7c9880f9f86220380159997458e6df131154faa62410529b5a0487abed4cdf85f6bb7bb5aefa1e11e543d01a39856b8151075ba2f793f93271c03ae6755f86511b99a42b5a2bce81886cc22d5bf9fa5992e6eca1e344eea99aa0834f388a0c61f6714efc87a770c1b56f0924390ba21dcb3d7bc9a131606601bb7bc96eb8ca4bf00280ee4f0e12155979e57e90ac357b4b43a8d7007203efe5d4987776b08c474bb53aabdbc9127ff9be14253c7e1dac91b9b3042929d9222b2618d59ae56fdf6dd33300ce2747421f6a0cc914a501be94781dee194fc5c54fa4cc01722b2d40b318d9fc3021b1c5a450c54ef74ca086a14317e7363c3692bf5f60177a10ed75f4587a20372c1a9abde7c469a72487c0e7a659683cfa28a809ba033a3afeec7d98ad73baaa8c0fefc1c1fd16b95a8523d17c236a17e80510895d06a8e38d59e09c2da1ffad7fff52c17c9986543d28da1e9308be153ce938dd1d4850190ffb213c8751cbdfaa1ecd0d99c1ed73080616738922e67875b16f86ba01ecc8492d52238b893deddd675ccc840f084ca4d9946b883cc0c060885e8ab93b1e5b4348a1cb51140e74ea8addd4ab238ced251b33c589076a4ee5193913cbeb52ae21b7f3dfc7332b20e8d71ad97797ab74176c2b0a65d34d4c44d23cc2dfaade8b2732a1104bb461100e66918b6b314c5576ecf16a438720b2159991c8a13abe6fcb840fd17d6f66436ad41852fb174cb497c0551737c66dc0ca5fdf488cdae9ee9d11fa2e82b15d030ea0c0d21a449b001b73da50111f32fb9d3077454c2dde5b75392148a83feb4915fbde73298a0bc4af2bcfbbde5cad75efe114bb4f6a1356ea5e89e8e864d97d466c8c78f9101ee44db56dedd95c194e86507c45c1dbe604860d3bc30b673bca179c979d3dabe7384e87c6d2515b560ffd4ea894c090f0efa5a5f5152ad921060c26854a68a97cb161b4510cc54930c153b998948815ba0b05797068ec9faf5b8763f95a96b7a55bb8c823cb1929c872b72c3e1cbe92e5df1bb2e141c05d73ea741fecbd4174933532aa02e68ce92e9cbdb2b473c4393a367da46dc9f3ecaeec5ef1e67be67fd953758e0b21050442f0d042917cc17d3790b09d9edf364031ccaab6c6222a0e5a7f8066438294e6ea934391d2660488c7c4e23772a5eb818269ab8a0df677cb256379f4af1c323ab637dc36b1542c489359758febe6bdd53d86755a369756d4c698d21f95e2f53ec4a2dd6bb38f351aab490ef8ee3ce9d0ac93b456f59946ebc198c857772acfeab814d3ac0bce6c0c9a48779b3277288d1c200beb6cb26e1952570dbf20cf689280b0f0b2536ff0c8ecc6e27e262a09bbcf7bce687ae39013a3fae0b32913179fc8489a126987522b4bfa4610ea14a9c919a0c748de6a2827a58d0594cfeebff05209e2e551feb184474f1d59821a6c80d08d9031b0e57be9b9faf1475f11caf68791b32cdef13260b8b0591fd5ad232330db09575b566a05e58ce25f3c30a335b24306f93362f2ae63dffed144234eeb2f93ff535cd71a3f32123d143b151340baf71b48040ba3eaf214a17f0e5c4baffe796507cbad67c31716defea3da44a7e29af403ff4082a3a146b8ff790c02e07ae3e8b88bfcd433a000eacd8c1836bda8c3a6ce78bf9a5228809393ee5b5542d83b203ccc0b48a791331377089defd8b315675ac7693acb231c90b3dbb320d0094da2f0cb833bd5f39a9a2d228302e911b46f16a5bcc8e97f90fbca8c76f39f006cfda329fdfde6a64dd26dd6be41abd3e9bcb67fec7759364f783334d951fe7992070aec4047f389d5ade98a61d87670b481358d1c78a4264e0e7aae63a64fc0b48c96fd616ab42001665855c8812687c47d8c6e0451885590f2b0e4cc2d8370d808a27dd09c476ae57e58c9910fbe2bc7edb2de5a07a694e13826756aa579dee4bd271f84f791faeb8b3a27b83d17317867b515c4731007f026b643bba989ecbb0b01b6b67294a77a7a92e735898f8ec6ccc2ba244588143a1924fdbeeb733ebc2437cd8f60ea2d5a3566d520c5e82f66191f16e979ee4dddfec59eeaa37b99bcc03851a8049013507a9bd4f08112ca4e9b9738d6bc7ae5cf0c3096d4cf57c410f303b0fdae70011b4ece375a6d8f8feb1cb5bcbaced3c433bbf4b2bd3dbe4e38b6e0fbee05c39edc7b60cf28da8a6e85bdf75c876a9d19d604acd322ce630f269fa331b9851ce21cccde2a59921197abcf9a82431273edcdc1cbf6c1734adced3ef124a5e28d1c0d7dd4788863676df371f8a50c5fe7871c95c362173211c60c6e4cde4b1bf10d71172bb8faa1e5b387923bbef29113d82d832dfd6b4238e2da084d3c661cf318a62791e3fda38e5703d413103b638cf6d65d2da3eb89db94c3f363ea71b93d047551c285d396df54772a6b780aed7eadcb252c176171b02647efd7db9e603c4f53abbda801f1ef3d68a90a72fab6edb2b96bdacffb70550e881b7e1ac5c53cdfb302b86208029c9ea553f31f74a0720def3788d0d9c6fcdb4170ca93b64dbbb671395dd62ed316a87d216712df09c8fc08ed2383b626e877bd1846591380dbd6cb672f7dbfe952d80b92ea0796d05b88af13aeeb4621c0b94800f18255c9af5578cc437226a881dda341f62e7b68b1747c966954189446985be9eac54e5e9b0700f5dca7937af8085444ccd673308387ee9adbd42785e18b009f685b7b75189fdf30eeca51cd3d09b5c48f46ab2efc229ea98e2d79f42ffce8d5a7699472381b77118a3c9aff5448f9ee1726e731ada397c8c010dcb7a29856377d801d73defdfcee2ea71f93164514487b41de8fafd3033961286e8e2baf424e1b4d33c062aa1331ad8be9e8cfe8d9999f3d7c96c648d02746071ed0836326afc6e18431c54b5b2f1f3c1b9a922e2efc0a4dfcf2e1cf1760e79c7711cd0032bc56903f30b545c2c77870f410fdaa0f6a07478ff3c94daedb062474318a2ddc5403328a019cb12485b5d0914a9a6155bb308d1e1a0688ca0661ec9f67e23f8ff945b0901c87c6236c15b1cdbd4b58b30b7b4efc7875b13634b9d420fc3fe88f461aaed73802a4d93178e1fd0109fac7e2212887cbf98839d7be9ef44eccd31b5e3057c5c929cb7b4956a72f9555e123ad7a96fced4a8bd4082592c3c3ade276d0e5a455ceac0635b480611774666124ae912b90cbe5be5cb028755361e6bc2fecab427dfa0aafd7f69d80d35a17c1d6a7e2b19e0601355c784e673010cee085fe742db7dec08cdfadf440423d48bda4df4b34b14c06bfc5f6c25dd32b25fb1eef0aa06e274ae2ac6602170df9d01fdd8da546bac6fe315937ed97b931bb6cc200eb49178021fa7d66446205f765cbe3be449987127d8b8bc3527659f18d730a9bcbd70283e0beed6614d318fa92a3d5b64e938120b42fccb0ed79b56b49af735294c0c7a9bc54368d8d02074694c47108f3870ddb54e235e064f499b94f4a113911170235454dbc44d2b88a9f99c68c94c7165a8f6701fb04fca7ae8438671356bdd9b7c40f10f4a044bd2d749da7e05831ea18f5de839c3b0f0f5a934d3629118096a3a8eaa9aa7a7e15762bed76adb0c52457916ea7294d9a6d76fa48ce2d699c59b97b8a8ad23c3675f332ef69ec96dedb07ae3398dce91b34123a21975675882394cd4a600f9ae5a77113bd90e88c3e2d87a1c0957c3e3181daf11b4532ae7a203deb218c5aae23c29caf8acb2c4e31233c771190a585c987929028df669a1c4bde081f579b3291dec643e4b1ac1474bc6882e13b43f12fe7d19216e63abf3184521e8434d09cfa02659c07fe6c159391482d3beae8b6285bc2ca44811699e18b0bce2f622b19c274426cf2b7629737256d1d1892556de58c93e567605d109e677ffd319551af23c9f149c8222bfa53c8a99db9c10f826bd979d829d080e4b40582b86865688e4c1f44d81f7539e4ad4bc383abee397e0f31e72df2652e117c6fca15cee3414808e29d78a7cd4632a0482f3f873d182aa08c7b6c339f7fef57f89faaed09c8c7ca5b5407b69d2e7cf70b3ccb6c91b70f16a44c03b34fe9ea03cf5ebf59566cfb98a4b7cf43e5bf0c38447a0ef3c53dfb58699011a7a24687f7da53f601c23d4ac4720f1f0e0f62e258224344bbe98d4574e18cd7f726435f9bd2ac6a77b4253d5d2bc8598fb3406a14f84c5e7acd298ae88e0750a2e9ae4cf70b970066041b96601f376111475133953df9d00991b81d6e4f6f79d947f91e73974c2a63e9a60b8fac6bb1f2d617d89adb2306d7c6709cc45035eab7ff2da174676eca5653cedcac230ee42bfe00dd9c2d88f34cc9b3fe85c49d3b065381811c42aa7f16b6625a650c1607c637f0e668faff165ef72f036eaece67805d65d321ab69247b1fd1a4f465debf82098ebaa61bcf4cb2f865d437801a3157a0bdbbb23721380b032e0628fced1e756439d770516c651bc5ac9c0118e12b3e3c1ace538716228b20f83efb748e861469de86e1a8eb4de1412da7db7b36d2a5bf1382cfaff2e5847a297f57472e5015cab01bbc33e5c9c37bec28527dc9e4a75de52389c37e45997419bfb461329b535828af88d8e81ecd8370d6f97516246e805fe0fa74fb6de0cbba0be2ade23acad0e29ee70016492984341b8f0588206d572614bd0a54c26e36c5b64d975a383dff3dcf614f21834d9626ed0952dcd4c11a979daa7efc288b6b4d0baf143d274a442e5c8302dba81865e9ec3eebafc8903d1a9c24bf9d9e9f1744f85d5554487278ca05a7cba6c446e3fb0b42c11fff5faedd8eac972afb6fb5d101ccca3d3bf89fe9d8ed0de6864815288a4ac36c16b8d7b70b65957dbb5e9ab17c9fdb98b87586c2ff8578d839a8d4daa3f2f85fdcd9bd87f15c4b76e0843cc8dca0af1a8efcd4e26fc5bc41cee93debdb519c2f8c7a4c958341845021a6683d90f24918455403e095ce2ce01e5a291c64547df31d88c09dd70644755f99d5ef4b7a416adf04847bcdf4aab297aa9f5eec0fa0f3ccfb2b28bae0bea8c4a5c875ec8f89a76ef4bfdb9eadd89a07ef57a834f05247d560d9511f4c0dfab4c9ea0588a54f8e4cad1304423df287bad6b6e4fd38cd54aecc2a20d682e353c3fe37483ab53c378c7563adb4cf95f9733a0bcb90eeaee6806e289e40fd2480c1466122c8060ef14a91509b99a07b31532ba7cc373a9458503aa638df58474acafe851a4a463202ee3ba0f1a43d63586ce9a4643c33e259422f5e4c9b522f3949b1da8c837aa91a15dfa74a1b962a46c3e5c45e253e6dfb95f33bfda29db01349087e5d7cc95c8408759c053fc5bbbc8f40ee0de09d57b9b65c9e8afcb6b4b5cd6b144330a9b73493a80ebb9fc80f1566e285f27a398bf2cb854eee0121e88849997577e5d98b5d373b163744df1ec8367ab8a1bf1c7ac46ffe860d3cef2811a355d1322c6b2ccdd82d636a57e80d65b447c99a661a4f274426cc1faf25cb6fa23e1613aabae86def8e16decdb1ab8447794877a519054a396b37a9169c917706ebb8e646513c84ff62462e6aa7e90dc56d000e9873fab53efd145cab70ad53903677f16b8a9a5cf1ec7f255d9f1568705610f2f3ad208d835b183644711ea44ad9abaa28ac832c85723f29dae0cd6e755614b02c40fd69368463b06500b169684bb64d96257421ef47bb296e94d089cb092923749337d2b0f95162c7ebafb07791d1240d84e327ae800e7c344a73e207f38388fe533a9915df17172aea93e9478e5bb2652cc4f7b79f7825d3048cad9b14bf173418107908182504395743c49319d1207c57b500066d59e51bce2c97076007d5b8867981173a4c2426977fa4a17d697e2dd3875903cf80a5b20299f5474348eecf22534a4be239bba03cdf0af84c0793ca95ff63bb73b9514b5aece95dc5168032712a096dfb9e376530562cc62201f99773ed1a760884294246c7156708212f95446e9fd059a23e24a0a118c818a56f464ff9952dc72f09fc2ca29d9b2b44e12d8e3a0b0023b1a425e552dc2b54ed1921613dd2f62f0201b8c2b60da058f386de38b8eb5e242e4993dd15120a869de6fe4503e3c8da24f8e2a2ade1da0dec3063355fa068bc2e9f6dbfe7ab4fae7e5e4b68a6ae282b7abd267dba6d57e193daa911339247fd1aa1c4ccc61735146b9aa3a41fd85a348254492c94f65e1a0ea1b6f62a82e50e8fd1e346512ca35a770ac9acc4bfa619755d254e7a0669fca3e3750a38c9cda7b98a7d888608b952295560f745ba7f45b0c0fa10addd07597c0fc071529d2f5a690608430a6043b2f2bf69849d1128e4acdfcc889b6fb064b74eea7b84796209a8cf27f4a0f95e6cd16f02c038a2b6b3c8eeda206345c6febe5546491f3b0439cd713585dedbe84e01a102c57f3314cf3586cf34d1c0367d948989f45fa0716e1455ec11954597c0da751b3f7a3f833c7e81511676f03d33cdb0d0faa136be913d0b1d1cdb329b9ed226d5a7450163436ebc54e7edff6f32ba47a61c9e46a5a8b34d2ebc6d02beab0c077063acbbdbb4c77516c2d55c74b1b82f5efd54c7c43198c7317c2b53020d8f78c6c20d6db5efe65d38ad7db72ededc6dc8cbbc0043e8662e1deef8772e49b91bba30e02719ccac3037d695e3c7622da7ea71a723f15b3f7999003c613c3d1ad5498f9ea2028045d8ecd6478e28be5ba989fe7706df1ec111e1b9d568319dd66e9fb2f35968b09410735f520e75af41f1e9c0886a32f39ccecc52ec6a439aadbd5ebf66c30db647285c7afc32ec1bf0d7186218ee0995f3a368fed89ad6d2e58a29fe36b79f6352ba9a2d450a7d9dbbdf214a5b20596568294ea331df6e516c262c101cda09d2a333e55e444e9db17844f778b522a76f4c43dfedb62fafe664488b27588378e3f1636deb21cab303d18aa5d9a4ec75325a283eb506a1cdcce7c218392bf99caed84e857b6493fb42ad4fe366c1295bf6905f0236b677adb359c4450fb0450f79823b63d43015ad70e03e26f0b39bc94b86a72ea1577f98afa1ac9daad77f3b36e6c521dbe39a058b30028491316ce5fb6826579b7a14fc45421153ab1726bc4538086dbcf3f78a91140dca8b818bd52512de13a8834130a99d22ede43768ceb8d08f8ac4a9fcb67b510d93dcabde7188d6ded4e2c52e75ffe39bf55f65d3de7771e5fcb79d70b6f54fc9d5f8d70055d72ec9f0f84975713961ab1d87d29893e53de807e3d508b72d645862baab0a9faf9bab8ab8a6fad060fdac0f8d6f7aed5416adfb5f23e1e0e0722dd8ac1f92709c8e8acac97cbd5512348f2c114efd64a5ee2a6226422ffc5ce643b4063a1429a21faae4ad8a0c428a23d52abd1809a3b24f001cc0502edd95b856f678f349012e253489b15a53aae7c7a21b6f556a116349f59771fd16a47efb413517bf41e4a41eb8bd61cc6aec478199ca3442b70148a8dfb1c154c2f348c2d37d82656a67c7cb7dbd351d7552eaaf3499e95f9cb9153303de88f5573974a14b126ea7643c3789e86c95524fece3731a2ffaedf202daa3f89123db49afaca87c080e01a87aa4ac34caaa725ba3c948fe7cdd946d730be7a772d07301824f5348d870447b49010eac486efd4f297e2afadfc5b57c359e1954e2ff35fe9ebab4ed73f5a49df90a0fa35b344eee7cb7ee959434b292650c98d5bd650657e6ed2ad5b37615fe025984ffa638d836192880969393d92817e8040e68dcd581a247b27c7213f6ddd132e6ffaf37db5bf87e33624bd2dac0e14ff78f1efa87a82b0677267384f</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">您好, 这里需要密码.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 作业 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>intel_sgx环境配置</title>
      <link href="/2022/10/04/intel-sgx%E9%85%8D%E7%BD%AE/"/>
      <url>/2022/10/04/intel-sgx%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="sgx的配置文档"><a href="#sgx的配置文档" class="headerlink" title="sgx的配置文档"></a>sgx的配置文档</h1><h2 id="参考的文献-amp-博客"><a href="#参考的文献-amp-博客" class="headerlink" title="参考的文献&amp;博客"></a>参考的文献&amp;博客</h2><ul><li><p><a href="https://flxdu.cn/2022/04/08/Intel-R-SGX环境在Ubuntu-18-04的安装/">Intel(R) SGX环境在Ubuntu 18.04的安装 | 小木槌 (flxdu.cn)</a></p></li><li><p><a href="https://blog.csdn.net/cyLee_/article/details/90245344">Ubuntu 18.04安装Intel SGX 2.3.1</a></p></li><li><p><a href="https://blog.csdn.net/cyLee_/article/details/90200470">Ubuntu 16.04下Intel SGX SDK环境搭建（硬件不支持情况）</a></p></li><li><p><a href="https://github.com/intel/linux-sgx">github上非常非常详细的英语教程</a></p></li></ul><p>主要参考了第一个博客，但是最最详细的是第四个github上的教程，只不过是全英文的有很多linux和sgx方面的专业名词对小白不是很友好。本人主要引用了第一个博客的内容，同时进行一定的补充和说明。</p><h2 id="本人所用的配置"><a href="#本人所用的配置" class="headerlink" title="本人所用的配置"></a>本人所用的配置</h2><h3 id="电脑环境"><a href="#电脑环境" class="headerlink" title="电脑环境"></a>电脑环境</h3><p>由于现在用的电脑是锐龙处理器，而且没有trustzone，所以使用很久没用的、尘封已久的老、但是跟了我一年的老电脑。操作系统用的是ubuntu（鬼知道重装系统用了多久的时间），装完之后开机要很久，也不知道是不是坏了。</p><blockquote><ul><li><p>电脑：联想Thinkpad E14</p></li><li><p>操作系统：ubuntu18.04</p></li><li><p>处理器：i5-10210U</p></li><li><p>内存：8G</p></li><li><p>硬盘：1TB</p></li><li><p>在电脑BIOS中<strong>启用</strong>Intel SGX。重装系统不会更改BIOS中的设置，所以即使重装系统，Intel SGX也会一直保持启用状态。</p></li><li><p>安装如下工具：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get install gcc git cpuid<br></code></pre></td></tr></table></figure></li></ul></blockquote><h3 id="检查硬件情况"><a href="#检查硬件情况" class="headerlink" title="检查硬件情况"></a>检查硬件情况</h3><p>这是Intel官方给出来的方法：<a href="https://www.intel.cn/content/www/cn/zh/support/articles/000057420/software/intel-security-products.html">如何确定英特尔® Software Guard Extensions （英特尔® SGX） 处理器是否支持 DCAP 和 FLC</a></p><p>在终端执行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cpuid | grep -i sgx<br></code></pre></td></tr></table></figure><p>如果看到</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">SGX: Software Guard Extensions supported = true<br>SGX_LC: SGX launch config supported = false<br></code></pre></td></tr></table></figure><p>说明本博客安装方法适合你硬件情况。</p><h2 id="安装Intel-R-SGX环境"><a href="#安装Intel-R-SGX环境" class="headerlink" title="安装Intel(R) SGX环境"></a>安装Intel(R) SGX环境</h2><p>安装共有3大步，分别是：</p><ul><li>安装Intel(R) SGX Driver</li><li>安装Intel(R) SGX SDK</li><li>安装Intel(R) SGX PSW</li></ul><h3 id="安装Intel-R-SGX-Driver"><a href="#安装Intel-R-SGX-Driver" class="headerlink" title="安装Intel(R) SGX Driver"></a>安装Intel(R) SGX Driver</h3><p>安装一些工具</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get install make<br></code></pre></td></tr></table></figure><p>检查系统内核头文件是否与现有内核匹配：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">dpkg-query -s linux-headers-$(uname -r)<br></code></pre></td></tr></table></figure><p>如果看到<code>Status: install ok installed</code>说明没有问题</p><p>否则要安装匹配的内核头文件：<code>sudo apt-get install linux-headers-$(uname -r)</code></p><p>克隆仓库：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git clone https://github.com/intel/linux-sgx-driver.git<br></code></pre></td></tr></table></figure><p>编译Intel(R) SGX Driver</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd linux-sgx-driver &amp;&amp; make<br></code></pre></td></tr></table></figure><p>编译完后，依次执行如下命令进行安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo mkdir -p &quot;/lib/modules/&quot;`uname -r`&quot;/kernel/drivers/intel/sgx&quot;    <br>sudo cp isgx.ko &quot;/lib/modules/&quot;`uname -r`&quot;/kernel/drivers/intel/sgx&quot;    <br>sudo sh -c &quot;cat /etc/modules | grep -Fxq isgx || echo isgx &gt;&gt; /etc/modules&quot;    <br>sudo /sbin/depmod<br>sudo /sbin/modprobe isgx<br></code></pre></td></tr></table></figure><p>至此Intel(R) SGX Driver安装完成。</p><h3 id="安装Intel-R-SGX-SDK"><a href="#安装Intel-R-SGX-SDK" class="headerlink" title="安装Intel(R) SGX SDK"></a>安装Intel(R) SGX SDK</h3><p>安装一些工具</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get install build-essential python ocaml ocamlbuild automake autoconf libtool wget python libssl-dev git cmake perl libcurl4-openssl-dev protobuf-compiler libprotobuf-dev debhelper reprepro unzip<br></code></pre></td></tr></table></figure><p>克隆仓库：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git clone https://github.com/intel/linux-sgx.git<br></code></pre></td></tr></table></figure><h4 id="预编译"><a href="#预编译" class="headerlink" title="预编译"></a>预编译</h4><p>此步会克隆几个GitHub，请走代理：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd linux-sgx &amp;&amp; make preparation<br></code></pre></td></tr></table></figure><p>将预编译出的文件拷贝至系统路径下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo cp ~/linux-sgx/external/toolset/ubuntu18.04/* /usr/local/bin<br></code></pre></td></tr></table></figure><p>执行如下命令检查是否拷贝成功，如果成功会输出路径：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">which ar as ld objcopy objdump ranlib<br></code></pre></td></tr></table></figure><h4 id="编译Intel-R-SGX-SDK"><a href="#编译Intel-R-SGX-SDK" class="headerlink" title="编译Intel(R) SGX SDK"></a>编译Intel(R) SGX SDK</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">make sdk<br></code></pre></td></tr></table></figure><p>此步会输出大约五万行内容，请耐心等待。</p><p>最后没有报错，说明编译成功。</p><h4 id="编译Intel-R-SGX-SDK安装器"><a href="#编译Intel-R-SGX-SDK安装器" class="headerlink" title="编译Intel(R) SGX SDK安装器"></a>编译Intel(R) SGX SDK安装器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">make sdk_install_pkg<br></code></pre></td></tr></table></figure><p>此步会输出大约五万行内容，请耐心等待。</p><p>编译完成后会输出<code>Generated sdk installer: ./linux/installer/bin/sgx_linux_x64_sdk_xxx.bin</code>。</p><h4 id="安装Intel-R-SGX-SDK-1"><a href="#安装Intel-R-SGX-SDK-1" class="headerlink" title="安装Intel(R) SGX SDK"></a>安装Intel(R) SGX SDK</h4><p>首先我们先创建一个目录，作为SDK的安装目录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mkdir -p ~/linux-sgx-install-path<br></code></pre></td></tr></table></figure><p>此步xxx要改为编译Intel(R) SGX SDK安装器最后的输出，在目录<code>linux-sgx/linux/installer/bin</code>下可以看到此文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd linux/installer/bin &amp;&amp; ./sgx_linux_x64_sdk_xxx.bin --prefix ~/linux-sgx-install-path<br></code></pre></td></tr></table></figure><p>根据安装最后的提示输出刷新环境变量</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">source ~/linux-sgx-install-path/sgxsdk/environment<br></code></pre></td></tr></table></figure><p>SDK安装完成。</p><p>此时进入<code>linux-sgx-install-path/SampleCode</code>下尝试样例代码是不会成功的，需要安装PSW之后才可运行样例。</p><h3 id="安装Intel-R-SGX-PSW"><a href="#安装Intel-R-SGX-PSW" class="headerlink" title="安装Intel(R) SGX PSW"></a>安装Intel(R) SGX PSW</h3><h4 id="编译Intel-R-SGX-PSW"><a href="#编译Intel-R-SGX-PSW" class="headerlink" title="编译Intel(R) SGX PSW"></a>编译Intel(R) SGX PSW</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd ~/linux-sgx &amp;&amp; make psw<br></code></pre></td></tr></table></figure><p>此步会输出大约一千行内容，请耐心等待。</p><h4 id="编译Intel-R-SGX-SDK安装器-1"><a href="#编译Intel-R-SGX-SDK安装器-1" class="headerlink" title="编译Intel(R) SGX SDK安装器"></a>编译Intel(R) SGX SDK安装器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd ~/linux-sgx &amp;&amp; make deb_psw_pkg<br></code></pre></td></tr></table></figure><p>此步会输出大约八千行内容，请耐心等待。</p><h4 id="添加本地软件源"><a href="#添加本地软件源" class="headerlink" title="添加本地软件源"></a>添加本地软件源</h4><p>需要将本地路径追加到软件源文件中，使用<code>sudo vi /etc/apt/sources.list</code>编辑文件，将下面内容添加到文件末尾，注意：你需要把PATH_TO_LOCAL_REPO替换成<code>~/linux-sgx/linux/installer/deb/sgx_debian_local_repo</code>的绝对路径：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">deb [trusted=yes arch=amd64] file:/PATH_TO_LOCAL_REPO bionic main<br></code></pre></td></tr></table></figure><p>添加完之后，刷新软件源</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get update<br></code></pre></td></tr></table></figure><h4 id="安装Intel-R-SGX-PSW-1"><a href="#安装Intel-R-SGX-PSW-1" class="headerlink" title="安装Intel(R) SGX PSW"></a>安装Intel(R) SGX PSW</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get install libsgx-launch libsgx-urts libsgx-epid libsgx-quote-ex libsgx-dcap-ql<br></code></pre></td></tr></table></figure><p>如果现在去测试样例，会报错<code>failed to load enclave</code>，Intel给出<a href="https://www.intel.com/content/www/us/en/support/articles/000057836/software/intel-security-products.html">解决方案</a>，要启动aesmd服务。</p><h3 id="启动aesmd服务"><a href="#启动aesmd服务" class="headerlink" title="启动aesmd服务"></a>启动aesmd服务</h3><p>启动</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo systemctl start aesmd<br></code></pre></td></tr></table></figure><p>查看aesmd服务启动状态</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cat /var/log/syslog | grep -i aesm<br></code></pre></td></tr></table></figure><p>设置aesmd服务开机启动</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo systemctl enable aesmd<br></code></pre></td></tr></table></figure><h2 id="安装测试"><a href="#安装测试" class="headerlink" title="安装测试"></a>安装测试</h2><p>我们使用SDK给出的样例代码<code>LocalAttestation</code>对安装情况进行测试</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd ~/linux-sgx-install-path/sgxsdk/SampleCode/LocalAttestation <br></code></pre></td></tr></table></figure><p>编译样例代码</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">make<br></code></pre></td></tr></table></figure><p>执行样例</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">./bin/app<br></code></pre></td></tr></table></figure><p>如果看到如下输出，说明安装成功</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">succeed to load enclaves.<br>succeed to establish secure channel.<br>Succeed to exchange secure message...<br>Succeed to close Session...<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> sgx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境配置 </tag>
            
            <tag> linux操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库笔记</title>
      <link href="/2022/10/03/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0/"/>
      <url>/2022/10/03/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="数据库的安装和使用"><a href="#数据库的安装和使用" class="headerlink" title="数据库的安装和使用"></a>数据库的安装和使用</h2><h3 id="安装教程"><a href="#安装教程" class="headerlink" title="安装教程"></a>安装教程</h3><ul><li><a href="https://zhuanlan.zhihu.com/p/37152572">知乎教程</a></li></ul><h3 id="使用教程"><a href="#使用教程" class="headerlink" title="使用教程"></a>使用教程</h3><ul><li><a href="https://www.bilibili.com/video/BV1Kr4y1i7ru?p=4&amp;spm_id_from=pageDriver">mysql软件的使用</a></li></ul><h2 id="数据库基本语法"><a href="#数据库基本语法" class="headerlink" title="数据库基本语法"></a>数据库基本语法</h2><h3 id="数据库层次结构"><a href="#数据库层次结构" class="headerlink" title="数据库层次结构"></a>数据库层次结构</h3><img src="/2022/10/03/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0/1.png" class="" title="数据库层次结构"><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">mysql -u root -p<br></code></pre></td></tr></table></figure><h3 id="数据库的创建"><a href="#数据库的创建" class="headerlink" title="数据库的创建"></a>数据库的创建</h3><p>创建基本的一个学生-课程数据库</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">CREAT DATABASE student_course<span class="hljs-comment">;</span><br>USE student_course<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><h3 id="表操作"><a href="#表操作" class="headerlink" title="表操作"></a>表操作</h3><h4 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h4><p><strong>数值类型</strong></p><div class="table-container"><table><thead><tr><th>TINYINT</th><th>1 Bytes</th><th>(-128，127)</th><th>(0，255)</th><th>小整数值</th></tr></thead><tbody><tr><td>SMALLINT</td><td>2 Bytes</td><td>(-32 768，32 767)</td><td>(0，65 535)</td><td>大整数值</td></tr><tr><td>MEDIUMINT</td><td>3 Bytes</td><td>(-8 388 608，8 388 607)</td><td>(0，16 777 215)</td><td>大整数值</td></tr><tr><td>INT或INTEGER</td><td>4 Bytes</td><td>(-2 147 483 648，2 147 483 647)</td><td>(0，4 294 967 295)</td><td>大整数值</td></tr><tr><td>BIGINT</td><td>8 Bytes</td><td>(-9,223,372,036,854,775,808，9 223 372 036 854 775 807)</td><td>(0，18 446 744 073 709 551 615)</td><td>极大整数值</td></tr><tr><td>FLOAT</td><td>4 Bytes</td><td>(-3.402 823 466 E+38，-1.175 494 351 E-38)，0，(1.175 494 351 E-38，3.402 823 466 351 E+38)</td><td>0，(1.175 494 351 E-38，3.402 823 466 E+38)</td><td>单精度 浮点数值</td></tr><tr><td>DOUBLE</td><td>8 Bytes</td><td>(-1.797 693 134 862 315 7 E+308，-2.225 073 858 507 201 4 E-308)，0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)</td><td>0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)</td><td>双精度 浮点数值</td></tr><tr><td>DECIMAL</td><td>对DECIMAL(M,D) ，如果M&gt;D，为M+2否则为D+2</td><td>依赖于M和D的值</td><td>依赖于M和D的值</td><td>小数值</td></tr></tbody></table></div><p><strong>日期和时间类型</strong></p><p>表示时间值的日期和时间类型为DATETIME、DATE、TIMESTAMP、TIME和YEAR。</p><p>每个时间类型有一个有效值范围和一个”零”值，当指定不合法的MySQL不能表示的值时使用”零”值。</p><p>TIMESTAMP类型有专有的自动更新特性，将在后面描述。</p><div class="table-container"><table><thead><tr><th style="text-align:left">类型</th><th style="text-align:left">大小 ( bytes)</th><th style="text-align:left">范围</th><th style="text-align:left">格式</th><th style="text-align:left">用途</th></tr></thead><tbody><tr><td style="text-align:left">DATE</td><td style="text-align:left">3</td><td style="text-align:left">1000-01-01/9999-12-31</td><td style="text-align:left">YYYY-MM-DD</td><td style="text-align:left">日期值</td></tr><tr><td style="text-align:left">TIME</td><td style="text-align:left">3</td><td style="text-align:left">‘-838:59:59’/‘838:59:59’</td><td style="text-align:left">HH:MM:SS</td><td style="text-align:left">时间值或持续时间</td></tr><tr><td style="text-align:left">YEAR</td><td style="text-align:left">1</td><td style="text-align:left">1901/2155</td><td style="text-align:left">YYYY</td><td style="text-align:left">年份值</td></tr><tr><td style="text-align:left">DATETIME</td><td style="text-align:left">8</td><td style="text-align:left">1000-01-01 00:00:00/9999-12-31 23:59:59</td><td style="text-align:left">YYYY-MM-DD HH:MM:SS</td><td style="text-align:left">混合日期和时间值</td></tr><tr><td style="text-align:left">TIMESTAMP</td><td style="text-align:left">4</td><td style="text-align:left">1970-01-01 00:00:00/2038结束时间是第 <strong>2147483647</strong> 秒，北京时间 <strong>2038-1-19 11:14:07</strong>，格林尼治时间 2038年1月19日 凌晨 03:14:07</td><td style="text-align:left">YYYYMMDD HHMMSS</td><td style="text-align:left">混合日期和时间值，时间戳</td></tr></tbody></table></div><p><strong>字符串类型</strong></p><p>字符串类型指CHAR、VARCHAR、BINARY、VARBINARY、BLOB、TEXT、ENUM和SET。该节描述了这些类型如何工作以及如何在查询中使用这些类型。</p><div class="table-container"><table><thead><tr><th style="text-align:left">类型</th><th style="text-align:left">大小</th><th style="text-align:left">用途</th></tr></thead><tbody><tr><td style="text-align:left">CHAR</td><td style="text-align:left">0-255 bytes</td><td style="text-align:left">定长字符串</td></tr><tr><td style="text-align:left">VARCHAR</td><td style="text-align:left">0-65535 bytes</td><td style="text-align:left">变长字符串</td></tr><tr><td style="text-align:left">TINYBLOB</td><td style="text-align:left">0-255 bytes</td><td style="text-align:left">不超过 255 个字符的二进制字符串</td></tr><tr><td style="text-align:left">TINYTEXT</td><td style="text-align:left">0-255 bytes</td><td style="text-align:left">短文本字符串</td></tr><tr><td style="text-align:left">BLOB</td><td style="text-align:left">0-65 535 bytes</td><td style="text-align:left">二进制形式的长文本数据</td></tr><tr><td style="text-align:left">TEXT</td><td style="text-align:left">0-65 535 bytes</td><td style="text-align:left">长文本数据</td></tr><tr><td style="text-align:left">MEDIUMBLOB</td><td style="text-align:left">0-16 777 215 bytes</td><td style="text-align:left">二进制形式的中等长度文本数据</td></tr><tr><td style="text-align:left">MEDIUMTEXT</td><td style="text-align:left">0-16 777 215 bytes</td><td style="text-align:left">中等长度文本数据</td></tr><tr><td style="text-align:left">LONGBLOB</td><td style="text-align:left">0-4 294 967 295 bytes</td><td style="text-align:left">二进制形式的极大文本数据</td></tr><tr><td style="text-align:left">LONGTEXT</td><td style="text-align:left">0-4 294 967 295 bytes</td><td style="text-align:left">极大文本数据</td></tr></tbody></table></div><p> <strong>注意</strong>：char(n) 和 varchar(n) 中括号中 n 代表字符的个数，并不代表字节个数，比如 CHAR(30) 就可以存储 30 个字符。</p><p>CHAR 和 VARCHAR 类型类似，但它们保存和检索的方式不同。它们的最大长度和是否尾部空格被保留等方面也不同。在存储或检索过程中不进行大小写转换。</p><p>BINARY 和 VARBINARY 类似于 CHAR 和 VARCHAR，不同的是它们包含二进制字符串而不要非二进制字符串。也就是说，它们包含字节字符串而不是字符字符串。这说明它们没有字符集，并且排序和比较基于列值字节的数值值。</p><p>BLOB 是一个二进制大对象，可以容纳可变数量的数据。有 4 种 BLOB 类型：TINYBLOB、BLOB、MEDIUMBLOB 和 LONGBLOB。它们区别在于可容纳存储范围不同。</p><p>有 4 种 TEXT 类型：TINYTEXT、TEXT、MEDIUMTEXT 和 LONGTEXT。对应的这 4 种 BLOB 类型，可存储的最大长度不同，可根据实际情况选择。</p><h4 id="创建一个表和删除一个表"><a href="#创建一个表和删除一个表" class="headerlink" title="创建一个表和删除一个表"></a>创建一个表和删除一个表</h4><p>创建</p><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs erb"><span class="language-xml">mysql&gt; CREATE TABLE student</span><br><span class="language-xml">    -&gt; (Sno CHAR(9) PRIMARY KEY,</span><br><span class="language-xml">    -&gt; Sname CHAR(20) UNIQUE,</span><br><span class="language-xml">    -&gt; Ssex CHAR(2),</span><br><span class="language-xml">    -&gt; Sage SMALLINT,</span><br><span class="language-xml">    -&gt; Sdept CHAR(20)</span><br><span class="language-xml">    -&gt; );</span><br></code></pre></td></tr></table></figure><p>删除</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">DROP TABLE student;<br></code></pre></td></tr></table></figure><p>修改表名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">ALTER TABLE student RENAME stu;<br></code></pre></td></tr></table></figure><p>修改列名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">ALTER TABLE SC<br>CHANGE Crade Grade SMALLINT;<br></code></pre></td></tr></table></figure><h4 id="表——增删改查"><a href="#表——增删改查" class="headerlink" title="表——增删改查"></a>表——增删改查</h4><h5 id="增"><a href="#增" class="headerlink" title="增"></a>增</h5><p>可以用两种方式编写INSERT INTO语句。</p><p>第一种方法指定列名和要插入的值：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">INSERT INTO table_name (column1, column2, column3, ...)<br>VALUES (value1, value2, value3, ...); <br></code></pre></td></tr></table></figure><p>如果要为表的所有列添加值，则无需在SQL查询中指定列名。但是，请确保值的顺序与表中的列的顺序相同。INSERT INTO语法如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">INSERT INTO table_name<br>VALUES (value1, value2, value3, ...); <br></code></pre></td></tr></table></figure><p>代码举例(一定注意：字符型数据需要加引号)：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs mysql">INSERT INTO student (Sno,Sname,Ssex,Sage,Sdept)     values     (&quot;201215121&quot;,&quot;李勇&quot;,&quot;男&quot;,20,&quot;CS&quot;);<br>INSERT INTO student (Sno,Sname,Ssex,Sage,Sdept)     values     (&quot;201215122&quot;,&quot;刘晨&quot;,&quot;女&quot;,19,&quot;CS&quot;);<br>INSERT INTO student (Sno,Sname,Ssex,Sage,Sdept)     values     (&quot;201215123&quot;,&quot;王敏&quot;,&quot;女&quot;,18,&quot;MA&quot;);<br>INSERT INTO student (Sno,Sname,Ssex,Sage,Sdept)     values     (&quot;201215125&quot;,&quot;张立&quot;,&quot;男&quot;,19,&quot;IS&quot;);<br>INSERT INTO SC      values     (&quot;201215121&quot;,&quot;1&quot;,92);<br>INSERT INTO SC      values     (&quot;201215121&quot;,&quot;2&quot;,85);<br>INSERT INTO SC      values     (&quot;201215121&quot;,&quot;3&quot;,88);<br>INSERT INTO SC      values     (&quot;201215122&quot;,&quot;2&quot;,90);<br>INSERT INTO SC      values     (&quot;201215122&quot;,&quot;3&quot;,80);<br>INSERT INTO course      values     (&quot;1&quot;,&quot;数据库&quot;,&quot;5&quot;,4);<br>INSERT INTO course      values     (&quot;2&quot;,&quot;数学&quot;,&quot;NULL&quot;,2);<br>INSERT INTO course      values     (&quot;3&quot;,&quot;信息系统&quot;,&quot;1&quot;,4);<br>INSERT INTO course      values     (&quot;4&quot;,&quot;操作系统&quot;,&quot;6&quot;,3);<br>INSERT INTO course      values     (&quot;5&quot;,&quot;数据结构&quot;,&quot;7&quot;,4);<br></code></pre></td></tr></table></figure><p>最后得到如下几个表：</p><div align = center>student</div><div class="table-container"><table><thead><tr><th style="text-align:center">Sno</th><th style="text-align:center">Sname</th><th style="text-align:center">Ssex</th><th style="text-align:center">Sage</th><th style="text-align:center">Sdept</th></tr></thead><tbody><tr><td style="text-align:center">201215121</td><td style="text-align:center">李勇</td><td style="text-align:center">男</td><td style="text-align:center">20</td><td style="text-align:center">CS</td></tr><tr><td style="text-align:center">201215122</td><td style="text-align:center">刘晨</td><td style="text-align:center">女</td><td style="text-align:center">19</td><td style="text-align:center">CS</td></tr><tr><td style="text-align:center">201215123</td><td style="text-align:center">王敏</td><td style="text-align:center">女</td><td style="text-align:center">18</td><td style="text-align:center">MA</td></tr><tr><td style="text-align:center">201215125</td><td style="text-align:center">张立</td><td style="text-align:center">男</td><td style="text-align:center">19</td><td style="text-align:center">IS</td></tr></tbody></table></div><div align = center>course</div><div class="table-container"><table><thead><tr><th style="text-align:center">Cno</th><th style="text-align:center">Cname</th><th style="text-align:center">Cpno</th><th style="text-align:center">Ccredit</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">数据库</td><td style="text-align:center">5</td><td style="text-align:center">4</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">数学</td><td style="text-align:center">NULL</td><td style="text-align:center">2</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">信息系统</td><td style="text-align:center">1</td><td style="text-align:center">4</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">操作系统</td><td style="text-align:center">6</td><td style="text-align:center">3</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">数据结构</td><td style="text-align:center">7</td><td style="text-align:center">4</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th style="text-align:center">Sno</th><th style="text-align:center">Cno</th><th style="text-align:center">Grade</th></tr></thead><tbody><tr><td style="text-align:center">201215121</td><td style="text-align:center">1</td><td style="text-align:center">92</td></tr><tr><td style="text-align:center">201215121</td><td style="text-align:center">2</td><td style="text-align:center">85</td></tr><tr><td style="text-align:center">201215121</td><td style="text-align:center">3</td><td style="text-align:center">88</td></tr><tr><td style="text-align:center">201215122</td><td style="text-align:center">2</td><td style="text-align:center">90</td></tr><tr><td style="text-align:center">201215122</td><td style="text-align:center">3</td><td style="text-align:center">80</td></tr></tbody></table></div><p>还有一种插入方式，需要学习select语句，直接把语句放到下面</p><p>对于每一个系，求学生的平均年龄，并把结果放到数据库里</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create table Dept_age<br>(<br>sdept char(15)<br>avg_age smallint<br>);<br>insert <br>into dept_age(sdept,avg_age)<br>select sdept , avg(sage)<br>from student <br>group by sdept;<br></code></pre></td></tr></table></figure><h5 id="删"><a href="#删" class="headerlink" title="删"></a>删</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">DELETE FROM course WHERE Cno = 22;<br></code></pre></td></tr></table></figure><p>这里的where子句可以配合一些列其他句子使用，如exists,in等等</p><h5 id="改"><a href="#改" class="headerlink" title="改"></a>改</h5><p>让我们先想想有什么需要修改？</p><p>对于列来说：</p><ul><li>增加新的一列</li></ul><p>增加入学时间</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">ALTER TABLE Student ADD S_entrance DATE;<br></code></pre></td></tr></table></figure><ul><li>修改原有列的数据类型(使用MODIFY或者CHANGE)或者增加约束条件</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">ALTER TABLE Student MODIFY S_entrance INT;<br>ALTER TABLE Student ADD  UNIQUE(S_entrance);<br></code></pre></td></tr></table></figure><ul><li>删除列和<a href="[mysql 删除约束_MySQL中的约束,添加约束,删除约束,以及其他修饰_衣锦夜行的李公子的博客-CSDN博客](https://blog.csdn.net/weixin_35731579/article/details/113116120">删除约束条件</a>)</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">ALTER TABLE Student DROP INDEX S_entrance;<br>ALTER TABLE Student DROP COLUMN S_entrance;<br></code></pre></td></tr></table></figure><p>对于行来说：</p><ul><li>修改一行中已有的数据(使用SET语句)</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">UPDATE course SET Cno = &#x27;100&#x27; where Cno = &#x27;1&#x27;;<br>SELECT * from course;<br></code></pre></td></tr></table></figure><p>这里的where子句可以配合一些列其他句子使用，如exists,in等等</p><h5 id="查"><a href="#查" class="headerlink" title="查"></a>查</h5><p>使用where子句和列名可以实现查找(查找是一个大块，内容很复杂，后面再介绍)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT Sno,Ssex from student;<br>SELECT Sno 学号,Ssex 性别 from student;<br></code></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>学号</th><th>性别</th></tr></thead><tbody><tr><td>201215122</td><td>女</td></tr><tr><td>201215123</td><td>女</td></tr><tr><td>201215125</td><td>男</td></tr></tbody></table></div><p>如果这样查输出奇怪的东西（sql注入可能用到）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT 1,2,3 from student;<br></code></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>1</th><th>2</th><th>3</th></tr></thead><tbody><tr><td>1</td><td>2</td><td>3</td></tr><tr><td>1</td><td>2</td><td>3</td></tr><tr><td>1</td><td>2</td><td>3</td></tr></tbody></table></div><h4 id="索引的创建"><a href="#索引的创建" class="headerlink" title="索引的创建"></a>索引的创建</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">use student_course;<br>CREATE UNIQUE INDEX stusno ON student(Sno);<br></code></pre></td></tr></table></figure><h3 id="数据查询-cry"><a href="#数据查询-cry" class="headerlink" title="数据查询:cry:"></a>数据查询:cry:</h3><h4 id="单表查询"><a href="#单表查询" class="headerlink" title="单表查询"></a>单表查询</h4><p><span id = "jump4"><strong>例1：</strong>查询全体学生的姓名、出生年份和所在院系，要求用小写字母表示系名</span></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT Sname NAME,&quot;Year of Birth:&quot; , 2022 - Sage BIRTHDAY ,  LOWER(Sdept) FROM student;<br></code></pre></td></tr></table></figure><p>可以看到这里的可以制定别名，同时想要查找的列可以用一个表达式表示 2022 - Sage</p><p><strong>例2：</strong>查询选修了课程的学生学号（去掉重复项）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT DISTINCT Sno FROM SC;<br></code></pre></td></tr></table></figure><p>使用distinct子句来保证结果唯一</p><p><strong>例3：</strong>查询计算机系的全体学生</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT DISTINCT Sname FROM  student<br>WHERE Sdept = &#x27;CS&#x27;;<br></code></pre></td></tr></table></figure><p>这里使用了where子句，这是一个很强大的功能：</p><div align = "center">WHERE子句常用查询条件表</div><div class="table-container"><table><thead><tr><th style="text-align:center">查询条件</th><th style="text-align:center">谓词</th></tr></thead><tbody><tr><td style="text-align:center">比较</td><td style="text-align:center">= , &gt; , &lt; , &gt;= , &lt;= , != , &lt;&gt; , !&gt; , !&lt; , ; NOT + 上述比较符</td></tr><tr><td style="text-align:center">确定范围</td><td style="text-align:center">BETWEEN AND , NOT BETWEEN AND</td></tr><tr><td style="text-align:center">确定集合</td><td style="text-align:center">IN , NOT ,IN</td></tr><tr><td style="text-align:center">字符匹配</td><td style="text-align:center">LIKE , NOT LIKE</td></tr><tr><td style="text-align:center">空值</td><td style="text-align:center">IS NULL , IS NOT NULL</td></tr><tr><td style="text-align:center">多重条件（逻辑运算）</td><td style="text-align:center">AND , OR , NOT</td></tr></tbody></table></div><p><strong>例4：</strong>查询计算机系(CS)和数学(MA)系中年龄在19~20之间的学生姓名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Mysql">SELECT Sname FROM student <br>where Sdept IN (&#x27;CS&#x27;,&#x27;MA&#x27;) AND Sage BETWEEN 19 AND 20;<br></code></pre></td></tr></table></figure><p>这里between and也可以用=<20 AND >=19代替</p><p><strong>例5：</strong>查询名字中课程名中含有下划线的课程</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Mysql">INSERT INTO course      values     (&quot;9&quot;,&quot;DB_course&quot;,&quot;7&quot;,4);<br>select * from course<br>where Cname LIKE &#x27;%\_%&#x27; ;<br></code></pre></td></tr></table></figure><p>这里使用了LIKE进行字符匹配：</p><ul><li>%（百分号）代表任意长度（可以为0）的字符串</li><li>_(下划线)代表任意单个字符</li></ul><font color = red> 注意：字符集为ASCII时，一个汉字需要两个\_；当字符集为GBK时只需要一个\_</font><p><strong>例6：</strong>查询全体学生情况，查询结果按照系号升序，同一系中的学生按照年龄降序</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Mysql">SELECT * FROM student<br>ORDER BY Sdept , Sage DESC;<br></code></pre></td></tr></table></figure><p>用DESC来进行降序</p><p><strong>例7：</strong>查询选修了课程的学生人数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Mysql">SELECT COUNT(DISTINCT Sno)<br>FROM SC;<br></code></pre></td></tr></table></figure><p>返回一个表只有一个值：</p><div class="table-container"><table><thead><tr><th style="text-align:center">COUNT(DISTINCT Sno)</th></tr></thead><tbody><tr><td style="text-align:center">2</td></tr></tbody></table></div><p>注意这里必须使用distinct语句，默认是all即全部行都要统计</p><p><strong>例8：</strong>查询各个课程号及相应的选课人数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Mysql">SELECT Cno , COUNT(Sno)<br>FROM SC<br>GROUP BY Cno;<br></code></pre></td></tr></table></figure><p>GROUP把课程号相同的学生分到一组，然后COUNT函数统计每一组的Sno结果，输出如下结果：</p><div class="table-container"><table><thead><tr><th style="text-align:center">Cno</th><th style="text-align:center">COUNT(Sno)</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">2</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">2</td></tr></tbody></table></div><p>如果GROUP不配合COUNT,AVG（这些函数对于一个表只返回一个值）使用，那么返回这样的结果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Mysql">SELECT *<br>FROM SC<br>GROUP BY Cno;<br></code></pre></td></tr></table></figure><p>输出的结果只有不同Cno的第一个行</p><div class="table-container"><table><thead><tr><th style="text-align:center">Sno</th><th style="text-align:center">Cno</th><th style="text-align:center">Grade</th></tr></thead><tbody><tr><td style="text-align:center">201215121</td><td style="text-align:center">1</td><td style="text-align:center">92</td></tr><tr><td style="text-align:center">201215121</td><td style="text-align:center">2</td><td style="text-align:center">85</td></tr><tr><td style="text-align:center">201215121</td><td style="text-align:center">3</td><td style="text-align:center">88</td></tr></tbody></table></div><p><strong>例9：</strong>查询选修了三门及以上课程的学生学号</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Mysql">SELECT Sno ,count(Cno) from sc<br>group by Sno<br>having count(Cno)&gt;=3;<br></code></pre></td></tr></table></figure><p>注意这里不能用where子句，where子句作用于基本表或者视图；</p><p>而having短语作用于组，从中选择满足条件的组；</p><h4 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h4><h5 id="等值连接与非等值连接"><a href="#等值连接与非等值连接" class="headerlink" title="等值连接与非等值连接"></a><span id = "jump1">等值连接与非等值连接</span></h5><p><strong>例1：</strong>查询每个学生及其选修课程的情况</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Mysql">SELECT student.* , sc.* <br>FROM student,sc<br>where student.sno = sc.sno;<br></code></pre></td></tr></table></figure><p>这里是一个等值连接，如果建立了索引这里的速度会更快</p><p><strong>例2：</strong>查询选修了2号课程且成绩在90分及以上的所有学生的学号和姓名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs Mysql">select student.Sno ,student.sname <br>from student , sc<br>where student.Sno = sc.sno <br>and sc.cno = &#x27;2&#x27;<br>and sc.grade&gt;=90;<br></code></pre></td></tr></table></figure><p>为什么要用student.sno而不是直接用sno，因为SELECT student.<em> , sc.</em> 返回的值是两个表的笛卡尔积，包括两个sno分别是student.sno和sc.sno，这里只需要提取student.sno</p><h5 id="自身连接"><a href="#自身连接" class="headerlink" title="自身连接"></a>自身连接</h5><p><strong>例1：</strong>查询每一门课的间接先修课(先修课的先修课)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select a.cno 课程号, b.cpno 该课程先修课的先修课<br>from course a,course b<br>where a.cpno = b.cno;<br></code></pre></td></tr></table></figure><h5 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h5><p><strong>例1：</strong>查询每个学生及其选修课程的情况</p><p>类比<a href="#jump1">2.5.2.1</a>中,会发现返回的结果里面没有学号为201215123的同学，因为他们被开除了没有选课，但是我们又希望显示他们的选课结果，用NULL表示，这里就需要用到外连接，而且是左外连接</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select * <br>from student left outer join sc on (student.sno = sc.sno);<br></code></pre></td></tr></table></figure><p>这样就能显示啦！:happy:</p><ul><li>左外连接列出左边关系中的所有元组</li><li>右外连接列出右边关系中的所有元组</li></ul><h5 id="多表连接"><a href="#多表连接" class="headerlink" title="多表连接"></a>多表连接</h5><p><strong>例1：</strong>查询每个学生的学号，姓名，选修的课程名及名称</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select student.sno , student.sname , course.cname<br>from student , sc, course<br>where student.sno = sc.sno<br>and sc.cno = course.cno;<br></code></pre></td></tr></table></figure><p>这样还是显示不了没选课的人，需要用到外连接才能实现，我们暂时先不讨论</p><h4 id="嵌套查询"><a href="#嵌套查询" class="headerlink" title="嵌套查询"></a>嵌套查询</h4><p>sql语句中，一个SELECT-FROM-WHERE语句为一个<code>查询块</code>。将一个查询块嵌入到另一个查询块的where子句中或者having短语中的查询成为嵌套</p><h5 id="带有IN谓词子查询"><a href="#带有IN谓词子查询" class="headerlink" title="带有IN谓词子查询"></a>带有IN谓词子查询</h5><p><strong>例1：</strong>查询与“刘晨”在同一个系学习的学生的名字</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select sname<br>from student<br>where sdept in<br>(select sdept <br>from student <br>where sname = &quot;刘晨&quot;);<br></code></pre></td></tr></table></figure><p><strong>例2：</strong>查询选修了课程名为“信息系统”的学生学号和姓名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select sname <br>from student<br>where sno in<br>(<br>select sno<br>from sc<br>where cno in<br>(<br>select cno <br>from course<br>where cname = &quot;信息系统&quot;<br>)<br>    );<br></code></pre></td></tr></table></figure><h5 id="带有比较运算符的子查询"><a href="#带有比较运算符的子查询" class="headerlink" title="带有比较运算符的子查询"></a>带有比较运算符的子查询</h5><p>父子查询之间用比较运算符连接</p><p><span id = "jump3"><strong>例1：</strong>找出每个学生超过他自己选修课程平均成绩的课程号 </span></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select cno<br>from sc x<br>where grade &gt;<br>(<br>    select avg(grade)<br>    from sc y<br>where y.sno = x.sno<br>);<br></code></pre></td></tr></table></figure><p>可能有点难理解，我们把语句的底层实现过程拆分成下面三个步骤：</p><blockquote><p>1.从外层查询中取出sc的一个元组x，将元组x的Sno值(201215121)传给内层查询</p><p>select avg(grade)</p><p>from sc y</p><p>where y.sno = ‘201215121’;</p><p>2.执行内层查询，得到88(近似值)，用该值代替内层查询，得到外层查询</p><p>3.遍历所有元组，把重复的值去掉</p></blockquote><p>需要注意，这里的子查询为<font color = red><code >相关子查询</code></font>，和之前的例子不一样，内层查询和外层是相关的，所以在实现上内层查询不是一次返回多个值，而是返回一个值（88），这一个值只对应sc的第一行，第二行依旧按照如此进行查询。</p><h5 id="带有ANY-SOME-或者ALL谓词的子查询"><a href="#带有ANY-SOME-或者ALL谓词的子查询" class="headerlink" title="带有ANY(SOME)或者ALL谓词的子查询"></a>带有ANY(SOME)或者ALL谓词的子查询</h5><p>望文生义，如果内层查询返回一组数，那么使用any或者all来修饰，同时配合运算比较符号来查询，例如</p><p>>any 表示大于子查询结果中的某个值</p><p><strong>例1：</strong>查询非计算机科学系中比计算机系<font color = red>任意</font>一个学生年龄小的学生姓名和年龄</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select sname,sage<br>from student <br>where sdept != &quot;CS&quot;<br>and sage&lt;any<br>(<br>select sage <br>from student<br>where sdept = &quot;CS&quot;<br>);<br></code></pre></td></tr></table></figure><p><strong>例2：</strong>查询非计算机科学系中比计算机系<font color = red>所有</font>一个学生年龄小的学生姓名和年龄</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select sname,sage<br>from student <br>where sdept != &quot;CS&quot;<br>and sage&lt;all<br>(<br>select sage <br>from student<br>where sdept = &quot;CS&quot;<br>);<br></code></pre></td></tr></table></figure><h5 id="带有EXISTS谓词的子查询"><a href="#带有EXISTS谓词的子查询" class="headerlink" title="带有EXISTS谓词的子查询"></a>带有EXISTS谓词的子查询</h5><p>exists代表存在量词<script type="math/tex">\exists</script>。带有exists谓词的子查询不返回任何数据，只产生逻辑值true和false</p><p><strong>例1：</strong>查询选修了1号课程的学生姓名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select sname<br>from student<br>where exists<br>(<br>select *<br>    from sc<br>    where sc.sno = student.sno<br>    and sc.cno = &quot;1&quot;<br>);<br></code></pre></td></tr></table></figure><p>这也是一个相关子查询，第一次只传一个元组进入内层（这时学号为201215121），然后在sc表中找出学号为201215121的人选择的1号课程，返回如果有值，那么返回true，如果是空值，返回false。直至外层元组全部检索完。</p><p><a href="[MySQL中的EXISTS用法 - 知乎 (zhihu.com"><strong>EXISTS执行顺序</strong></a>](<a href="https://zhuanlan.zhihu.com/p/351922940">https://zhuanlan.zhihu.com/p/351922940</a>))</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT * FROM A WHERE EXISTS (SELECT 1 FROM B WHERE B.id = A.id); <br></code></pre></td></tr></table></figure><p>1、首先执行一次外部查询，并缓存结果集，如 SELECT * FROM A</p><p>2、遍历外部查询结果集的每一行记录R，代入子查询中作为条件进行查询，如 SELECT 1 FROM B WHERE B.id = A.id</p><p>3、如果子查询有返回结果，则EXISTS子句返回TRUE，这一行R可作为外部查询的结果行，否则不能作为结果</p><p><strong>例2</strong>：<span id = "jump2">查询选修了全部课程的学生姓名</span>&gt;</p><p>注意mysql里面没有全程量词<script type="math/tex">\forall</script>，但是可以用存在量词和非来等价替换</p><p>​                                                                      </p><script type="math/tex; mode=display">(\forall x)P\equiv \neg(\exists x (\neg P))</script><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select sname<br>from student<br>where not exists<br>/*遍历student的每一行，看是否这一行满足下面存在语句，如代入第一行的学生201215121*/<br>(/*查找学生201215121所有的没有选的课程，从course表中查找*/<br>select * <br>    from course<br>    where not exists <br>    /*遍历每一个课程，看这个课程是否没有被选，如代入第一行的课程“数据库”，其cno = 1*/<br>    (<br>        /*现在学生和课程名都确定了，在sc表中看这个课程学生选择了没有*/<br>select *<br>        from sc<br>        where student.sno = sc.sno/*这里的student.sno可以替换为201215121*/<br>        and course.cno = sc.cno/*这里的course.cno可以替换为1*/<br>    )<br>);<br></code></pre></td></tr></table></figure><p><strong>例3：</strong>查询至少选修了学生201215122选修的全部课程的学生号码</p><p>本查询可以用逻辑蕴涵来表达:对于学号为x的学生，对于所有的课程y，只要201215122学生选修了课程y，那么就有学生x选修了课程y</p><p>形式化如下：</p><p>用p表示谓词：学生201215122选修了课程y</p><p>用q表示谓词：学生x选修了课程y</p><p>则上述查询为 ：</p><script type="math/tex; mode=display">(\forall y)p \rightarrow q</script><p>SQL语言中没有蕴涵的逻辑运算，但是可以通过$\exists$和$\neg$来等价替换</p><script type="math/tex; mode=display">p \rightarrow q \equiv \neg p \vee q</script><p>加上前置的条件完成的转换为：</p><script type="math/tex; mode=display">(\forall y)p \rightarrow q \equiv \neg (\exists y)(\neg(\neg p \vee q)) \equiv  \neg (\exists y)(p \wedge \neg q)</script><p>表达的意思为：不存在这样的课程y，学生201215122选修了y，而学生x没有选</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select distinct sno<br>from sc scx<br>where not exists<br>/*遍历sc的每一个学生，如代入第一行的学生201215121*/<br>(<br>/*学生已经确定了，看是否存在这样的课程y，学生201215122选修了y，而学生x没有选*/<br>select * <br>from sc scy<br>where scy.sno = &quot;201215122&quot;<br>and not exists<br>/*遍历学生201215122的每一个课程，看是否还有学生x没有选的*/<br>(<br>/*学生确定了，课程确定了，看这个学生选了这个课程没有，用not exists实现，不能用!=*/<br>select *<br>from sc scz<br>where scz.sno = scx.sno<br>and scy.cno = scz.cno<br>)<br>);<br></code></pre></td></tr></table></figure><p>仿造<a href="#jump2"><strong>例2</strong></a>的另一种解法，</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select sno<br>from student <br>where not exists<br>(<br>select *<br>from sc<br>where sc.sno = &quot;201215122&quot;<br>and sc.cno not in <br>(<br>select cno<br>from sc<br>where sc.sno = student.sno<br>)<br>);<br></code></pre></td></tr></table></figure><h4 id="集合查询"><a href="#集合查询" class="headerlink" title="集合查询"></a>集合查询</h4><p>select语句的查询结果是元组的集合，所以多个select语句的结果可以进行结合操作。集合操作主要包括并操作union、交操作intersect和差操作except。</p><font color = red>注意：参加集合操作的各查询结果的列数必须相同；对应的数据类型也必须相同</font><p><strong>例1：</strong>查询计算机科学系的学生及年龄不大于19岁的学生</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select *<br>from student<br>where sdept = &#x27;CS&#x27;<br>union<br>select *<br>from student<br>where sage&lt;=19;<br></code></pre></td></tr></table></figure><p>实际上使用union将多个查询结果合并起来，系统会自动去掉重复的元组。如果要保留，使用union all操作符。</p><p><strong>例2：</strong>查询选修了课程1或者选修了课程2的学生的姓名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select sname<br>from student<br>where exists<br>(<br>select *<br>from sc<br>where student.sno = sc.sno<br>and sc.cno = &#x27;1&#x27;<br>union<br>select *<br>from sc<br>where student.sno = sc.sno<br>and sc.cno = &#x27;2&#x27;<br>);<br></code></pre></td></tr></table></figure><p>实际上这个union等价于下面的语句</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select sname<br>from student<br>where exists<br>(<br>select *<br>from sc<br>where student.sno = sc.sno<br>and (sc.cno = &#x27;1&#x27; or sc.cno = &#x27;2&#x27;)<br>);<br></code></pre></td></tr></table></figure><p><strong>例3：</strong>查询计算机科学系的学生与年龄不大于19岁的学生的交集</p><p>有些数据库语言是没有intersect交集的操作，可以使用in语句来等价替换，如下面的例子</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select *<br>from student<br>where sdept = &#x27;CS&#x27;<br>and sno in<br>(<br>select sno <br>from student<br>where sage &lt; 19<br>);<br></code></pre></td></tr></table></figure><p>解释一下这个语句：一个元组即满足属性sdept = ‘cs’又满足in中的条件，年龄不大于19</p><p>如果不能理解，还可以用and语句来实现</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select *<br>from student<br>where sdept = &#x27;CS&#x27;<br>and sage&lt;=19;<br></code></pre></td></tr></table></figure><p><strong>例4：</strong>查询计算机科学系的学生与年龄不大于19岁的学生的差集</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select *<br>from student<br>where sdept = &#x27;CS&#x27;<br>and sno not in<br>(<br>select sno <br>from student<br>where sage &lt; 19<br>);<br></code></pre></td></tr></table></figure><h4 id="基于派生词的查询"><a href="#基于派生词的查询" class="headerlink" title="基于派生词的查询"></a>基于派生词的查询</h4><p>子查询不仅可以出现在where子句中，<strong>还可以出现在from子句中</strong>，这是子查询生成的临时派生表成为主查询的查询对象。</p><p><strong>例1：</strong><a href="#jump3">找出每个学生超过他自己选修课程平均成绩的课程号</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select sno , cno<br>from sc , <br>(<br>select sno , avg(grade)<br>from sc <br>group by sno<br>) <br>as avg_sc(avg_sno , avg_grade)<br>where sc.grade&gt;avg_sc.avg_grade<br>and sc.sno = avg_sc.avg_sno;<br></code></pre></td></tr></table></figure><p>这种派生的方法实际上是把两个表连接了起来，如果原有的两个表的行列数分别为(m1,n1)和(m2,n2),则得到的规模为(m1*m2,n1+n2)</p><h4 id="select语句的一般格式"><a href="#select语句的一般格式" class="headerlink" title="select语句的一般格式"></a>select语句的一般格式</h4><p>select语句是mysql的核心语句，一般有如下格式：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select [all | distinct] &lt;目标列表达式&gt; [别名] , ……<br>from &lt;表名或者视图名&gt; [别名] , […… | (&lt;select派生&gt; [as] &lt;别名&gt;)<br>[where &lt;条件表达式&gt;]<br>[group by &lt;列名&gt; [having &lt;条件表达式&gt;]]<br>[order by &lt;&gt;列名 [ASC | DESC]]<br></code></pre></td></tr></table></figure><h5 id="目标列表达式的可选格式"><a href="#目标列表达式的可选格式" class="headerlink" title="目标列表达式的可选格式"></a>目标列表达式的可选格式</h5><ul><li>*</li><li>&lt;表名&gt;.*</li><li>count([distinct | all] *)</li><li>[&lt;表名&gt;.]&lt;属性列表达式&gt;</li></ul><p>其中属性列表达式可以由属性列、作用于属性列的聚集函数和常量的任意算数运算(+，-，*，/)组成的运算公式，<a href="#jump4">见例题</a></p><h5 id="聚集函数的一般形式"><a href="#聚集函数的一般形式" class="headerlink" title="聚集函数的一般形式"></a>聚集函数的一般形式</h5><script type="math/tex; mode=display">\begin{Bmatrix} count\\ sum\\ avg\\   max\\ min\end{Bmatrix} =({\,} [{\,}distinct {\,} | {\,} all{\,}] {\,}  *)</script><h5 id="where子句的条件表达式的可选格式"><a href="#where子句的条件表达式的可选格式" class="headerlink" title="where子句的条件表达式的可选格式"></a>where子句的条件表达式的可选格式</h5><p>(1)其中 $\theta$ 为比较符号</p><script type="math/tex; mode=display"><属性列名> \theta \begin{Bmatrix}<属性列名>\\<常量>\\{\,} [{\,}distinct {\,} | {\,} all{\,}] {\,} (select语句)\end{Bmatrix}</script><p>(2)</p><script type="math/tex; mode=display"><属性列名> [NOT]{\,} between\begin{Bmatrix}<属性列名>\\<常量>\\{\,} [{\,}distinct {\,} | {\,} all{\,}] {\,} (select语句)\end{Bmatrix}{\,}and{\,}\begin{Bmatrix}<属性列名>\\<常量>\\{\,} [{\,}distinct {\,} | {\,} all{\,}] {\,} (select语句)\end{Bmatrix}</script><p>(3)</p><script type="math/tex; mode=display"><属性列名> [NOT]{\,} in\begin{Bmatrix}(<值1>[{\,},{\,}[值2]{\,}]\cdots)\\(select语句)\end{Bmatrix}</script><p>(4)</p><script type="math/tex; mode=display"><属性列名> [not] {\,}{\,} like <匹配串></script><p>(5)</p><script type="math/tex; mode=display"><属性列名> is {\,}{\,}[not] {\,}{\,} null</script><p>(6)</p><script type="math/tex; mode=display">not {\quad} exists{\quad} (select语句)</script><p>(7)</p><script type="math/tex; mode=display"><条件表达式>\begin{Bmatrix}AND\\\\OR\end{Bmatrix}{\,}and{\,}\begin{bmatrix}\begin{Bmatrix}AND\\\\OR\end{Bmatrix}& <条件表达式>\end{bmatrix}</script><h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><h4 id="定义视图"><a href="#定义视图" class="headerlink" title="定义视图"></a>定义视图</h4><h5 id="建立视图"><a href="#建立视图" class="headerlink" title="建立视图"></a>建立视图</h5><p>使用create view 命令建立视图，一般的格式为:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create view&lt;视图名&gt; [(列名)...]<br>as &lt;子查询&gt;<br>[with check option];<br></code></pre></td></tr></table></figure><p>with check option表示对视图进行update、insert和delete操作时要保证更新、插入或删除的行满足视图定义中的谓词条件。</p><p><strong>例1：</strong>建立信息系学生的视图，并要求进行修改和插入操作时仍需保证该视图只有信息系的学生</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create view IS_Student<br>as<br>select sno , sname , sage<br>from student<br>where sdept = &quot;IS&quot;<br>with check option;<br></code></pre></td></tr></table></figure><p>执行create view语句的结果<code>只是把视图的定义存入数据字典，并不执行其中的select语句</code>。只是在对视图查询的时候，才按视图的定义从基本表中将数据查出。所以，如果基本表的结构被破坏，视图可能不会正常工作。</p><p><strong>例2：</strong>建立信息系选修了一号课程的学生的视图(包括学生、姓名、成绩)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create view is_s1(sno,sname,grade)<br>as <br>select student.sno , sname , grade<br>from student , sc<br>where student.sdept = &quot;IS&quot;<br>and student.sno = sc.sno<br>and sc.cno  = &quot;1&quot;<br>with check option;<br></code></pre></td></tr></table></figure><p><strong>例3：</strong>将学生的学号以及平均成绩定义为一个视图</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create view s_g(sno ,gavg)<br>as <br>select sno ,avg(grade)<br>from sc<br>group by sno;<br></code></pre></td></tr></table></figure><h5 id="删除视图"><a href="#删除视图" class="headerlink" title="删除视图"></a>删除视图</h5><p><strong>例1：</strong>删除视图is_s1</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">drop view is_s1;<br></code></pre></td></tr></table></figure><p>如果在is_s1视图的基础上建立了其他视图，那么这里是不能删除成功的，在后方插入cascade指令可以把和is_s1级联的视图同时删除</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">drop view is_s1 cascade;<br></code></pre></td></tr></table></figure><h4 id="查询视图"><a href="#查询视图" class="headerlink" title="查询视图"></a>查询视图</h4><p><strong>例1：</strong>在s_g视图中查询平均成绩在90分以上的学生学号和平均成绩</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select *<br>from s_g<br>where avg(gavg)&gt;=90;<br></code></pre></td></tr></table></figure><p>但是会报错，invalid use of group function，因为s_g底层是group聚集函数组成的，不能使用where语句</p>]]></content>
      
      
      <categories>
          
          <category> 学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第一篇博客</title>
      <link href="/2022/10/03/%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/"/>
      <url>/2022/10/03/%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<p>终于搭建好博客了，以后会在这里发布一些文章，同时分享一些自己的生活。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 原创 </tag>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2022/10/03/hello-world/"/>
      <url>/2022/10/03/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><p>一</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
